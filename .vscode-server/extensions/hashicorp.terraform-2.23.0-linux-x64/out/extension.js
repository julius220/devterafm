var Xm=Object.create;var fo=Object.defineProperty;var Ym=Object.getOwnPropertyDescriptor;var Qm=Object.getOwnPropertyNames;var Jm=Object.getPrototypeOf,Zm=Object.prototype.hasOwnProperty;var ee=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ev=(e,t)=>{for(var r in t)fo(e,r,{get:t[r],enumerable:!0})},Pl=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Qm(t))!Zm.call(e,o)&&o!==r&&fo(e,o,{get:()=>t[o],enumerable:!(n=Ym(t,o))||n.enumerable});return e};var Ht=(e,t,r)=>(r=e!=null?Xm(Jm(e)):{},Pl(t||!e||!e.__esModule?fo(r,"default",{value:e,enumerable:!0}):r,e)),tv=e=>Pl(fo({},"__esModule",{value:!0}),e);var bd=ee((lP,Ed)=>{var rv=Object.create,bi=Object.defineProperty,nv=Object.getOwnPropertyDescriptor,iv=Object.getOwnPropertyNames,Ol=Object.getOwnPropertySymbols,ov=Object.getPrototypeOf,Al=Object.prototype.hasOwnProperty,sv=Object.prototype.propertyIsEnumerable,Il=(e,t,r)=>t in e?bi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,nn=(e,t)=>{for(var r in t||(t={}))Al.call(t,r)&&Il(e,r,t[r]);if(Ol)for(var r of Ol(t))sv.call(t,r)&&Il(e,r,t[r]);return e},A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),av=(e,t)=>{for(var r in t)bi(e,r,{get:t[r],enumerable:!0})},xl=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of iv(t))!Al.call(e,o)&&o!==r&&bi(e,o,{get:()=>t[o],enumerable:!(n=nv(t,o))||n.enumerable});return e},Ci=(e,t,r)=>(r=e!=null?rv(ov(e)):{},xl(t||!e||!e.__esModule?bi(r,"default",{value:e,enumerable:!0}):r,e)),cv=e=>xl(bi({},"__esModule",{value:!0}),e),zt=A((e,t)=>{"use strict";var r=function(){function n(){}return n.info=function(o){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];n.enableDebug&&console.info(n.TAG+o,a)},n.warn=function(o){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];n.disableWarnings||console.warn(n.TAG+o,a)},n.enableDebug=!1,n.disableWarnings=!1,n.disableErrors=!1,n.TAG="ApplicationInsights:",n}();t.exports=r}),Nl=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(a){for(var i,s=1,c=arguments.length;s<c;s++){i=arguments[s];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(a[l]=i[l])}return a},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var r=zn(),n=require("events"),o=function(){function a(){}return a.prototype.active=function(){var i=this,s=r.CorrelationContextManager.getCurrentContext();return t(t({},s),{getValue:function(c){return i._activeSymbol?c===i._activeSymbol?s:!1:(i._activeSymbol=c,s)},setValue:function(){}})},a.prototype.with=function(i,s){var c=i.parentSpanId,l=i.name,d=a._spanToContext(i,c,l);return r.CorrelationContextManager.runWithContext(d,s)()},a.prototype.bind=function(i){return typeof i=="function"?r.CorrelationContextManager.wrapCallback(i):(i instanceof n.EventEmitter&&r.CorrelationContextManager.wrapEmitter(i),i)},a.prototype.enable=function(){return r.CorrelationContextManager.enable(),this},a.prototype.disable=function(){return r.CorrelationContextManager.disable(),this},a._spanToContext=function(i,s,c){var l=s?"|"+i.spanContext().traceId+"."+s+".":i.spanContext().traceId,d=t(t({},i.spanContext()),{traceFlags:i.spanContext().traceFlags}),u=r.CorrelationContextManager.spanToContextObject(d,l,c);return u},a}();e.OpenTelemetryScopeManagerWrapper=o,e.AsyncScopeManager=new o}),uv=A((e,t)=>{e=t.exports=re;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var h=Array.prototype.slice.call(arguments,0);h.unshift("SEMVER"),console.log.apply(console,h)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,i=e.re=[],s=e.src=[],c=0,l=c++;s[l]="0|[1-9]\\d*";var d=c++;s[d]="[0-9]+";var u=c++;s[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;s[p]="("+s[l]+")\\.("+s[l]+")\\.("+s[l]+")";var f=c++;s[f]="("+s[d]+")\\.("+s[d]+")\\.("+s[d]+")";var g=c++;s[g]="(?:"+s[l]+"|"+s[u]+")";var m=c++;s[m]="(?:"+s[d]+"|"+s[u]+")";var _=c++;s[_]="(?:-("+s[g]+"(?:\\."+s[g]+")*))";var E=c++;s[E]="(?:-?("+s[m]+"(?:\\."+s[m]+")*))";var T=c++;s[T]="[0-9A-Za-z-]+";var w=c++;s[w]="(?:\\+("+s[T]+"(?:\\."+s[T]+")*))";var R=c++,I="v?"+s[p]+s[_]+"?"+s[w]+"?";s[R]="^"+I+"$";var H="[v=\\s]*"+s[f]+s[E]+"?"+s[w]+"?",z=c++;s[z]="^"+H+"$";var K=c++;s[K]="((?:<|>)?=?)";var J=c++;s[J]=s[d]+"|x|X|\\*";var te=c++;s[te]=s[l]+"|x|X|\\*";var U=c++;s[U]="[v=\\s]*("+s[te]+")(?:\\.("+s[te]+")(?:\\.("+s[te]+")(?:"+s[_]+")?"+s[w]+"?)?)?";var V=c++;s[V]="[v=\\s]*("+s[J]+")(?:\\.("+s[J]+")(?:\\.("+s[J]+")(?:"+s[E]+")?"+s[w]+"?)?)?";var Q=c++;s[Q]="^"+s[K]+"\\s*"+s[U]+"$";var ne=c++;s[ne]="^"+s[K]+"\\s*"+s[V]+"$";var ve=c++;s[ve]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var de=c++;s[de]="(?:~>?)";var X=c++;s[X]="(\\s*)"+s[de]+"\\s+",i[X]=new RegExp(s[X],"g");var ce="$1~",ie=c++;s[ie]="^"+s[de]+s[U]+"$";var pe=c++;s[pe]="^"+s[de]+s[V]+"$";var he=c++;s[he]="(?:\\^)";var be=c++;s[be]="(\\s*)"+s[he]+"\\s+",i[be]=new RegExp(s[be],"g");var _e="$1^",Be=c++;s[Be]="^"+s[he]+s[U]+"$";var Je=c++;s[Je]="^"+s[he]+s[V]+"$";var ze=c++;s[ze]="^"+s[K]+"\\s*("+H+")$|^$";var Fe=c++;s[Fe]="^"+s[K]+"\\s*("+I+")$|^$";var xe=c++;s[xe]="(\\s*)"+s[K]+"\\s*("+H+"|"+s[U]+")",i[xe]=new RegExp(s[xe],"g");var it="$1$2$3",ut=c++;s[ut]="^\\s*("+s[U]+")\\s+-\\s+("+s[U]+")\\s*$";var Oe=c++;s[Oe]="^\\s*("+s[V]+")\\s+-\\s+("+s[V]+")\\s*$";var me=c++;for(s[me]="(<|>)?=?\\s*\\*",Ae=0;Ae<c;Ae++)r(Ae,s[Ae]),i[Ae]||(i[Ae]=new RegExp(s[Ae]));var Ae;e.parse=Me;function Me(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof re)return h;if(typeof h!="string"||h.length>n)return null;var C=v.loose?i[z]:i[R];if(!C.test(h))return null;try{return new re(h,v)}catch{return null}}e.valid=ir;function ir(h,v){var C=Me(h,v);return C?C.version:null}e.clean=at;function at(h,v){var C=Me(h.trim().replace(/^[=v]+/,""),v);return C?C.version:null}e.SemVer=re;function re(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof re){if(h.loose===v.loose)return h;h=h.version}else if(typeof h!="string")throw new TypeError("Invalid Version: "+h);if(h.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof re))return new re(h,v);r("SemVer",h,v),this.options=v,this.loose=!!v.loose;var C=h.trim().match(v.loose?i[z]:i[R]);if(!C)throw new TypeError("Invalid Version: "+h);if(this.raw=h,this.major=+C[1],this.minor=+C[2],this.patch=+C[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");C[4]?this.prerelease=C[4].split(".").map(function(D){if(/^[0-9]+$/.test(D)){var k=+D;if(k>=0&&k<o)return k}return D}):this.prerelease=[],this.build=C[5]?C[5].split("."):[],this.format()}re.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},re.prototype.toString=function(){return this.version},re.prototype.compare=function(h){return r("SemVer.compare",this.version,this.options,h),h instanceof re||(h=new re(h,this.options)),this.compareMain(h)||this.comparePre(h)},re.prototype.compareMain=function(h){return h instanceof re||(h=new re(h,this.options)),rt(this.major,h.major)||rt(this.minor,h.minor)||rt(this.patch,h.patch)},re.prototype.comparePre=function(h){if(h instanceof re||(h=new re(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;var v=0;do{var C=this.prerelease[v],D=h.prerelease[v];if(r("prerelease compare",v,C,D),C===void 0&&D===void 0)return 0;if(D===void 0)return 1;if(C===void 0)return-1;if(C!==D)return rt(C,D)}while(++v)},re.prototype.inc=function(h,v){switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",v),this.inc("pre",v);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",v),this.inc("pre",v);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var C=this.prerelease.length;--C>=0;)typeof this.prerelease[C]=="number"&&(this.prerelease[C]++,C=-2);C===-1&&this.prerelease.push(0)}v&&(this.prerelease[0]===v?isNaN(this.prerelease[1])&&(this.prerelease=[v,0]):this.prerelease=[v,0]);break;default:throw new Error("invalid increment argument: "+h)}return this.format(),this.raw=this.version,this},e.inc=er;function er(h,v,C,D){typeof C=="string"&&(D=C,C=void 0);try{return new re(h,C).inc(v,D).version}catch{return null}}e.diff=or;function or(h,v){if(L(h,v))return null;var C=Me(h),D=Me(v),k="";if(C.prerelease.length||D.prerelease.length){k="pre";var $="prerelease"}for(var W in C)if((W==="major"||W==="minor"||W==="patch")&&C[W]!==D[W])return k+W;return $}e.compareIdentifiers=rt;var ht=/^[0-9]+$/;function rt(h,v){var C=ht.test(h),D=ht.test(v);return C&&D&&(h=+h,v=+v),h===v?0:C&&!D?-1:D&&!C?1:h<v?-1:1}e.rcompareIdentifiers=Nt;function Nt(h,v){return rt(v,h)}e.major=lt;function lt(h,v){return new re(h,v).major}e.minor=$t;function $t(h,v){return new re(h,v).minor}e.patch=Pt;function Pt(h,v){return new re(h,v).patch}e.compare=M;function M(h,v,C){return new re(h,C).compare(new re(v,C))}e.compareLoose=N;function N(h,v){return M(h,v,!0)}e.rcompare=P;function P(h,v,C){return M(v,h,C)}e.sort=q;function q(h,v){return h.sort(function(C,D){return e.compare(C,D,v)})}e.rsort=F;function F(h,v){return h.sort(function(C,D){return e.rcompare(C,D,v)})}e.gt=y;function y(h,v,C){return M(h,v,C)>0}e.lt=b;function b(h,v,C){return M(h,v,C)<0}e.eq=L;function L(h,v,C){return M(h,v,C)===0}e.neq=G;function G(h,v,C){return M(h,v,C)!==0}e.gte=ue;function ue(h,v,C){return M(h,v,C)>=0}e.lte=fe;function fe(h,v,C){return M(h,v,C)<=0}e.cmp=Re;function Re(h,v,C,D){switch(v){case"===":return typeof h=="object"&&(h=h.version),typeof C=="object"&&(C=C.version),h===C;case"!==":return typeof h=="object"&&(h=h.version),typeof C=="object"&&(C=C.version),h!==C;case"":case"=":case"==":return L(h,C,D);case"!=":return G(h,C,D);case">":return y(h,C,D);case">=":return ue(h,C,D);case"<":return b(h,C,D);case"<=":return fe(h,C,D);default:throw new TypeError("Invalid operator: "+v)}}e.Comparator=ye;function ye(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof ye){if(h.loose===!!v.loose)return h;h=h.value}if(!(this instanceof ye))return new ye(h,v);r("comparator",h,v),this.options=v,this.loose=!!v.loose,this.parse(h),this.semver===He?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var He={};ye.prototype.parse=function(h){var v=this.options.loose?i[ze]:i[Fe],C=h.match(v);if(!C)throw new TypeError("Invalid comparator: "+h);this.operator=C[1],this.operator==="="&&(this.operator=""),C[2]?this.semver=new re(C[2],this.options.loose):this.semver=He},ye.prototype.toString=function(){return this.value},ye.prototype.test=function(h){return r("Comparator.test",h,this.options.loose),this.semver===He?!0:(typeof h=="string"&&(h=new re(h,this.options)),Re(h,this.operator,this.semver,this.options))},ye.prototype.intersects=function(h,v){if(!(h instanceof ye))throw new TypeError("a Comparator is required");(!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1});var C;if(this.operator==="")return C=new le(h.value,v),_t(this.value,C,v);if(h.operator==="")return C=new le(this.value,v),_t(h.semver,C,v);var D=(this.operator===">="||this.operator===">")&&(h.operator===">="||h.operator===">"),k=(this.operator==="<="||this.operator==="<")&&(h.operator==="<="||h.operator==="<"),$=this.semver.version===h.semver.version,W=(this.operator===">="||this.operator==="<=")&&(h.operator===">="||h.operator==="<="),se=Re(this.semver,"<",h.semver,v)&&(this.operator===">="||this.operator===">")&&(h.operator==="<="||h.operator==="<"),oe=Re(this.semver,">",h.semver,v)&&(this.operator==="<="||this.operator==="<")&&(h.operator===">="||h.operator===">");return D||k||$&&W||se||oe},e.Range=le;function le(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof le)return h.loose===!!v.loose&&h.includePrerelease===!!v.includePrerelease?h:new le(h.raw,v);if(h instanceof ye)return new le(h.value,v);if(!(this instanceof le))return new le(h,v);if(this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease,this.raw=h,this.set=h.split(/\s*\|\|\s*/).map(function(C){return this.parseRange(C.trim())},this).filter(function(C){return C.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+h);this.format()}le.prototype.format=function(){return this.range=this.set.map(function(h){return h.join(" ").trim()}).join("||").trim(),this.range},le.prototype.toString=function(){return this.range},le.prototype.parseRange=function(h){var v=this.options.loose;h=h.trim();var C=v?i[Oe]:i[ut];h=h.replace(C,Ve),r("hyphen replace",h),h=h.replace(i[xe],it),r("comparator trim",h,i[xe]),h=h.replace(i[X],ce),h=h.replace(i[be],_e),h=h.split(/\s+/).join(" ");var D=v?i[ze]:i[Fe],k=h.split(" ").map(function($){return kt($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(k=k.filter(function($){return!!$.match(D)})),k=k.map(function($){return new ye($,this.options)},this),k},le.prototype.intersects=function(h,v){if(!(h instanceof le))throw new TypeError("a Range is required");return this.set.some(function(C){return C.every(function(D){return h.set.some(function(k){return k.every(function($){return D.intersects($,v)})})})})},e.toComparators=qe;function qe(h,v){return new le(h,v).set.map(function(C){return C.map(function(D){return D.value}).join(" ").trim().split(" ")})}function kt(h,v){return r("comp",h,v),h=Gr(h,v),r("caret",h),h=Ut(h,v),r("tildes",h),h=S(h,v),r("xrange",h),h=ge(h,v),r("stars",h),h}function De(h){return!h||h.toLowerCase()==="x"||h==="*"}function Ut(h,v){return h.trim().split(/\s+/).map(function(C){return Vr(C,v)}).join(" ")}function Vr(h,v){var C=v.loose?i[pe]:i[ie];return h.replace(C,function(D,k,$,W,se){r("tilde",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":se?(r("replaceTilde pr",se),oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0"):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0",r("tilde return",oe),oe})}function Gr(h,v){return h.trim().split(/\s+/).map(function(C){return Wr(C,v)}).join(" ")}function Wr(h,v){r("caret",h,v);var C=v.loose?i[Je]:i[Be];return h.replace(C,function(D,k,$,W,se){r("caret",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?k==="0"?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+".0 <"+(+k+1)+".0.0":se?(r("replaceCaret pr",se),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+"-"+se+" <"+(+k+1)+".0.0"):(r("no pr"),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+" <"+(+k+1)+".0.0"),r("caret return",oe),oe})}function S(h,v){return r("replaceXRanges",h,v),h.split(/\s+/).map(function(C){return Z(C,v)}).join(" ")}function Z(h,v){h=h.trim();var C=v.loose?i[ne]:i[Q];return h.replace(C,function(D,k,$,W,se,oe){r("xRange",h,D,k,$,W,se,oe);var et=De($),Ye=et||De(W),Ge=Ye||De(se),je=Ge;return k==="="&&je&&(k=""),et?k===">"||k==="<"?D="<0.0.0":D="*":k&&je?(Ye&&(W=0),se=0,k===">"?(k=">=",Ye?($=+$+1,W=0,se=0):(W=+W+1,se=0)):k==="<="&&(k="<",Ye?$=+$+1:W=+W+1),D=k+$+"."+W+"."+se):Ye?D=">="+$+".0.0 <"+(+$+1)+".0.0":Ge&&(D=">="+$+"."+W+".0 <"+$+"."+(+W+1)+".0"),r("xRange return",D),D})}function ge(h,v){return r("replaceStars",h,v),h.trim().replace(i[me],"")}function Ve(h,v,C,D,k,$,W,se,oe,et,Ye,Ge,je){return De(C)?v="":De(D)?v=">="+C+".0.0":De(k)?v=">="+C+"."+D+".0":v=">="+v,De(oe)?se="":De(et)?se="<"+(+oe+1)+".0.0":De(Ye)?se="<"+oe+"."+(+et+1)+".0":Ge?se="<="+oe+"."+et+"."+Ye+"-"+Ge:se="<="+se,(v+" "+se).trim()}le.prototype.test=function(h){if(!h)return!1;typeof h=="string"&&(h=new re(h,this.options));for(var v=0;v<this.set.length;v++)if(Qe(this.set[v],h,this.options))return!0;return!1};function Qe(h,v,C){for(var D=0;D<h.length;D++)if(!h[D].test(v))return!1;if(v.prerelease.length&&!C.includePrerelease){for(D=0;D<h.length;D++)if(r(h[D].semver),h[D].semver!==He&&h[D].semver.prerelease.length>0){var k=h[D].semver;if(k.major===v.major&&k.minor===v.minor&&k.patch===v.patch)return!0}return!1}return!0}e.satisfies=_t;function _t(h,v,C){try{v=new le(v,C)}catch{return!1}return v.test(h)}e.maxSatisfying=lr;function lr(h,v,C){var D=null,k=null;try{var $=new le(v,C)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===-1)&&(D=W,k=new re(D,C))}),D}e.minSatisfying=En;function En(h,v,C){var D=null,k=null;try{var $=new le(v,C)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===1)&&(D=W,k=new re(D,C))}),D}e.minVersion=yr;function yr(h,v){h=new le(h,v);var C=new re("0.0.0");if(h.test(C)||(C=new re("0.0.0-0"),h.test(C)))return C;C=null;for(var D=0;D<h.set.length;++D){var k=h.set[D];k.forEach(function($){var W=new re($.semver.version);switch($.operator){case">":W.prerelease.length===0?W.patch++:W.prerelease.push(0),W.raw=W.format();case"":case">=":(!C||y(C,W))&&(C=W);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return C&&h.test(C)?C:null}e.validRange=bn;function bn(h,v){try{return new le(h,v).range||"*"}catch{return null}}e.ltr=Cn;function Cn(h,v,C){return hr(h,v,"<",C)}e.gtr=Tn;function Tn(h,v,C){return hr(h,v,">",C)}e.outside=hr;function hr(h,v,C,D){h=new re(h,D),v=new le(v,D);var k,$,W,se,oe;switch(C){case">":k=y,$=fe,W=b,se=">",oe=">=";break;case"<":k=b,$=ue,W=y,se="<",oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(_t(h,v,D))return!1;for(var et=0;et<v.set.length;++et){var Ye=v.set[et],Ge=null,je=null;if(Ye.forEach(function(dt){dt.semver===He&&(dt=new ye(">=0.0.0")),Ge=Ge||dt,je=je||dt,k(dt.semver,Ge.semver,D)?Ge=dt:W(dt.semver,je.semver,D)&&(je=dt)}),Ge.operator===se||Ge.operator===oe||(!je.operator||je.operator===se)&&$(h,je.semver)||je.operator===oe&&W(h,je.semver))return!1}return!0}e.prerelease=Sn;function Sn(h,v){var C=Me(h,v);return C&&C.prerelease.length?C.prerelease:null}e.intersects=Er;function Er(h,v,C){return h=new le(h,C),v=new le(v,C),h.intersects(v)}e.coerce=Rn;function Rn(h){if(h instanceof re)return h;if(typeof h!="string")return null;var v=h.match(i[ve]);return v==null?null:Me(v[1]+"."+(v[2]||"0")+"."+(v[3]||"0"))}}),Dl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var t=require("path"),r=uv(),n=require("module"),o=Object.keys(process.binding("natives")),a=n.prototype.require;function i(s){var c={};return function(l){var d=a.apply(this,arguments);if(s[l]){var u=n._resolveFilename(l,this);if(c.hasOwnProperty(u))return c[u];var p=void 0;if(o.indexOf(l)<0)try{p=a.call(this,t.join(l,"package.json")).version}catch{return d}else p=process.version.substring(1);var f=p.indexOf("-");f>=0&&(p=p.substring(0,f));for(var g=d,m=0,_=s[l];m<_.length;m++){var E=_[m];r.satisfies(p,E.versionSpecifier)&&(g=E.patch(g,u))}return c[u]=g}return d}}e.makePatchingRequire=i}),lv=A((e,t)=>{t.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),Mt=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var t=Dl(),r=Dl();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return r.makePatchingRequire}});var n=function(i){return!0},o=function(){function i(){this.version=lv().version,this.subscribers={},this.contextPreservationFunction=function(s){return s},this.knownPatches={},this.currentlyPublishing=!1}return i.prototype.shouldPublish=function(s){var c=this.subscribers[s];return c?c.some(function(l){var d=l.filter;return!d||d(!1)}):!1},i.prototype.publish=function(s,c){if(!this.currentlyPublishing){var l=this.subscribers[s];if(l){var d={timestamp:Date.now(),data:c};this.currentlyPublishing=!0,l.forEach(function(u){var p=u.listener,f=u.filter;try{f&&f(!0)&&p(d)}catch{}}),this.currentlyPublishing=!1}}},i.prototype.subscribe=function(s,c,l){l===void 0&&(l=n),this.subscribers[s]||(this.subscribers[s]=[]),this.subscribers[s].push({listener:c,filter:l})},i.prototype.unsubscribe=function(s,c,l){l===void 0&&(l=n);var d=this.subscribers[s];if(d){for(var u=0;u<d.length;++u)if(d[u].listener===c&&d[u].filter===l)return d.splice(u,1),!0}return!1},i.prototype.reset=function(){var s=this;this.subscribers={},this.contextPreservationFunction=function(c){return c},Object.getOwnPropertyNames(this.knownPatches).forEach(function(c){return delete s.knownPatches[c]})},i.prototype.bindToContext=function(s){return this.contextPreservationFunction(s)},i.prototype.addContextPreservation=function(s){var c=this.contextPreservationFunction;this.contextPreservationFunction=function(l){return s(c(l))}},i.prototype.registerMonkeyPatch=function(s,c){this.knownPatches[s]||(this.knownPatches[s]=[]),this.knownPatches[s].push(c)},i.prototype.getPatchesObject=function(){return this.knownPatches},i}();global.diagnosticsSource||(global.diagnosticsSource=new o,a=require("module"),a.prototype.require=t.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var a;e.channel=global.diagnosticsSource}),dv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),pv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis=typeof globalThis=="object"?globalThis:global}),fv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(pv(),e)}),hv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(fv(),e)}),kl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"}),gv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var t=kl(),r=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(o){var a=new Set([o]),i=new Set,s=o.match(r);if(!s)return function(){return!1};var c={major:+s[1],minor:+s[2],patch:+s[3],prerelease:s[4]};if(c.prerelease!=null)return function(u){return u===o};function l(u){return i.add(u),!1}function d(u){return a.add(u),!0}return function(u){if(a.has(u))return!0;if(i.has(u))return!1;var p=u.match(r);if(!p)return l(u);var f={major:+p[1],minor:+p[2],patch:+p[3],prerelease:p[4]};return f.prerelease!=null||c.major!==f.major?l(u):c.major===0?c.minor===f.minor&&c.patch<=f.patch?d(u):l(u):c.minor<=f.minor?d(u):l(u)}}e._makeCompatibilityCheck=n,e.isCompatible=n(t.VERSION)}),Ti=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var t=hv(),r=kl(),n=gv(),o=r.VERSION.split(".")[0],a=Symbol.for("opentelemetry.js.api."+o),i=t._globalThis;function s(d,u,p,f){var g;f===void 0&&(f=!1);var m=i[a]=(g=i[a])!==null&&g!==void 0?g:{version:r.VERSION};if(!f&&m[d]){var _=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+d);return p.error(_.stack||_.message),!1}if(m.version!==r.VERSION){var _=new Error("@opentelemetry/api: All API registration versions must match");return p.error(_.stack||_.message),!1}return m[d]=u,p.debug("@opentelemetry/api: Registered a global for "+d+" v"+r.VERSION+"."),!0}e.registerGlobal=s;function c(d){var u,p,f=(u=i[a])===null||u===void 0?void 0:u.version;if(!(!f||!n.isCompatible(f)))return(p=i[a])===null||p===void 0?void 0:p[d]}e.getGlobal=c;function l(d,u){u.debug("@opentelemetry/api: Unregistering a global for "+d+" v"+r.VERSION+".");var p=i[a];p&&delete p[d]}e.unregisterGlobal=l}),mv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var t=Ti(),r=function(){function o(a){this._namespace=a.namespace||"DiagComponentLogger"}return o.prototype.debug=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("debug",this._namespace,a)},o.prototype.error=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("error",this._namespace,a)},o.prototype.info=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("info",this._namespace,a)},o.prototype.warn=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("warn",this._namespace,a)},o.prototype.verbose=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n("verbose",this._namespace,a)},o}();e.DiagComponentLogger=r;function n(o,a,i){var s=t.getGlobal("diag");if(s)return i.unshift(a),s[o].apply(s,i)}}),Us=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0;var t;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(t=e.DiagLogLevel||(e.DiagLogLevel={}))}),vv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var t=Us();function r(n,o){n<t.DiagLogLevel.NONE?n=t.DiagLogLevel.NONE:n>t.DiagLogLevel.ALL&&(n=t.DiagLogLevel.ALL),o=o||{};function a(i,s){var c=o[i];return typeof c=="function"&&n>=s?c.bind(o):function(){}}return{error:a("error",t.DiagLogLevel.ERROR),warn:a("warn",t.DiagLogLevel.WARN),info:a("info",t.DiagLogLevel.INFO),debug:a("debug",t.DiagLogLevel.DEBUG),verbose:a("verbose",t.DiagLogLevel.VERBOSE)}}e.createLogLevelDiagLogger=r}),Si=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var t=mv(),r=vv(),n=Us(),o=Ti(),a="diag",i=function(){function s(){function c(d){return function(){var u=o.getGlobal("diag");if(u)return u[d].apply(u,arguments)}}var l=this;l.setLogger=function(d,u){var p,f;if(u===void 0&&(u=n.DiagLogLevel.INFO),d===l){var g=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((p=g.stack)!==null&&p!==void 0?p:g.message),!1}var m=o.getGlobal("diag"),_=r.createLogLevelDiagLogger(u,d);if(m){var E=(f=new Error().stack)!==null&&f!==void 0?f:"<failed to generate stacktrace>";m.warn("Current logger will be overwritten from "+E),_.warn("Current logger will overwrite one already registered from "+E)}return o.registerGlobal("diag",_,l,!0)},l.disable=function(){o.unregisterGlobal(a,l)},l.createComponentLogger=function(d){return new t.DiagComponentLogger(d)},l.verbose=c("verbose"),l.debug=c("debug"),l.info=c("info"),l.warn=c("warn"),l.error=c("error")}return s.instance=function(){return this._instance||(this._instance=new s),this._instance},s}();e.DiagAPI=i}),_v=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var t=function(){function r(n){this._entries=n?new Map(n):new Map}return r.prototype.getEntry=function(n){var o=this._entries.get(n);if(o)return Object.assign({},o)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(n){var o=n[0],a=n[1];return[o,a]})},r.prototype.setEntry=function(n,o){var a=new r(this._entries);return a._entries.set(n,o),a},r.prototype.removeEntry=function(n){var o=new r(this._entries);return o._entries.delete(n),o},r.prototype.removeEntries=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];for(var a=new r(this._entries),i=0,s=n;i<s.length;i++){var c=s[i];a._entries.delete(c)}return a},r.prototype.clear=function(){return new r},r}();e.BaggageImpl=t}),yv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),Ml=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var t=Si(),r=_v(),n=yv(),o=t.DiagAPI.instance();function a(s){return s===void 0&&(s={}),new r.BaggageImpl(new Map(Object.entries(s)))}e.createBaggage=a;function i(s){return typeof s!="string"&&(o.error("Cannot create baggage metadata from unknown type: "+typeof s),s=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return s}}}e.baggageEntryMetadataFromString=i}),Ev=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),bv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Cv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var t=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],r=function(){function n(){function o(i){return function(){var s=arguments;if(console){var c=console[i];if(typeof c!="function"&&(c=console.log),typeof c=="function")return c.apply(console,s)}}}for(var a=0;a<t.length;a++)this[t[a].n]=o(t[a].c)}return n}();e.DiagConsoleLogger=r}),Tv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Cv(),e),r(Us(),e)}),ql=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(t,r){if(t!=null)return t[r]},keys:function(t){return t==null?[]:Object.keys(t)}},e.defaultTextMapSetter={set:function(t,r,n){t!=null&&(t[r]=n)}}}),Sv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Rv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),go=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0;function t(n){return Symbol.for(n)}e.createContextKey=t;var r=function(){function n(o){var a=this;a._currentContext=o?new Map(o):new Map,a.getValue=function(i){return a._currentContext.get(i)},a.setValue=function(i,s){var c=new n(a._currentContext);return c._currentContext.set(i,s),c},a.deleteValue=function(i){var s=new n(a._currentContext);return s._currentContext.delete(i),s}}return n}();e.ROOT_CONTEXT=new r}),wv=A(e=>{"use strict";var t=e&&e.__spreadArray||function(o,a){for(var i=0,s=a.length,c=o.length;i<s;i++,c++)o[c]=a[i];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var r=go(),n=function(){function o(){}return o.prototype.active=function(){return r.ROOT_CONTEXT},o.prototype.with=function(a,i,s){for(var c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return i.call.apply(i,t([s],c))},o.prototype.bind=function(a,i){return i},o.prototype.enable=function(){return this},o.prototype.disable=function(){return this},o}();e.NoopContextManager=n}),Ll=A(e=>{"use strict";var t=e&&e.__spreadArray||function(c,l){for(var d=0,u=l.length,p=c.length;d<u;d++,p++)c[p]=l[d];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var r=wv(),n=Ti(),o=Si(),a="context",i=new r.NoopContextManager,s=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(l){return n.registerGlobal(a,l,o.DiagAPI.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(l,d,u){for(var p,f=[],g=3;g<arguments.length;g++)f[g-3]=arguments[g];return(p=this._getContextManager()).with.apply(p,t([l,d,u],f))},c.prototype.bind=function(l,d){return this._getContextManager().bind(l,d)},c.prototype._getContextManager=function(){return n.getGlobal(a)||i},c.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(a,o.DiagAPI.instance())},c}();e.ContextAPI=s}),jl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0;var t;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(t=e.TraceFlags||(e.TraceFlags={}))}),Bs=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var t=jl();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:t.TraceFlags.NONE}}),Vs=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var t=Bs(),r=function(){function n(o){o===void 0&&(o=t.INVALID_SPAN_CONTEXT),this._spanContext=o}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(o,a){return this},n.prototype.setAttributes=function(o){return this},n.prototype.addEvent=function(o,a){return this},n.prototype.setStatus=function(o){return this},n.prototype.updateName=function(o){return this},n.prototype.end=function(o){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(o,a){},n}();e.NonRecordingSpan=r}),Fl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var t=go(),r=Vs(),n=t.createContextKey("OpenTelemetry Context Key SPAN");function o(l){return l.getValue(n)||void 0}e.getSpan=o;function a(l,d){return l.setValue(n,d)}e.setSpan=a;function i(l){return l.deleteValue(n)}e.deleteSpan=i;function s(l,d){return a(l,new r.NonRecordingSpan(d))}e.setSpanContext=s;function c(l){var d;return(d=o(l))===null||d===void 0?void 0:d.spanContext()}e.getSpanContext=c}),Gs=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var t=Bs(),r=Vs(),n=/^([0-9a-f]{32})$/i,o=/^[0-9a-f]{16}$/i;function a(l){return n.test(l)&&l!==t.INVALID_TRACEID}e.isValidTraceId=a;function i(l){return o.test(l)&&l!==t.INVALID_SPANID}e.isValidSpanId=i;function s(l){return a(l.traceId)&&i(l.spanId)}e.isSpanContextValid=s;function c(l){return new r.NonRecordingSpan(l)}e.wrapSpanContext=c}),Hl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var t=Ll(),r=Fl(),n=Vs(),o=Gs(),a=t.ContextAPI.getInstance(),i=function(){function c(){}return c.prototype.startSpan=function(l,d,u){var p=Boolean(d?.root);if(p)return new n.NonRecordingSpan;var f=u&&r.getSpanContext(u);return s(f)&&o.isSpanContextValid(f)?new n.NonRecordingSpan(f):new n.NonRecordingSpan},c.prototype.startActiveSpan=function(l,d,u,p){var f,g,m;if(!(arguments.length<2)){arguments.length===2?m=d:arguments.length===3?(f=d,m=u):(f=d,g=u,m=p);var _=g??a.active(),E=this.startSpan(l,f,_),T=r.setSpan(_,E);return a.with(T,m,void 0,E)}},c}();e.NoopTracer=i;function s(c){return typeof c=="object"&&typeof c.spanId=="string"&&typeof c.traceId=="string"&&typeof c.traceFlags=="number"}}),$l=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var t=Hl(),r=new t.NoopTracer,n=function(){function o(a,i,s){this._provider=a,this.name=i,this.version=s}return o.prototype.startSpan=function(a,i,s){return this._getTracer().startSpan(a,i,s)},o.prototype.startActiveSpan=function(a,i,s,c){var l=this._getTracer();return Reflect.apply(l.startActiveSpan,l,arguments)},o.prototype._getTracer=function(){if(this._delegate)return this._delegate;var a=this._provider.getDelegateTracer(this.name,this.version);return a?(this._delegate=a,this._delegate):r},o}();e.ProxyTracer=n}),Pv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var t=Hl(),r=function(){function n(){}return n.prototype.getTracer=function(o,a){return new t.NoopTracer},n}();e.NoopTracerProvider=r}),Ul=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var t=$l(),r=Pv(),n=new r.NoopTracerProvider,o=function(){function a(){}return a.prototype.getTracer=function(i,s){var c;return(c=this.getDelegateTracer(i,s))!==null&&c!==void 0?c:new t.ProxyTracer(this,i,s)},a.prototype.getDelegate=function(){var i;return(i=this._delegate)!==null&&i!==void 0?i:n},a.prototype.setDelegate=function(i){this._delegate=i},a.prototype.getDelegateTracer=function(i,s){var c;return(c=this._delegate)===null||c===void 0?void 0:c.getTracer(i,s)},a}();e.ProxyTracerProvider=o}),Ov=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Iv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0;var t;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(t=e.SamplingDecision||(e.SamplingDecision={}))}),Dv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Av=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0;var t;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(t=e.SpanKind||(e.SpanKind={}))}),xv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Nv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),kv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0;var t;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(t=e.SpanStatusCode||(e.SpanStatusCode={}))}),Mv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),qv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Lv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),jv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Fv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var t=Ti(),r=Ul(),n=Gs(),o=Fl(),a=Si(),i="trace",s=function(){function c(){this._proxyTracerProvider=new r.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=o.deleteSpan,this.getSpan=o.getSpan,this.getSpanContext=o.getSpanContext,this.setSpan=o.setSpan,this.setSpanContext=o.setSpanContext}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalTracerProvider=function(l){var d=t.registerGlobal(i,this._proxyTracerProvider,a.DiagAPI.instance());return d&&this._proxyTracerProvider.setDelegate(l),d},c.prototype.getTracerProvider=function(){return t.getGlobal(i)||this._proxyTracerProvider},c.prototype.getTracer=function(l,d){return this.getTracerProvider().getTracer(l,d)},c.prototype.disable=function(){t.unregisterGlobal(i,a.DiagAPI.instance()),this._proxyTracerProvider=new r.ProxyTracerProvider},c}();e.TraceAPI=s}),Hv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var t=function(){function r(){}return r.prototype.inject=function(n,o){},r.prototype.extract=function(n,o){return n},r.prototype.fields=function(){return[]},r}();e.NoopTextMapPropagator=t}),$v=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var t=go(),r=t.createContextKey("OpenTelemetry Baggage Key");function n(i){return i.getValue(r)||void 0}e.getBaggage=n;function o(i,s){return i.setValue(r,s)}e.setBaggage=o;function a(i){return i.deleteValue(r)}e.deleteBaggage=a}),Uv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var t=Ti(),r=Hv(),n=ql(),o=$v(),a=Ml(),i=Si(),s="propagation",c=new r.NoopTextMapPropagator,l=function(){function d(){this.createBaggage=a.createBaggage,this.getBaggage=o.getBaggage,this.setBaggage=o.setBaggage,this.deleteBaggage=o.deleteBaggage}return d.getInstance=function(){return this._instance||(this._instance=new d),this._instance},d.prototype.setGlobalPropagator=function(u){return t.registerGlobal(s,u,i.DiagAPI.instance())},d.prototype.inject=function(u,p,f){return f===void 0&&(f=n.defaultTextMapSetter),this._getGlobalPropagator().inject(u,p,f)},d.prototype.extract=function(u,p,f){return f===void 0&&(f=n.defaultTextMapGetter),this._getGlobalPropagator().extract(u,p,f)},d.prototype.fields=function(){return this._getGlobalPropagator().fields()},d.prototype.disable=function(){t.unregisterGlobal(s,i.DiagAPI.instance())},d.prototype._getGlobalPropagator=function(){return t.getGlobal(s)||c},d}();e.PropagationAPI=l}),bt=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(d,u,p,f){f===void 0&&(f=p),Object.defineProperty(d,f,{enumerable:!0,get:function(){return u[p]}})}:function(d,u,p,f){f===void 0&&(f=p),d[f]=u[p]}),r=e&&e.__exportStar||function(d,u){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(u,p)&&t(u,d,p)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,r(dv(),e);var n=Ml();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),r(Ev(),e),r(bv(),e),r(Tv(),e),r(ql(),e),r(Sv(),e),r(Rv(),e),r($l(),e),r(Ul(),e),r(Ov(),e),r(Iv(),e),r(Dv(),e),r(Av(),e),r(xv(),e),r(Nv(),e),r(kv(),e),r(jl(),e),r(Mv(),e),r(qv(),e),r(Lv(),e);var o=Gs();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return o.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return o.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return o.isValidSpanId}});var a=Bs();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return a.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return a.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return a.INVALID_SPAN_CONTEXT}}),r(go(),e),r(jv(),e);var i=Ll();e.context=i.ContextAPI.getInstance();var s=Fv();e.trace=s.TraceAPI.getInstance();var c=Uv();e.propagation=c.PropagationAPI.getInstance();var l=Si();e.diag=l.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}}),Ws=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var t=bt(),r=t.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(i){return i.setValue(r,!0)}e.suppressTracing=n;function o(i){return i.deleteValue(r)}e.unsuppressTracing=o;function a(i){return i.getValue(r)===!0}e.isTracingSuppressed=a}),Bl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192}),Vl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var t=bt(),r=Bl(),n=s=>s.reduce((c,l)=>{let d=`${c}${c!==""?r.BAGGAGE_ITEMS_SEPARATOR:""}${l}`;return d.length>r.BAGGAGE_MAX_TOTAL_LENGTH?c:d},"");e.serializeKeyPairs=n;var o=s=>s.getAllEntries().map(([c,l])=>`${encodeURIComponent(c)}=${encodeURIComponent(l.value)}`);e.getKeyPairs=o;var a=s=>{let c=s.split(r.BAGGAGE_PROPERTIES_SEPARATOR);if(c.length<=0)return;let l=c.shift();if(!l)return;let d=l.split(r.BAGGAGE_KEY_PAIR_SEPARATOR);if(d.length!==2)return;let u=decodeURIComponent(d[0].trim()),p=decodeURIComponent(d[1].trim()),f;return c.length>0&&(f=t.baggageEntryMetadataFromString(c.join(r.BAGGAGE_PROPERTIES_SEPARATOR))),{key:u,value:p,metadata:f}};e.parsePairKeyValue=a;var i=s=>typeof s!="string"||s.length===0?{}:s.split(r.BAGGAGE_ITEMS_SEPARATOR).map(c=>e.parsePairKeyValue(c)).filter(c=>c!==void 0&&c.value.length>0).reduce((c,l)=>(c[l.key]=l.value,c),{});e.parseKeyPairsIntoRecord=i}),Bv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var t=bt(),r=Ws(),n=Bl(),o=Vl(),a=class{inject(i,s,c){let l=t.propagation.getBaggage(i);if(!l||r.isTracingSuppressed(i))return;let d=o.getKeyPairs(l).filter(p=>p.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),u=o.serializeKeyPairs(d);u.length>0&&c.set(s,n.BAGGAGE_HEADER,u)}extract(i,s,c){let l=c.get(s,n.BAGGAGE_HEADER);if(!l)return i;let d={};return l.length===0||(l.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(u=>{let p=o.parsePairKeyValue(u);if(p){let f={value:p.value};p.metadata&&(f.metadata=p.metadata),d[p.key]=f}}),Object.entries(d).length===0)?i:t.propagation.setBaggage(i,t.propagation.createBaggage(d))}fields(){return[n.BAGGAGE_HEADER]}};e.HttpBaggagePropagator=a}),Vv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0;function t(a){let i={};if(a==null||typeof a!="object")return i;for(let[s,c]of Object.entries(a))r(c)&&(Array.isArray(c)?i[s]=c.slice():i[s]=c);return i}e.sanitizeAttributes=t;function r(a){return a==null?!0:Array.isArray(a)?n(a):o(a)}e.isAttributeValue=r;function n(a){let i;for(let s of a)if(s!=null){if(!i){if(o(s)){i=typeof s;continue}return!1}if(typeof s!==i)return!1}return!0}function o(a){switch(typeof a){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),Gl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var t=bt();function r(){return a=>{t.diag.error(n(a))}}e.loggingErrorHandler=r;function n(a){return typeof a=="string"?a:JSON.stringify(o(a))}function o(a){let i={},s=a;for(;s!==null;)Object.getOwnPropertyNames(s).forEach(c=>{if(i[c])return;let l=s[c];l&&(i[c]=String(l))}),s=Object.getPrototypeOf(s);return i}}),Wl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var t=Gl(),r=t.loggingErrorHandler();function n(a){r=a}e.setGlobalErrorHandler=n;var o=a=>{try{r(a)}catch{}};e.globalErrorHandler=o}),Kl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0;var t;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(t=e.TracesSamplerValues||(e.TracesSamplerValues={}))}),zl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var t=bt(),r=Kl(),n=",",o=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function a(f){return o.indexOf(f)>-1}var i=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function s(f){return i.indexOf(f)>-1}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:t.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:r.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function c(f,g,m,_=-1/0,E=1/0){if(typeof m[f]<"u"){let T=Number(m[f]);isNaN(T)||(T<_?g[f]=_:T>E?g[f]=E:g[f]=T)}}function l(f,g,m,_=n){let E=m[f];typeof E=="string"&&(g[f]=E.split(_).map(T=>T.trim()))}var d={ALL:t.DiagLogLevel.ALL,VERBOSE:t.DiagLogLevel.VERBOSE,DEBUG:t.DiagLogLevel.DEBUG,INFO:t.DiagLogLevel.INFO,WARN:t.DiagLogLevel.WARN,ERROR:t.DiagLogLevel.ERROR,NONE:t.DiagLogLevel.NONE};function u(f,g,m){let _=m[f];if(typeof _=="string"){let E=d[_.toUpperCase()];E!=null&&(g[f]=E)}}function p(f){let g={};for(let m in e.DEFAULT_ENVIRONMENT){let _=m;switch(_){case"OTEL_LOG_LEVEL":u(_,g,f);break;default:if(a(_))c(_,g,f);else if(s(_))l(_,g,f);else{let E=f[_];typeof E<"u"&&E!==null&&(g[_]=String(E))}}}return g}e.parseEnvironment=p}),Gv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var t=require("os"),r=zl();function n(){let o=r.parseEnvironment(process.env);return Object.assign({HOSTNAME:t.hostname()},r.DEFAULT_ENVIRONMENT,o)}e.getEnv=n}),Wv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0;function t(r){let n=r.length,o="";for(let a=0;a<n;a+=2){let i=r.substring(a,a+2),s=parseInt(i,16);o+=String.fromCharCode(s)}return Buffer.from(o,"ascii").toString("base64")}e.hexToBase64=t}),Kv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0;var t=8,r=16,n=class{constructor(){this.generateTraceId=a(r),this.generateSpanId=a(t)}};e.RandomIdGenerator=n;var o=Buffer.allocUnsafe(r);function a(i){return function(){for(let s=0;s<i/4;s++)o.writeUInt32BE(Math.random()*2**32>>>0,s*4);for(let s=0;s<i&&!(o[s]>0);s++)s===i-1&&(o[i-1]=1);return o.toString("hex",0,i)}}}),zv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var t=require("perf_hooks");e.otperformance=t.performance}),$s=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"}),Xv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var t;(function(u){u.OTHER_SQL="other_sql",u.MSSQL="mssql",u.MYSQL="mysql",u.ORACLE="oracle",u.DB2="db2",u.POSTGRESQL="postgresql",u.REDSHIFT="redshift",u.HIVE="hive",u.CLOUDSCAPE="cloudscape",u.HSQLDB="hsqldb",u.PROGRESS="progress",u.MAXDB="maxdb",u.HANADB="hanadb",u.INGRES="ingres",u.FIRSTSQL="firstsql",u.EDB="edb",u.CACHE="cache",u.ADABAS="adabas",u.FIREBIRD="firebird",u.DERBY="derby",u.FILEMAKER="filemaker",u.INFORMIX="informix",u.INSTANTDB="instantdb",u.INTERBASE="interbase",u.MARIADB="mariadb",u.NETEZZA="netezza",u.PERVASIVE="pervasive",u.POINTBASE="pointbase",u.SQLITE="sqlite",u.SYBASE="sybase",u.TERADATA="teradata",u.VERTICA="vertica",u.H2="h2",u.COLDFUSION="coldfusion",u.CASSANDRA="cassandra",u.HBASE="hbase",u.MONGODB="mongodb",u.REDIS="redis",u.COUCHBASE="couchbase",u.COUCHDB="couchdb",u.COSMOSDB="cosmosdb",u.DYNAMODB="dynamodb",u.NEO4J="neo4j",u.GEODE="geode",u.ELASTICSEARCH="elasticsearch",u.MEMCACHED="memcached",u.COCKROACHDB="cockroachdb"})(t=e.DbSystemValues||(e.DbSystemValues={}));var r;(function(u){u.ALL="all",u.EACH_QUORUM="each_quorum",u.QUORUM="quorum",u.LOCAL_QUORUM="local_quorum",u.ONE="one",u.TWO="two",u.THREE="three",u.LOCAL_ONE="local_one",u.ANY="any",u.SERIAL="serial",u.LOCAL_SERIAL="local_serial"})(r=e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={}));var n;(function(u){u.DATASOURCE="datasource",u.HTTP="http",u.PUBSUB="pubsub",u.TIMER="timer",u.OTHER="other"})(n=e.FaasTriggerValues||(e.FaasTriggerValues={}));var o;(function(u){u.INSERT="insert",u.EDIT="edit",u.DELETE="delete"})(o=e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={}));var a;(function(u){u.AWS="aws",u.AZURE="azure",u.GCP="gcp"})(a=e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={}));var i;(function(u){u.IP_TCP="ip_tcp",u.IP_UDP="ip_udp",u.IP="ip",u.UNIX="unix",u.PIPE="pipe",u.INPROC="inproc",u.OTHER="other"})(i=e.NetTransportValues||(e.NetTransportValues={}));var s;(function(u){u.HTTP_1_0="1.0",u.HTTP_1_1="1.1",u.HTTP_2_0="2.0",u.SPDY="SPDY",u.QUIC="QUIC"})(s=e.HttpFlavorValues||(e.HttpFlavorValues={}));var c;(function(u){u.QUEUE="queue",u.TOPIC="topic"})(c=e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={}));var l;(function(u){u.RECEIVE="receive",u.PROCESS="process"})(l=e.MessagingOperationValues||(e.MessagingOperationValues={}));var d;(function(u){u[u.OK=0]="OK",u[u.CANCELLED=1]="CANCELLED",u[u.UNKNOWN=2]="UNKNOWN",u[u.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",u[u.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",u[u.NOT_FOUND=5]="NOT_FOUND",u[u.ALREADY_EXISTS=6]="ALREADY_EXISTS",u[u.PERMISSION_DENIED=7]="PERMISSION_DENIED",u[u.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",u[u.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",u[u.ABORTED=10]="ABORTED",u[u.OUT_OF_RANGE=11]="OUT_OF_RANGE",u[u.UNIMPLEMENTED=12]="UNIMPLEMENTED",u[u.INTERNAL=13]="INTERNAL",u[u.UNAVAILABLE=14]="UNAVAILABLE",u[u.DATA_LOSS=15]="DATA_LOSS",u[u.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(d=e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))}),Yv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Xv(),e)}),Qv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var t;(function(s){s.AWS="aws",s.AZURE="azure",s.GCP="gcp"})(t=e.CloudProviderValues||(e.CloudProviderValues={}));var r;(function(s){s.AWS_EC2="aws_ec2",s.AWS_ECS="aws_ecs",s.AWS_EKS="aws_eks",s.AWS_LAMBDA="aws_lambda",s.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",s.AZURE_VM="azure_vm",s.AZURE_CONTAINER_INSTANCES="azure_container_instances",s.AZURE_AKS="azure_aks",s.AZURE_FUNCTIONS="azure_functions",s.AZURE_APP_SERVICE="azure_app_service",s.GCP_COMPUTE_ENGINE="gcp_compute_engine",s.GCP_CLOUD_RUN="gcp_cloud_run",s.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",s.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",s.GCP_APP_ENGINE="gcp_app_engine"})(r=e.CloudPlatformValues||(e.CloudPlatformValues={}));var n;(function(s){s.EC2="ec2",s.FARGATE="fargate"})(n=e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={}));var o;(function(s){s.AMD64="amd64",s.ARM32="arm32",s.ARM64="arm64",s.IA64="ia64",s.PPC32="ppc32",s.PPC64="ppc64",s.X86="x86"})(o=e.HostArchValues||(e.HostArchValues={}));var a;(function(s){s.WINDOWS="windows",s.LINUX="linux",s.DARWIN="darwin",s.FREEBSD="freebsd",s.NETBSD="netbsd",s.OPENBSD="openbsd",s.DRAGONFLYBSD="dragonflybsd",s.HPUX="hpux",s.AIX="aix",s.SOLARIS="solaris",s.Z_OS="z_os"})(a=e.OsTypeValues||(e.OsTypeValues={}));var i;(function(s){s.CPP="cpp",s.DOTNET="dotnet",s.ERLANG="erlang",s.GO="go",s.JAVA="java",s.NODEJS="nodejs",s.PHP="php",s.PYTHON="python",s.RUBY="ruby",s.WEBJS="webjs"})(i=e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))}),Jv=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Qv(),e)}),Ri=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Yv(),e),r(Jv(),e)}),Zv=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var t=$s(),r=Ri();e.SDK_INFO={[r.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[r.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[r.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.TelemetrySdkLanguageValues.NODEJS,[r.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.VERSION}}),e_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0;function t(r){r.unref()}e.unrefTimer=t}),t_=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Gv(),e),r(Wv(),e),r(Kv(),e),r(zv(),e),r(Zv(),e),r(e_(),e)}),Xl=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(t_(),e)}),r_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var t=Xl(),r=9,n=Math.pow(10,r);function o(m){let _=m/1e3,E=Math.trunc(_),T=Number((_-E).toFixed(r))*n;return[E,T]}function a(){let m=t.otperformance.timeOrigin;if(typeof m!="number"){let _=t.otperformance;m=_.timing&&_.timing.fetchStart}return m}function i(m){let _=o(a()),E=o(typeof m=="number"?m:t.otperformance.now()),T=_[0]+E[0],w=_[1]+E[1];return w>n&&(w-=n,T+=1),[T,w]}e.hrTime=i;function s(m){if(f(m))return m;if(typeof m=="number")return m<a()?i(m):o(m);if(m instanceof Date)return o(m.getTime());throw TypeError("Invalid input type")}e.timeInputToHrTime=s;function c(m,_){let E=_[0]-m[0],T=_[1]-m[1];return T<0&&(E-=1,T+=n),[E,T]}e.hrTimeDuration=c;function l(m){let _=r,E=`${"0".repeat(_)}${m[1]}Z`,T=E.substr(E.length-_-1);return new Date(m[0]*1e3).toISOString().replace("000Z",T)}e.hrTimeToTimeStamp=l;function d(m){return m[0]*n+m[1]}e.hrTimeToNanoseconds=d;function u(m){return Math.round(m[0]*1e3+m[1]/1e6)}e.hrTimeToMilliseconds=u;function p(m){return Math.round(m[0]*1e6+m[1]/1e3)}e.hrTimeToMicroseconds=p;function f(m){return Array.isArray(m)&&m.length===2&&typeof m[0]=="number"&&typeof m[1]=="number"}e.isTimeInputHrTime=f;function g(m){return f(m)||typeof m=="number"||m instanceof Date}e.isTimeInput=g}),n_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),i_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0;var t;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(t=e.ExportResultCode||(e.ExportResultCode={}))}),o_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var t=bt(),r=class{constructor(n={}){var o;this._propagators=(o=n.propagators)!==null&&o!==void 0?o:[],this._fields=Array.from(new Set(this._propagators.map(a=>typeof a.fields=="function"?a.fields():[]).reduce((a,i)=>a.concat(i),[])))}inject(n,o,a){for(let i of this._propagators)try{i.inject(n,o,a)}catch(s){t.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${s.message}`)}}extract(n,o,a){return this._propagators.reduce((i,s)=>{try{return s.extract(i,o,a)}catch(c){t.diag.warn(`Failed to inject with ${s.constructor.name}. Err: ${c.message}`)}return i},n)}fields(){return this._fields.slice()}};e.CompositePropagator=r}),s_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var t="[_0-9a-z-*/]",r=`[a-z]${t}{0,255}`,n=`[a-z0-9]${t}{0,240}@[a-z]${t}{0,13}`,o=new RegExp(`^(?:${r}|${n})$`),a=/^[ -~]{0,255}[!-~]$/,i=/,|=/;function s(l){return o.test(l)}e.validateKey=s;function c(l){return a.test(l)&&!i.test(l)}e.validateValue=c}),Yl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var t=s_(),r=32,n=512,o=",",a="=",i=class{constructor(s){this._internalState=new Map,s&&this._parse(s)}set(s,c){let l=this._clone();return l._internalState.has(s)&&l._internalState.delete(s),l._internalState.set(s,c),l}unset(s){let c=this._clone();return c._internalState.delete(s),c}get(s){return this._internalState.get(s)}serialize(){return this._keys().reduce((s,c)=>(s.push(c+a+this.get(c)),s),[]).join(o)}_parse(s){s.length>n||(this._internalState=s.split(o).reverse().reduce((c,l)=>{let d=l.trim(),u=d.indexOf(a);if(u!==-1){let p=d.slice(0,u),f=d.slice(u+1,l.length);t.validateKey(p)&&t.validateValue(f)&&c.set(p,f)}return c},new Map),this._internalState.size>r&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,r))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let s=new i;return s._internalState=new Map(this._internalState),s}};e.TraceState=i}),a_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var t=bt(),r=Ws(),n=Yl();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var o="00",a="(?!ff)[\\da-f]{2}",i="(?![0]{32})[\\da-f]{32}",s="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",l=new RegExp(`^\\s?(${a})-(${i})-(${s})-(${c})(-.*)?\\s?$`);function d(p){let f=l.exec(p);return!f||f[1]==="00"&&f[5]?null:{traceId:f[2],spanId:f[3],traceFlags:parseInt(f[4],16)}}e.parseTraceParent=d;var u=class{inject(p,f,g){let m=t.trace.getSpanContext(p);if(!m||r.isTracingSuppressed(p)||!t.isSpanContextValid(m))return;let _=`${o}-${m.traceId}-${m.spanId}-0${Number(m.traceFlags||t.TraceFlags.NONE).toString(16)}`;g.set(f,e.TRACE_PARENT_HEADER,_),m.traceState&&g.set(f,e.TRACE_STATE_HEADER,m.traceState.serialize())}extract(p,f,g){let m=g.get(f,e.TRACE_PARENT_HEADER);if(!m)return p;let _=Array.isArray(m)?m[0]:m;if(typeof _!="string")return p;let E=d(_);if(!E)return p;E.isRemote=!0;let T=g.get(f,e.TRACE_STATE_HEADER);if(T){let w=Array.isArray(T)?T.join(","):T;E.traceState=new n.TraceState(typeof w=="string"?w:void 0)}return t.trace.setSpanContext(p,E)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}};e.HttpTraceContextPropagator=u}),c_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),u_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var t=bt(),r=t.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),n;(function(s){s.HTTP="http"})(n=e.RPCType||(e.RPCType={}));function o(s,c){return s.setValue(r,c)}e.setRPCMetadata=o;function a(s){return s.deleteValue(r)}e.deleteRPCMetadata=a;function i(s){return s.getValue(r)}e.getRPCMetadata=i}),Ql=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var t=bt(),r=class{shouldSample(){return{decision:t.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};e.AlwaysOffSampler=r}),Jl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var t=bt(),r=class{shouldSample(){return{decision:t.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};e.AlwaysOnSampler=r}),l_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var t=bt(),r=Wl(),n=Ql(),o=Jl(),a=class{constructor(i){var s,c,l,d;this._root=i.root,this._root||(r.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new o.AlwaysOnSampler),this._remoteParentSampled=(s=i.remoteParentSampled)!==null&&s!==void 0?s:new o.AlwaysOnSampler,this._remoteParentNotSampled=(c=i.remoteParentNotSampled)!==null&&c!==void 0?c:new n.AlwaysOffSampler,this._localParentSampled=(l=i.localParentSampled)!==null&&l!==void 0?l:new o.AlwaysOnSampler,this._localParentNotSampled=(d=i.localParentNotSampled)!==null&&d!==void 0?d:new n.AlwaysOffSampler}shouldSample(i,s,c,l,d,u){let p=t.trace.getSpanContext(i);return!p||!t.isSpanContextValid(p)?this._root.shouldSample(i,s,c,l,d,u):p.isRemote?p.traceFlags&t.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(i,s,c,l,d,u):this._remoteParentNotSampled.shouldSample(i,s,c,l,d,u):p.traceFlags&t.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(i,s,c,l,d,u):this._localParentNotSampled.shouldSample(i,s,c,l,d,u)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};e.ParentBasedSampler=a}),d_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var t=bt(),r=class{constructor(n=0){this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(n,o){return{decision:t.isValidTraceId(o)&&this._accumulate(o)<this._upperBound?t.SamplingDecision.RECORD_AND_SAMPLED:t.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return typeof n!="number"||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let o=0;for(let a=0;a<n.length/8;a++){let i=a*8,s=parseInt(n.slice(i,i+8),16);o=(o^s)>>>0}return o}};e.TraceIdRatioBasedSampler=r}),p_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0;function t(n,o){return typeof o=="string"?n===o:o.test(n)}e.urlMatches=t;function r(n,o){if(!o)return!1;for(let a of o)if(t(n,a))return!0;return!1}e.isUrlIgnored=r}),f_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0;function t(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}e.isWrapped=t}),Pr=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,r(Bv(),e),r(Vv(),e),r(Wl(),e),r(Gl(),e),r(r_(),e),r(n_(),e),r(i_(),e),r($s(),e),e.baggageUtils=Vl(),r(Xl(),e),r(o_(),e),r(a_(),e),r(c_(),e),r(u_(),e),r(Ql(),e),r(Jl(),e),r(l_(),e),r(d_(),e),r(Ws(),e),r(Yl(),e),r(zl(),e),r(Kl(),e),r(p_(),e),r(f_(),e),r($s(),e)}),h_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"}),Zl=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var t=bt(),r=Pr(),n=Ri(),o=h_(),a=class{constructor(i,s,c,l,d,u,p=[],f=r.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:t.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=c,this._spanContext=l,this.parentSpanId=u,this.kind=d,this.links=p,this.startTime=r.timeInputToHrTime(f),this.resource=i.resource,this.instrumentationLibrary=i.instrumentationLibrary,this._spanLimits=i.getSpanLimits(),this._spanProcessor=i.getActiveSpanProcessor(),this._spanProcessor.onStart(this,s)}spanContext(){return this._spanContext}setAttribute(i,s){return s==null||this._isSpanEnded()?this:i.length===0?(t.diag.warn(`Invalid attribute key: ${i}`),this):r.isAttributeValue(s)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,i)?this:(this.attributes[i]=s,this):(t.diag.warn(`Invalid attribute value set for key: ${i}`),this)}setAttributes(i){for(let[s,c]of Object.entries(i))this.setAttribute(s,c);return this}addEvent(i,s,c){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(t.diag.warn("Dropping extra events."),this.events.shift()),r.isTimeInput(s)&&(typeof c>"u"&&(c=s),s=void 0),typeof c>"u"&&(c=r.hrTime()),this.events.push({name:i,attributes:s,time:r.timeInputToHrTime(c)}),this)}setStatus(i){return this._isSpanEnded()?this:(this.status=i,this)}updateName(i){return this._isSpanEnded()?this:(this.name=i,this)}end(i=r.hrTime()){if(this._isSpanEnded()){t.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=r.timeInputToHrTime(i),this._duration=r.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&t.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(i,s=r.hrTime()){let c={};typeof i=="string"?c[n.SemanticAttributes.EXCEPTION_MESSAGE]=i:i&&(i.code?c[n.SemanticAttributes.EXCEPTION_TYPE]=i.code.toString():i.name&&(c[n.SemanticAttributes.EXCEPTION_TYPE]=i.name),i.message&&(c[n.SemanticAttributes.EXCEPTION_MESSAGE]=i.message),i.stack&&(c[n.SemanticAttributes.EXCEPTION_STACKTRACE]=i.stack)),c[n.SemanticAttributes.EXCEPTION_TYPE]||c[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(o.ExceptionEventName,c,s):t.diag.warn(`Failed to record an exception ${i}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&t.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};e.Span=a}),ed=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var t=bt(),r=Pr(),n=r.getEnv(),o=r.TracesSamplerValues.AlwaysOn;e.DEFAULT_CONFIG={sampler:a(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:r.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function a(c=r.getEnv()){switch(c.OTEL_TRACES_SAMPLER){case r.TracesSamplerValues.AlwaysOn:return new r.AlwaysOnSampler;case r.TracesSamplerValues.AlwaysOff:return new r.AlwaysOffSampler;case r.TracesSamplerValues.ParentBasedAlwaysOn:return new r.ParentBasedSampler({root:new r.AlwaysOnSampler});case r.TracesSamplerValues.ParentBasedAlwaysOff:return new r.ParentBasedSampler({root:new r.AlwaysOffSampler});case r.TracesSamplerValues.TraceIdRatio:return new r.TraceIdRatioBasedSampler(s(c));case r.TracesSamplerValues.ParentBasedTraceIdRatio:return new r.ParentBasedSampler({root:new r.TraceIdRatioBasedSampler(s(c))});default:return t.diag.error(`OTEL_TRACES_SAMPLER value "${c.OTEL_TRACES_SAMPLER} invalid, defaulting to ${o}".`),new r.AlwaysOnSampler}}e.buildSamplerFromEnv=a;var i=1;function s(c){if(c.OTEL_TRACES_SAMPLER_ARG===void 0||c.OTEL_TRACES_SAMPLER_ARG==="")return t.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${i}.`),i;let l=Number(c.OTEL_TRACES_SAMPLER_ARG);return isNaN(l)?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${i}.`),i):l<0||l>1?(t.diag.error(`OTEL_TRACES_SAMPLER_ARG=${c.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${i}.`),i):l}}),g_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var t=ed();function r(n){let o={sampler:t.buildSamplerFromEnv()},a=Object.assign({},t.DEFAULT_CONFIG,o,n);return a.spanLimits=Object.assign({},t.DEFAULT_CONFIG.spanLimits,n.spanLimits||{}),a}e.mergeConfig=r}),m_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var t=bt(),r=Pr(),n=Zl(),o=g_(),a=class{constructor(s,c,l){this._tracerProvider=l;let d=o.mergeConfig(c);this._sampler=d.sampler,this._spanLimits=d.spanLimits,this._idGenerator=c.idGenerator||new r.RandomIdGenerator,this.resource=l.resource,this.instrumentationLibrary=s}startSpan(s,c={},l=t.context.active()){var d,u;if(r.isTracingSuppressed(l))return t.diag.debug("Instrumentation suppressed, returning Noop Span"),t.trace.wrapSpanContext(t.INVALID_SPAN_CONTEXT);let p=i(c,l),f=this._idGenerator.generateSpanId(),g,m,_;!p||!t.trace.isSpanContextValid(p)?g=this._idGenerator.generateTraceId():(g=p.traceId,m=p.traceState,_=p.spanId);let E=(d=c.kind)!==null&&d!==void 0?d:t.SpanKind.INTERNAL,T=(u=c.links)!==null&&u!==void 0?u:[],w=r.sanitizeAttributes(c.attributes),R=this._sampler.shouldSample(c.root?t.trace.setSpanContext(l,t.INVALID_SPAN_CONTEXT):l,g,s,E,w,T),I=R.decision===t.SamplingDecision.RECORD_AND_SAMPLED?t.TraceFlags.SAMPLED:t.TraceFlags.NONE,H={traceId:g,spanId:f,traceFlags:I,traceState:m};if(R.decision===t.SamplingDecision.NOT_RECORD)return t.diag.debug("Recording is off, propagating context in a non-recording span"),t.trace.wrapSpanContext(H);let z=new n.Span(this,l,s,H,E,_,T,c.startTime);return z.setAttributes(Object.assign(w,R.attributes)),z}startActiveSpan(s,c,l,d){let u,p,f;if(arguments.length<2)return;arguments.length===2?f=c:arguments.length===3?(u=c,f=l):(u=c,p=l,f=d);let g=p??t.context.active(),m=this.startSpan(s,u,g),_=t.trace.setSpan(g,m);return t.context.with(_,f,void 0,m)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};e.Tracer=a;function i(s,c){if(!s.root)return t.trace.getSpanContext(c)}}),v_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0;function t(){return`unknown_service:${process.argv0}`}e.defaultServiceName=t}),__=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var t=rd(),r=bt(),n=require("util"),o=async(i={})=>{let s=Object.assign(i),c=await Promise.all((s.detectors||[]).map(async l=>{try{let d=await l.detect(s);return r.diag.debug(`${l.constructor.name} found resource.`,d),d}catch(d){return r.diag.debug(`${l.constructor.name} failed: ${d.message}`),t.Resource.empty()}}));return a(c),c.reduce((l,d)=>l.merge(d),t.Resource.empty())};e.detectResources=o;var a=i=>{i.forEach(s=>{if(Object.keys(s.attributes).length>0){let c=n.inspect(s.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});r.diag.verbose(c)}})}}),y_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var t=bt(),r=Pr(),n=Ri(),o=Ks(),a=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(i){let s={},c=r.getEnv(),l=c.OTEL_RESOURCE_ATTRIBUTES,d=c.OTEL_SERVICE_NAME;if(l)try{let u=this._parseResourceAttributes(l);Object.assign(s,u)}catch(u){t.diag.debug(`EnvDetector failed: ${u.message}`)}return d&&(s[n.ResourceAttributes.SERVICE_NAME]=d),new o.Resource(s)}_parseResourceAttributes(i){if(!i)return{};let s={},c=i.split(this._COMMA_SEPARATOR,-1);for(let l of c){let d=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(d.length!==2)continue;let[u,p]=d;if(u=u.trim(),p=p.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(u))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(p))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);s[u]=p}return s}_isValid(i){return i.length<=this._MAX_LENGTH&&this._isPrintableString(i)}_isPrintableString(i){for(let s=0;s<i.length;s++){let c=i.charAt(s);if(c<=" "||c>="~")return!1}return!0}_isValidAndNotEmpty(i){return i.length>0&&this._isValid(i)}};e.envDetector=new a}),E_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var t=bt(),r=Ri(),n=Ks(),o=class{async detect(a){let i={[r.ResourceAttributes.PROCESS_PID]:process.pid,[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[r.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[r.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(i,a)}_getResourceAttributes(a,i){return a[r.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||a[r.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||a[r.ResourceAttributes.PROCESS_COMMAND]===""||a[r.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(t.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},a))}};e.processDetector=new o}),b_=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(y_(),e),r(E_(),e)}),C_=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(v_(),e),r(__(),e),r(b_(),e)}),td=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(C_(),e)}),rd=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var t=Ri(),r=Pr(),n=td(),o=class{constructor(a){this.attributes=a}static empty(){return o.EMPTY}static default(){return new o({[t.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[t.ResourceAttributes.TELEMETRY_SDK_NAME]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_NAME],[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:r.SDK_INFO[t.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(a){if(!a||!Object.keys(a.attributes).length)return this;let i=Object.assign({},this.attributes,a.attributes);return new o(i)}};e.Resource=o,o.EMPTY=new o({})}),T_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),S_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ks=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(rd(),e),r(td(),e),r(T_(),e),r(S_(),e)}),R_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var t=Pr(),r=class{constructor(n){this._spanProcessors=n}forceFlush(){let n=[];for(let o of this._spanProcessors)n.push(o.forceFlush());return new Promise(o=>{Promise.all(n).then(()=>{o()}).catch(a=>{t.globalErrorHandler(a||new Error("MultiSpanProcessor: forceFlush failed")),o()})})}onStart(n,o){for(let a of this._spanProcessors)a.onStart(n,o)}onEnd(n){for(let o of this._spanProcessors)o.onEnd(n)}shutdown(){let n=[];for(let o of this._spanProcessors)n.push(o.shutdown());return new Promise((o,a)=>{Promise.all(n).then(()=>{o()},a)})}};e.MultiSpanProcessor=r}),nd=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0;var t=class{onStart(r,n){}onEnd(r){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};e.NoopSpanProcessor=t}),w_=A((e,t)=>{var r=200,n="__lodash_hash_undefined__",o=800,a=16,i=9007199254740991,s="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",d="[object Boolean]",u="[object Date]",p="[object Error]",f="[object Function]",g="[object GeneratorFunction]",m="[object Map]",_="[object Number]",E="[object Null]",T="[object Object]",w="[object Proxy]",R="[object RegExp]",I="[object Set]",H="[object String]",z="[object Undefined]",K="[object WeakMap]",J="[object ArrayBuffer]",te="[object DataView]",U="[object Float32Array]",V="[object Float64Array]",Q="[object Int8Array]",ne="[object Int16Array]",ve="[object Int32Array]",de="[object Uint8Array]",X="[object Uint8ClampedArray]",ce="[object Uint16Array]",ie="[object Uint32Array]",pe=/[\\^$.*+?()[\]{}|]/g,he=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,_e={};_e[U]=_e[V]=_e[Q]=_e[ne]=_e[ve]=_e[de]=_e[X]=_e[ce]=_e[ie]=!0,_e[s]=_e[c]=_e[J]=_e[d]=_e[te]=_e[u]=_e[p]=_e[f]=_e[m]=_e[_]=_e[T]=_e[R]=_e[I]=_e[H]=_e[K]=!1;var Be=typeof global=="object"&&global&&global.Object===Object&&global,Je=typeof self=="object"&&self&&self.Object===Object&&self,ze=Be||Je||Function("return this")(),Fe=typeof e=="object"&&e&&!e.nodeType&&e,xe=Fe&&typeof t=="object"&&t&&!t.nodeType&&t,it=xe&&xe.exports===Fe,ut=it&&Be.process,Oe=function(){try{var O=xe&&xe.require&&xe.require("util").types;return O||ut&&ut.binding&&ut.binding("util")}catch{}}(),me=Oe&&Oe.isTypedArray;function Ae(O,B,Y){switch(Y.length){case 0:return O.call(B);case 1:return O.call(B,Y[0]);case 2:return O.call(B,Y[0],Y[1]);case 3:return O.call(B,Y[0],Y[1],Y[2])}return O.apply(B,Y)}function Me(O,B){for(var Y=-1,Ee=Array(O);++Y<O;)Ee[Y]=B(Y);return Ee}function ir(O){return function(B){return O(B)}}function at(O,B){return O?.[B]}function re(O,B){return function(Y){return O(B(Y))}}var er=Array.prototype,or=Function.prototype,ht=Object.prototype,rt=ze["__core-js_shared__"],Nt=or.toString,lt=ht.hasOwnProperty,$t=function(){var O=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||"");return O?"Symbol(src)_1."+O:""}(),Pt=ht.toString,M=Nt.call(Object),N=RegExp("^"+Nt.call(lt).replace(pe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=it?ze.Buffer:void 0,q=ze.Symbol,F=ze.Uint8Array,y=P?P.allocUnsafe:void 0,b=re(Object.getPrototypeOf,Object),L=Object.create,G=ht.propertyIsEnumerable,ue=er.splice,fe=q?q.toStringTag:void 0,Re=function(){try{var O=xs(Object,"defineProperty");return O({},"",{}),O}catch{}}(),ye=P?P.isBuffer:void 0,He=Math.max,le=Date.now,qe=xs(ze,"Map"),kt=xs(Object,"create"),De=function(){function O(){}return function(B){if(!wn(B))return{};if(L)return L(B);O.prototype=B;var Y=new O;return O.prototype=void 0,Y}}();function Ut(O){var B=-1,Y=O==null?0:O.length;for(this.clear();++B<Y;){var Ee=O[B];this.set(Ee[0],Ee[1])}}function Vr(){this.__data__=kt?kt(null):{},this.size=0}function Gr(O){var B=this.has(O)&&delete this.__data__[O];return this.size-=B?1:0,B}function Wr(O){var B=this.__data__;if(kt){var Y=B[O];return Y===n?void 0:Y}return lt.call(B,O)?B[O]:void 0}function S(O){var B=this.__data__;return kt?B[O]!==void 0:lt.call(B,O)}function Z(O,B){var Y=this.__data__;return this.size+=this.has(O)?0:1,Y[O]=kt&&B===void 0?n:B,this}Ut.prototype.clear=Vr,Ut.prototype.delete=Gr,Ut.prototype.get=Wr,Ut.prototype.has=S,Ut.prototype.set=Z;function ge(O){var B=-1,Y=O==null?0:O.length;for(this.clear();++B<Y;){var Ee=O[B];this.set(Ee[0],Ee[1])}}function Ve(){this.__data__=[],this.size=0}function Qe(O){var B=this.__data__,Y=se(B,O);if(Y<0)return!1;var Ee=B.length-1;return Y==Ee?B.pop():ue.call(B,Y,1),--this.size,!0}function _t(O){var B=this.__data__,Y=se(B,O);return Y<0?void 0:B[Y][1]}function lr(O){return se(this.__data__,O)>-1}function En(O,B){var Y=this.__data__,Ee=se(Y,O);return Ee<0?(++this.size,Y.push([O,B])):Y[Ee][1]=B,this}ge.prototype.clear=Ve,ge.prototype.delete=Qe,ge.prototype.get=_t,ge.prototype.has=lr,ge.prototype.set=En;function yr(O){var B=-1,Y=O==null?0:O.length;for(this.clear();++B<Y;){var Ee=O[B];this.set(Ee[0],Ee[1])}}function bn(){this.size=0,this.__data__={hash:new Ut,map:new(qe||ge),string:new Ut}}function Cn(O){var B=lo(this,O).delete(O);return this.size-=B?1:0,B}function Tn(O){return lo(this,O).get(O)}function hr(O){return lo(this,O).has(O)}function Sn(O,B){var Y=lo(this,O),Ee=Y.size;return Y.set(O,B),this.size+=Y.size==Ee?0:1,this}yr.prototype.clear=bn,yr.prototype.delete=Cn,yr.prototype.get=Tn,yr.prototype.has=hr,yr.prototype.set=Sn;function Er(O){var B=this.__data__=new ge(O);this.size=B.size}function Rn(){this.__data__=new ge,this.size=0}function h(O){var B=this.__data__,Y=B.delete(O);return this.size=B.size,Y}function v(O){return this.__data__.get(O)}function C(O){return this.__data__.has(O)}function D(O,B){var Y=this.__data__;if(Y instanceof ge){var Ee=Y.__data__;if(!qe||Ee.length<r-1)return Ee.push([O,B]),this.size=++Y.size,this;Y=this.__data__=new yr(Ee)}return Y.set(O,B),this.size=Y.size,this}Er.prototype.clear=Rn,Er.prototype.delete=h,Er.prototype.get=v,Er.prototype.has=C,Er.prototype.set=D;function k(O,B){var Y=Ms(O),Ee=!Y&&ks(O),tt=!Y&&!Ee&&bl(O),gt=!Y&&!Ee&&!tt&&Tl(O),yt=Y||Ee||tt||gt,Ze=yt?Me(O.length,String):[],Et=Ze.length;for(var br in O)(B||lt.call(O,br))&&!(yt&&(br=="length"||tt&&(br=="offset"||br=="parent")||gt&&(br=="buffer"||br=="byteLength"||br=="byteOffset")||yl(br,Et)))&&Ze.push(br);return Ze}function $(O,B,Y){(Y!==void 0&&!po(O[B],Y)||Y===void 0&&!(B in O))&&oe(O,B,Y)}function W(O,B,Y){var Ee=O[B];(!(lt.call(O,B)&&po(Ee,Y))||Y===void 0&&!(B in O))&&oe(O,B,Y)}function se(O,B){for(var Y=O.length;Y--;)if(po(O[Y][0],B))return Y;return-1}function oe(O,B,Y){B=="__proto__"&&Re?Re(O,B,{configurable:!0,enumerable:!0,value:Y,writable:!0}):O[B]=Y}var et=Am();function Ye(O){return O==null?O===void 0?z:E:fe&&fe in Object(O)?xm(O):jm(O)}function Ge(O){return _i(O)&&Ye(O)==s}function je(O){if(!wn(O)||qm(O))return!1;var B=Ls(O)?N:he;return B.test(Um(O))}function dt(O){return _i(O)&&Cl(O.length)&&!!_e[Ye(O)]}function bm(O){if(!wn(O))return Lm(O);var B=El(O),Y=[];for(var Ee in O)Ee=="constructor"&&(B||!lt.call(O,Ee))||Y.push(Ee);return Y}function _l(O,B,Y,Ee,tt){O!==B&&et(B,function(gt,yt){if(tt||(tt=new Er),wn(gt))Cm(O,B,yt,Y,_l,Ee,tt);else{var Ze=Ee?Ee(Ns(O,yt),gt,yt+"",O,B,tt):void 0;Ze===void 0&&(Ze=gt),$(O,yt,Ze)}},Sl)}function Cm(O,B,Y,Ee,tt,gt,yt){var Ze=Ns(O,Y),Et=Ns(B,Y),br=yt.get(Et);if(br){$(O,Y,br);return}var gr=gt?gt(Ze,Et,Y+"",O,B,yt):void 0,yi=gr===void 0;if(yi){var js=Ms(Et),Fs=!js&&bl(Et),wl=!js&&!Fs&&Tl(Et);gr=Et,js||Fs||wl?Ms(Ze)?gr=Ze:Bm(Ze)?gr=Om(Ze):Fs?(yi=!1,gr=Rm(Et,!0)):wl?(yi=!1,gr=Pm(Et,!0)):gr=[]:Vm(Et)||ks(Et)?(gr=Ze,ks(Ze)?gr=Gm(Ze):(!wn(Ze)||Ls(Ze))&&(gr=Nm(Et))):yi=!1}yi&&(yt.set(Et,gr),tt(gr,Et,Ee,gt,yt),yt.delete(Et)),$(O,Y,gr)}function Tm(O,B){return Hm(Fm(O,B,Rl),O+"")}var Sm=Re?function(O,B){return Re(O,"toString",{configurable:!0,enumerable:!1,value:Km(B),writable:!0})}:Rl;function Rm(O,B){if(B)return O.slice();var Y=O.length,Ee=y?y(Y):new O.constructor(Y);return O.copy(Ee),Ee}function wm(O){var B=new O.constructor(O.byteLength);return new F(B).set(new F(O)),B}function Pm(O,B){var Y=B?wm(O.buffer):O.buffer;return new O.constructor(Y,O.byteOffset,O.length)}function Om(O,B){var Y=-1,Ee=O.length;for(B||(B=Array(Ee));++Y<Ee;)B[Y]=O[Y];return B}function Im(O,B,Y,Ee){var tt=!Y;Y||(Y={});for(var gt=-1,yt=B.length;++gt<yt;){var Ze=B[gt],Et=Ee?Ee(Y[Ze],O[Ze],Ze,Y,O):void 0;Et===void 0&&(Et=O[Ze]),tt?oe(Y,Ze,Et):W(Y,Ze,Et)}return Y}function Dm(O){return Tm(function(B,Y){var Ee=-1,tt=Y.length,gt=tt>1?Y[tt-1]:void 0,yt=tt>2?Y[2]:void 0;for(gt=O.length>3&&typeof gt=="function"?(tt--,gt):void 0,yt&&km(Y[0],Y[1],yt)&&(gt=tt<3?void 0:gt,tt=1),B=Object(B);++Ee<tt;){var Ze=Y[Ee];Ze&&O(B,Ze,Ee,gt)}return B})}function Am(O){return function(B,Y,Ee){for(var tt=-1,gt=Object(B),yt=Ee(B),Ze=yt.length;Ze--;){var Et=yt[O?Ze:++tt];if(Y(gt[Et],Et,gt)===!1)break}return B}}function lo(O,B){var Y=O.__data__;return Mm(B)?Y[typeof B=="string"?"string":"hash"]:Y.map}function xs(O,B){var Y=at(O,B);return je(Y)?Y:void 0}function xm(O){var B=lt.call(O,fe),Y=O[fe];try{O[fe]=void 0;var Ee=!0}catch{}var tt=Pt.call(O);return Ee&&(B?O[fe]=Y:delete O[fe]),tt}function Nm(O){return typeof O.constructor=="function"&&!El(O)?De(b(O)):{}}function yl(O,B){var Y=typeof O;return B=B??i,!!B&&(Y=="number"||Y!="symbol"&&be.test(O))&&O>-1&&O%1==0&&O<B}function km(O,B,Y){if(!wn(Y))return!1;var Ee=typeof B;return(Ee=="number"?qs(Y)&&yl(B,Y.length):Ee=="string"&&B in Y)?po(Y[B],O):!1}function Mm(O){var B=typeof O;return B=="string"||B=="number"||B=="symbol"||B=="boolean"?O!=="__proto__":O===null}function qm(O){return!!$t&&$t in O}function El(O){var B=O&&O.constructor,Y=typeof B=="function"&&B.prototype||ht;return O===Y}function Lm(O){var B=[];if(O!=null)for(var Y in Object(O))B.push(Y);return B}function jm(O){return Pt.call(O)}function Fm(O,B,Y){return B=He(B===void 0?O.length-1:B,0),function(){for(var Ee=arguments,tt=-1,gt=He(Ee.length-B,0),yt=Array(gt);++tt<gt;)yt[tt]=Ee[B+tt];tt=-1;for(var Ze=Array(B+1);++tt<B;)Ze[tt]=Ee[tt];return Ze[B]=Y(yt),Ae(O,this,Ze)}}function Ns(O,B){if(!(B==="constructor"&&typeof O[B]=="function")&&B!="__proto__")return O[B]}var Hm=$m(Sm);function $m(O){var B=0,Y=0;return function(){var Ee=le(),tt=a-(Ee-Y);if(Y=Ee,tt>0){if(++B>=o)return arguments[0]}else B=0;return O.apply(void 0,arguments)}}function Um(O){if(O!=null){try{return Nt.call(O)}catch{}try{return O+""}catch{}}return""}function po(O,B){return O===B||O!==O&&B!==B}var ks=Ge(function(){return arguments}())?Ge:function(O){return _i(O)&&lt.call(O,"callee")&&!G.call(O,"callee")},Ms=Array.isArray;function qs(O){return O!=null&&Cl(O.length)&&!Ls(O)}function Bm(O){return _i(O)&&qs(O)}var bl=ye||zm;function Ls(O){if(!wn(O))return!1;var B=Ye(O);return B==f||B==g||B==l||B==w}function Cl(O){return typeof O=="number"&&O>-1&&O%1==0&&O<=i}function wn(O){var B=typeof O;return O!=null&&(B=="object"||B=="function")}function _i(O){return O!=null&&typeof O=="object"}function Vm(O){if(!_i(O)||Ye(O)!=T)return!1;var B=b(O);if(B===null)return!0;var Y=lt.call(B,"constructor")&&B.constructor;return typeof Y=="function"&&Y instanceof Y&&Nt.call(Y)==M}var Tl=me?ir(me):dt;function Gm(O){return Im(O,Sl(O))}function Sl(O){return qs(O)?k(O,!0):bm(O)}var Wm=Dm(function(O,B,Y){_l(O,B,Y)});function Km(O){return function(){return O}}function Rl(O){return O}function zm(){return!1}t.exports=Wm}),P_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var t=bt(),r=Pr(),n=class{constructor(o,a){this._exporter=o,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let i=r.getEnv();this._maxExportBatchSize=typeof a?.maxExportBatchSize=="number"?a.maxExportBatchSize:i.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof a?.maxQueueSize=="number"?a.maxQueueSize:i.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof a?.scheduledDelayMillis=="number"?a.scheduledDelayMillis:i.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof a?.exportTimeoutMillis=="number"?a.exportTimeoutMillis:i.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(o){}onEnd(o){this._isShutdown||this._addToBuffer(o)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((o,a)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(o).catch(i=>{a(i)})}),this._shuttingDownPromise)}_addToBuffer(o){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(o),this._maybeStartTimer())}_flushAll(){return new Promise((o,a)=>{let i=[],s=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let c=0,l=s;c<l;c++)i.push(this._flushOneBatch());Promise.all(i).then(()=>{o()}).catch(a)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((o,a)=>{let i=setTimeout(()=>{a(new Error("Timeout"))},this._exportTimeoutMillis);t.context.with(r.suppressTracing(t.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),s=>{var c;clearTimeout(i),s.code===r.ExportResultCode.SUCCESS?o():a((c=s.error)!==null&&c!==void 0?c:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(o=>{r.globalErrorHandler(o)})},this._scheduledDelayMillis),r.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};e.BatchSpanProcessorBase=n}),O_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var t=P_(),r=class extends t.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=r}),I_=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(O_(),e)}),id=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(I_(),e)}),D_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var t=bt(),r=Pr(),n=Ks(),o=od(),a=ed(),i=R_(),s=nd(),c=w_(),l=id(),d;(function(p){p[p.resolved=0]="resolved",p[p.timeout=1]="timeout",p[p.error=2]="error",p[p.unresolved=3]="unresolved"})(d=e.ForceFlushState||(e.ForceFlushState={}));var u=class{constructor(p={}){var f;this._registeredSpanProcessors=[],this._tracers=new Map;let g=c({},a.DEFAULT_CONFIG,p);this.resource=(f=g.resource)!==null&&f!==void 0?f:n.Resource.empty(),this.resource=n.Resource.default().merge(this.resource),this._config=Object.assign({},g,{resource:this.resource});let m=this._buildExporterFromEnv();if(m!==void 0){let _=new l.BatchSpanProcessor(m);this.activeSpanProcessor=_}else this.activeSpanProcessor=new s.NoopSpanProcessor}getTracer(p,f){let g=`${p}@${f||""}`;return this._tracers.has(g)||this._tracers.set(g,new o.Tracer({name:p,version:f},this._config,this)),this._tracers.get(g)}addSpanProcessor(p){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(f=>t.diag.error("Error while trying to shutdown current span processor",f)),this._registeredSpanProcessors.push(p),this.activeSpanProcessor=new i.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(p={}){t.trace.setGlobalTracerProvider(this),p.propagator===void 0&&(p.propagator=this._buildPropagatorFromEnv()),p.contextManager&&t.context.setGlobalContextManager(p.contextManager),p.propagator&&t.propagation.setGlobalPropagator(p.propagator)}forceFlush(){let p=this._config.forceFlushTimeoutMillis,f=this._registeredSpanProcessors.map(g=>new Promise(m=>{let _,E=setTimeout(()=>{m(new Error(`Span processor did not completed within timeout period of ${p} ms`)),_=d.timeout},p);g.forceFlush().then(()=>{clearTimeout(E),_!==d.timeout&&(_=d.resolved,m(_))}).catch(T=>{clearTimeout(E),_=d.error,m(T)})}));return new Promise((g,m)=>{Promise.all(f).then(_=>{let E=_.filter(T=>T!==d.resolved);E.length>0?m(E):g()}).catch(_=>m([_]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(p){var f;return(f=u._registeredPropagators.get(p))===null||f===void 0?void 0:f()}_getSpanExporter(p){var f;return(f=u._registeredExporters.get(p))===null||f===void 0?void 0:f()}_buildPropagatorFromEnv(){let p=Array.from(new Set(r.getEnv().OTEL_PROPAGATORS)),f=p.map(g=>{let m=this._getPropagator(g);return m||t.diag.warn(`Propagator "${g}" requested through environment variable is unavailable.`),m}).reduce((g,m)=>(m&&g.push(m),g),[]);if(f.length!==0)return p.length===1?f[0]:new r.CompositePropagator({propagators:f})}_buildExporterFromEnv(){let p=r.getEnv().OTEL_TRACES_EXPORTER;if(p==="none")return;let f=this._getSpanExporter(p);return f||t.diag.error(`Exporter "${p}" requested through environment variable is unavailable.`),f}};e.BasicTracerProvider=u,u._registeredPropagators=new Map([["tracecontext",()=>new r.HttpTraceContextPropagator],["baggage",()=>new r.HttpBaggagePropagator]]),u._registeredExporters=new Map}),A_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var t=Pr(),r=class{export(n,o){return this._sendSpans(n,o)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(n){return{traceId:n.spanContext().traceId,parentId:n.parentSpanId,name:n.name,id:n.spanContext().spanId,kind:n.kind,timestamp:t.hrTimeToMicroseconds(n.startTime),duration:t.hrTimeToMicroseconds(n.duration),attributes:n.attributes,status:n.status,events:n.events}}_sendSpans(n,o){for(let a of n)console.log(this._exportInfo(a));if(o)return o({code:t.ExportResultCode.SUCCESS})}};e.ConsoleSpanExporter=r}),x_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var t=Pr(),r=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(n,o){if(this._stopped)return o({code:t.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...n),setTimeout(()=>o({code:t.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};e.InMemorySpanExporter=r}),N_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),k_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var t=bt(),r=Pr(),n=class{constructor(o){this._exporter=o,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(o){}onEnd(o){this._isShutdown||t.context.with(r.suppressTracing(t.context.active()),()=>{this._exporter.export([o],a=>{var i;a.code!==r.ExportResultCode.SUCCESS&&r.globalErrorHandler((i=a.error)!==null&&i!==void 0?i:new Error(`SimpleSpanProcessor: span export failed (status ${a})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((o,a)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(o).catch(i=>{a(i)})}),this._shuttingDownPromise)}};e.SimpleSpanProcessor=n}),M_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),q_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),L_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),j_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),od=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(m_(),e),r(D_(),e),r(id(),e),r(A_(),e),r(x_(),e),r(N_(),e),r(k_(),e),r(M_(),e),r(nd(),e),r(Zl(),e),r(q_(),e),r(L_(),e),r(j_(),e)}),F_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var t=Mt();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var r=!1,n=function(a){if(r)return a;try{var i=od(),s=bt(),c=new i.BasicTracerProvider,l=c.getTracer("applicationinsights tracer"),d=a.setTracer;a.setTracer=function(u){var p=u.startSpan;u.startSpan=function(f,g,m){var _=p.call(this,f,g,m),E=_.end;return _.end=function(){var T=E.apply(this,arguments);return t.channel.publish("azure-coretracing",_),T},_},u[e.AzureMonitorSymbol]=!0,d.call(this,u)},s.trace.getSpan(s.context.active()),a.setTracer(l),r=!0}catch{}return a};e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:n};function o(){t.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}e.enable=o}),H_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var t=Mt(),r=function(o){var a=o.prototype._emit;return o.prototype._emit=function(i,s){var c=a.apply(this,arguments);if(!s){var l=c;l||(l=a.call(this,i,!0)),t.channel.publish("bunyan",{level:i.level,result:l})}return c},o};e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("bunyan",e.bunyan)}e.enable=n}),$_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var t=Mt(),r=require("stream"),n=function(a){var i=new r.Writable,s=new r.Writable;i.write=function(g){if(!g)return!0;var m=g.toString();return t.channel.publish("console",{message:m}),!0},s.write=function(g){if(!g)return!0;var m=g.toString();return t.channel.publish("console",{message:m,stderr:!0}),!0};for(var c=new a.Console(i,s),l=["log","info","warn","error","dir","time","timeEnd","trace","assert"],d=function(g){var m=a[g];m&&(a[g]=function(){if(c[g])try{c[g].apply(c,arguments)}catch{}return m.apply(a,arguments)})},u=0,p=l;u<p.length;u++){var f=p[u];d(f)}return a};e.console={versionSpecifier:">= 4.0.0",patch:n};function o(){t.channel.registerMonkeyPatch("console",e.console),require("console")}e.enable=o}),U_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var t=Mt(),r=function(o){var a=o.Server.prototype.connect;return o.Server.prototype.connect=function(){var i=a.apply(this,arguments),s=this.s.pool.write;this.s.pool.write=function(){var l=typeof arguments[1]=="function"?1:2;return typeof arguments[l]=="function"&&(arguments[l]=t.channel.bindToContext(arguments[l])),s.apply(this,arguments)};var c=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=t.channel.bindToContext(arguments[1])),c.apply(this,arguments)},i},o};e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}e.enable=n}),B_=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(c){for(var l,d=1,u=arguments.length;d<u;d++){l=arguments[d];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[p]=l[p])}return c},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var r=Mt(),n=function(c){var l=c.instrument({operationIdGenerator:{next:function(){return r.channel.bindToContext(function(u){return u()})}}}),d={};return l.on("started",function(u){d[u.requestId]||(d[u.requestId]=t(t({},u),{time:new Date}))}),l.on("succeeded",function(u){var p=d[u.requestId];p&&delete d[u.requestId],typeof u.operationId=="function"?u.operationId(function(){return r.channel.publish("mongodb",{startedData:p,event:u,succeeded:!0})}):r.channel.publish("mongodb",{startedData:p,event:u,succeeded:!0})}),l.on("failed",function(u){var p=d[u.requestId];p&&delete d[u.requestId],typeof u.operationId=="function"?u.operationId(function(){return r.channel.publish("mongodb",{startedData:p,event:u,succeeded:!1})}):r.channel.publish("mongodb",{startedData:p,event:u,succeeded:!1})}),c},o=function(c){var l=c.instrument(),d={},u={};return l.on("started",function(p){d[p.requestId]||(u[p.requestId]=r.channel.bindToContext(function(f){return f()}),d[p.requestId]=t(t({},p),{time:new Date}))}),l.on("succeeded",function(p){var f=d[p.requestId];f&&delete d[p.requestId],typeof p=="object"&&typeof u[p.requestId]=="function"&&(u[p.requestId](function(){return r.channel.publish("mongodb",{startedData:f,event:p,succeeded:!0})}),delete u[p.requestId])}),l.on("failed",function(p){var f=d[p.requestId];f&&delete d[p.requestId],typeof p=="object"&&typeof u[p.requestId]=="function"&&(u[p.requestId](function(){return r.channel.publish("mongodb",{startedData:f,event:p,succeeded:!1})}),delete u[p.requestId])}),c},a=function(c){var l=c.Server.prototype.connect;return c.Server.prototype.connect=function(){var d=l.apply(this,arguments),u=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var f=typeof arguments[1]=="function"?1:2;return typeof arguments[f]=="function"&&(arguments[f]=r.channel.bindToContext(arguments[f])),u.apply(this,arguments)};var p=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=r.channel.bindToContext(arguments[1])),p.apply(this,arguments)},d},c},i=function(c){a(c);var l=c.instrument(),d={},u={};return l.on("started",function(p){d[p.requestId]||(u[p.requestId]=r.channel.bindToContext(function(f){return f()}),d[p.requestId]=p)}),l.on("succeeded",function(p){var f=d[p.requestId];f&&delete d[p.requestId],typeof p=="object"&&typeof u[p.requestId]=="function"&&(u[p.requestId](function(){return r.channel.publish("mongodb",{startedData:f,event:p,succeeded:!0})}),delete u[p.requestId])}),l.on("failed",function(p){var f=d[p.requestId];f&&delete d[p.requestId],typeof p=="object"&&typeof u[p.requestId]=="function"&&(u[p.requestId](function(){return r.channel.publish("mongodb",{startedData:f,event:p,succeeded:!1})}),delete u[p.requestId])}),c};e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:n},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:o},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:i};function s(){r.channel.registerMonkeyPatch("mongodb",e.mongo2),r.channel.registerMonkeyPatch("mongodb",e.mongo3),r.channel.registerMonkeyPatch("mongodb",e.mongo330)}e.enable=s}),V_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var t=Mt(),r=require("path"),n=function(a,i){var s=function(f,g){return function(m,_){var E=f[m];E&&(f[m]=function(){for(var T=arguments.length-1,w=arguments.length-1;w>=0;--w)if(typeof arguments[w]=="function"){T=w;break}else if(typeof arguments[w]<"u")break;var R=arguments[T],I={result:null,startTime:null,startDate:null};typeof R=="function"&&(_?(I.startTime=process.hrtime(),I.startDate=new Date,arguments[T]=t.channel.bindToContext(_(I,R))):arguments[T]=t.channel.bindToContext(R));var H=E.apply(this,arguments);return I.result=H,H})}},c=function(f,g){return s(f.prototype,g+".prototype")},l=["connect","changeUser","ping","statistics","end"],d=require(r.dirname(i)+"/lib/Connection");l.forEach(function(f){return c(d,"Connection")(f)}),s(d,"Connection")("createQuery",function(f,g){return function(m){var _=process.hrtime(f.startTime),E=_[0]*1e3+_[1]/1e6|0;t.channel.publish("mysql",{query:f.result,callbackArgs:arguments,err:m,duration:E,time:f.startDate}),g.apply(this,arguments)}});var u=["_enqueueCallback"],p=require(r.dirname(i)+"/lib/Pool");return u.forEach(function(f){return c(p,"Pool")(f)}),a};e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:n};function o(){t.channel.registerMonkeyPatch("mysql",e.mysql)}e.enable=o}),G_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var t=Mt();function r(o){var a=o.prototype.connect;return o.prototype.connect=function(i){return i&&(arguments[0]=t.channel.bindToContext(i)),a.apply(this,arguments)},o}e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}e.enable=n}),W_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var t=Mt(),r=require("events");function n(i,s){var c=i.Client.prototype.query,l="__diagnosticOriginalFunc";return i.Client.prototype.query=function(d,u,p){var f={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},g=process.hrtime(),m;function _(E){E&&E[l]&&(E=E[l]);var T=t.channel.bindToContext(function(w,R){var I=process.hrtime(g);if(f.result=R&&{rowCount:R.rowCount,command:R.command},f.error=w,f.duration=Math.ceil(I[0]*1e3+I[1]/1e6),t.channel.publish("postgres",f),w){if(E)return E.apply(this,arguments);m&&m instanceof r.EventEmitter&&m.emit("error",w)}else E&&E.apply(this,arguments)});try{return Object.defineProperty(T,l,{value:E}),T}catch{return E}}try{typeof d=="string"?u instanceof Array?(f.query.preparable={text:d,args:u},p=_(p)):(f.query.text=d,p?p=_(p):u=_(u)):(typeof d.name=="string"?f.query.plan=d.name:d.values instanceof Array?f.query.preparable={text:d.text,args:d.values}:f.query.text=d.text,p?p=_(p):u?u=_(u):d.callback=_(d.callback))}catch{return c.apply(this,arguments)}return arguments[0]=d,arguments[1]=u,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,m=c.apply(this,arguments),m},i}function o(i,s){var c=i.Client.prototype.query,l="__diagnosticOriginalFunc";return i.Client.prototype.query=function(d,u,p){var f=this,g=!!p,m={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},_=process.hrtime(),E;function T(w){w&&w[l]&&(w=w[l]);var R=t.channel.bindToContext(function(I,H){var z=process.hrtime(_);if(m.result=H&&{rowCount:H.rowCount,command:H.command},m.error=I,m.duration=Math.ceil(z[0]*1e3+z[1]/1e6),t.channel.publish("postgres",m),I){if(w)return w.apply(this,arguments);E&&E instanceof r.EventEmitter&&E.emit("error",I)}else w&&w.apply(this,arguments)});try{return Object.defineProperty(R,l,{value:w}),R}catch{return w}}try{typeof d=="string"?u instanceof Array?(m.query.preparable={text:d,args:u},g=typeof p=="function",p=g?T(p):p):(m.query.text=d,p?(g=typeof p=="function",p=g?T(p):p):(g=typeof u=="function",u=g?T(u):u)):(typeof d.name=="string"?m.query.plan=d.name:d.values instanceof Array?m.query.preparable={text:d.text,args:d.values}:m.query.text=d.text,p?(g=typeof p=="function",p=T(p)):u?(g=typeof u=="function",u=g?T(u):u):(g=typeof d.callback=="function",d.callback=g?T(d.callback):d.callback))}catch{return c.apply(this,arguments)}return arguments[0]=d,arguments[1]=u,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,E=c.apply(this,arguments),g?E:E.then(function(w){return T()(void 0,w),new f._Promise(function(R,I){R(w)})}).catch(function(w){return T()(w,void 0),new f._Promise(function(R,I){I(w)})})},i}e.postgres6={versionSpecifier:"6.*",patch:n},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:o};function a(){t.channel.registerMonkeyPatch("pg",e.postgres6),t.channel.registerMonkeyPatch("pg",e.postgres7)}e.enable=a}),K_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var t=Mt(),r=function(o){var a=o.RedisClient.prototype.internal_send_command;return o.RedisClient.prototype.internal_send_command=function(i){if(i){var s=i.callback;if(!s||!s.pubsubBound){var c=this.address,l=process.hrtime(),d=new Date;i.callback=t.channel.bindToContext(function(u,p){var f=process.hrtime(l),g=f[0]*1e3+f[1]/1e6|0;t.channel.publish("redis",{duration:g,address:c,commandObj:i,err:u,result:p,time:d}),typeof s=="function"&&s.apply(this,arguments)}),i.callback.pubsubBound=!0}}return a.call(this,i)},o};e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:r};function n(){t.channel.registerMonkeyPatch("redis",e.redis)}e.enable=n}),z_=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(a){for(var i,s=1,c=arguments.length;s<c;s++){i=arguments[s];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(a[l]=i[l])}return a},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var r=Mt(),n=function(a){var i=a.Connection.prototype.makeRequest;return a.Connection.prototype.makeRequest=function(){function s(l){var d=process.hrtime(),u={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return r.channel.bindToContext(function(p,f,g){var m=process.hrtime(d);u=t(t({},u),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!p&&{rowCount:f,rows:g},query:{text:this.parametersByName.statement.value},error:p,duration:Math.ceil(m[0]*1e3+m[1]/1e6)}),r.channel.publish("tedious",u),l.call(this,p,f,g)})}var c=arguments[0];arguments[0].callback=s(c.callback),i.apply(this,arguments)},a};e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:n};function o(){r.channel.registerMonkeyPatch("tedious",e.tedious)}e.enable=o}),X_=A(e=>{"use strict";var t=e&&e.__extends||function(){var s=function(c,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(d[p]=u[p])},s(c,l)};return function(c,l){s(c,l);function d(){this.constructor=c}c.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}}(),r=e&&e.__rest||function(s,c){var l={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&c.indexOf(d)<0&&(l[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,d=Object.getOwnPropertySymbols(s);u<d.length;u++)c.indexOf(d[u])<0&&Object.prototype.propertyIsEnumerable.call(s,d[u])&&(l[d[u]]=s[d[u]]);return l};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var n=Mt(),o=function(s){var c=s.Logger.prototype.log,l,d=function(u,p,f){var g;return l===s.config.npm.levels?g="npm":l===s.config.syslog.levels?g="syslog":g="unknown",n.channel.publish("winston",{level:u,message:p,meta:f,levelKind:g}),p};return s.Logger.prototype.log=function(){return l=this.levels,!this.filters||this.filters.length===0?this.filters=[d]:this.filters[this.filters.length-1]!==d&&(this.filters=this.filters.filter(function(u){return u!==d}),this.filters.push(d)),c.apply(this,arguments)},s},a=function(s){var c=function(f,g){var m;return f.config.npm.levels[g]!=null?m="npm":f.config.syslog.levels[g]!=null?m="syslog":m="unknown",m},l=function(f){t(g,f);function g(m,_){var E=f.call(this,_)||this;return E.winston=m,E}return g.prototype.log=function(m,_){var E=m.message,T=m.level,w=m.meta,R=r(m,["message","level","meta"]);T=typeof Symbol.for=="function"?m[Symbol.for("level")]:T,E=m instanceof Error?m:E;var I=c(this.winston,T);w=w||{};for(var H in R)R.hasOwnProperty(H)&&(w[H]=R[H]);n.channel.publish("winston",{message:E,level:T,levelKind:I,meta:w}),_()},g}(s.Transport);function d(){var f=arguments[0].levels||s.config.npm.levels,g;for(var m in f)f.hasOwnProperty(m)&&(g=g===void 0||f[m]>f[g]?m:g);this.add(new l(s,{level:g}))}var u=s.createLogger;s.createLogger=function(){var f=arguments[0].levels||s.config.npm.levels,g;for(var m in f)f.hasOwnProperty(m)&&(g=g===void 0||f[m]>f[g]?m:g);var _=u.apply(this,arguments);_.add(new l(s,{level:g}));var E=_.configure;return _.configure=function(){E.apply(this,arguments),d.apply(this,arguments)},_};var p=s.configure;return s.configure=function(){p.apply(this,arguments),d.apply(this,arguments)},s.add(new l(s)),s};e.winston3={versionSpecifier:"3.x",patch:a},e.winston2={versionSpecifier:"2.x",patch:o};function i(){n.channel.registerMonkeyPatch("winston",e.winston2),n.channel.registerMonkeyPatch("winston",e.winston3)}e.enable=i}),Y_=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var t=F_();e.azuresdk=t;var r=H_();e.bunyan=r;var n=$_();e.console=n;var o=U_();e.mongodbCore=o;var a=B_();e.mongodb=a;var i=V_();e.mysql=i;var s=G_();e.pgPool=s;var c=W_();e.pg=c;var l=K_();e.redis=l;var d=z_();e.tedious=d;var u=X_();e.winston=u;function p(){r.enable(),n.enable(),o.enable(),a.enable(),i.enable(),c.enable(),s.enable(),l.enable(),u.enable(),t.enable(),d.enable()}e.enable=p}),zs=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var t=Nl(),r=zt();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n="DiagnosticChannel";if(e.IsInitialized){o=Y_(),a=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",i=a.split(","),s={bunyan:o.bunyan,console:o.console,mongodb:o.mongodb,mongodbCore:o.mongodbCore,mysql:o.mysql,redis:o.redis,pg:o.pg,pgPool:o.pgPool,winston:o.winston,azuresdk:o.azuresdk};for(c in s)i.indexOf(c)===-1&&(s[c].enable(),r.info(n,"Subscribed to "+c+" events"));i.length>0&&r.info(n,"Some modules will not be patched",i)}else r.info(n,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var o,a,i,s,c;function l(d){if(e.IsInitialized){var u=Mt();u.channel.addContextPreservation(d),u.channel.spanContextPropagator=t.AsyncScopeManager}}e.registerContextPreservation=l}),wi=A((e,t)=>{"use strict";t.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),Cr=A((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(d){for(var u,p=1,f=arguments.length;p<f;p++){u=arguments[p];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(d[g]=u[g])}return d},r.apply(this,arguments)},n=require("http"),o=require("https"),a=require("url"),i=require("constants"),s=zt(),c=wi(),l=function(){function d(){}return d.getCookie=function(u,p){var f="";if(u&&u.length&&typeof p=="string")for(var g=u+"=",m=p.split(";"),_=0;_<m.length;_++){var p=m[_];if(p=d.trim(p),p&&p.indexOf(g)===0){f=p.substring(g.length,m[_].length);break}}return f},d.trim=function(u){return typeof u=="string"?u.replace(/^\s+|\s+$/g,""):""},d.int32ArrayToBase64=function(u){var p=function(E,T){return String.fromCharCode(E>>T&255)},f=function(E){return p(E,24)+p(E,16)+p(E,8)+p(E,0)},g=u.map(f).join(""),m=Buffer.from?Buffer.from(g,"binary"):new Buffer(g,"binary"),_=m.toString("base64");return _.substr(0,_.indexOf("="))},d.random32=function(){return 4294967296*Math.random()|0},d.randomu32=function(){return d.random32()+2147483648},d.w3cTraceId=function(){for(var u=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p="",f,g=0;g<4;g++)f=d.random32(),p+=u[f&15]+u[f>>4&15]+u[f>>8&15]+u[f>>12&15]+u[f>>16&15]+u[f>>20&15]+u[f>>24&15]+u[f>>28&15];var m=u[8+Math.random()*4|0];return p.substr(0,8)+p.substr(9,4)+"4"+p.substr(13,3)+m+p.substr(16,3)+p.substr(19,12)},d.w3cSpanId=function(){return d.w3cTraceId().substring(16)},d.isValidW3CId=function(u){return u.length===32&&u!=="00000000000000000000000000000000"},d.isArray=function(u){return Object.prototype.toString.call(u)==="[object Array]"},d.isError=function(u){return u instanceof Error},d.isPrimitive=function(u){var p=typeof u;return p==="string"||p==="number"||p==="boolean"},d.isDate=function(u){return Object.prototype.toString.call(u)==="[object Date]"},d.msToTimeSpan=function(u){(isNaN(u)||u<0)&&(u=0);var p=(u/1e3%60).toFixed(7).replace(/0{0,4}$/,""),f=""+Math.floor(u/(1e3*60))%60,g=""+Math.floor(u/(1e3*60*60))%24,m=Math.floor(u/(1e3*60*60*24));p=p.indexOf(".")<2?"0"+p:p,f=f.length<2?"0"+f:f,g=g.length<2?"0"+g:g;var _=m>0?m+".":"";return _+g+":"+f+":"+p},d.extractError=function(u){var p=u;return{message:u.message,code:p.code||p.id||""}},d.extractObject=function(u){return u instanceof Error?d.extractError(u):typeof u.toJSON=="function"?u.toJSON():u},d.validateStringMap=function(u){if(typeof u!="object"){s.info("Invalid properties dropped from payload");return}var p={};for(var f in u){var g="",m=u[f],_=typeof m;if(d.isPrimitive(m))g=m.toString();else if(m===null||_==="undefined")g="";else if(_==="function"){s.info("key: "+f+" was function; will not serialize");continue}else{var E=d.isArray(m)?m:d.extractObject(m);try{d.isPrimitive(E)?g=E:g=JSON.stringify(E)}catch(T){g=m.constructor.name.toString()+" (Error: "+T.message+")",s.info("key: "+f+", could not be serialized")}}p[f]=g.substring(0,d.MAX_PROPERTY_LENGTH)}return p},d.canIncludeCorrelationHeader=function(u,p){var f=u&&u.config&&u.config.correlationHeaderExcludedDomains;if(!f||f.length==0||!p)return!0;for(var g=0;g<f.length;g++){var m=new RegExp(f[g].replace(/\./g,".").replace(/\*/g,".*"));if(m.test(a.parse(p).hostname))return!1}return!0},d.getCorrelationContextTarget=function(u,p){var f=u.headers&&u.headers[c.requestContextHeader];if(f)for(var g=f.split(","),m=0;m<g.length;++m){var _=g[m].split("=");if(_.length==2&&_[0]==p)return _[1]}},d.makeRequest=function(u,p,f,g){p&&p.indexOf("//")===0&&(p="https:"+p);var m=a.parse(p),_=r(r({},f),{host:m.hostname,port:m.port,path:m.pathname}),E=void 0;if(m.protocol==="https:"&&(E=u.proxyHttpsUrl||void 0),m.protocol==="http:"&&(E=u.proxyHttpUrl||void 0),E){E.indexOf("//")===0&&(E="http:"+E);var T=a.parse(E);T.protocol==="https:"?(s.info("Proxies that use HTTPS are not supported"),E=void 0):_=r(r({},_),{host:T.hostname,port:T.port||"80",path:p,headers:r(r({},_.headers),{Host:m.hostname})})}var w=m.protocol==="https:"&&!E;return w&&u.httpsAgent!==void 0?_.agent=u.httpsAgent:!w&&u.httpAgent!==void 0?_.agent=u.httpAgent:w&&(_.agent=d.tlsRestrictedAgent),w?o.request(_,g):n.request(_,g)},d.safeIncludeCorrelationHeader=function(u,p,f){var g;if(typeof f=="string")g=f;else if(f instanceof Array)g=f.join(",");else if(f&&typeof f.toString=="function")try{g=f.toString()}catch(m){s.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",m,f)}g?d.addCorrelationIdHeaderFromString(u,p,g):p.setHeader(c.requestContextHeader,c.requestContextSourceKey+"="+u.config.correlationId)},d.dumpObj=function(u){var p=Object.prototype.toString.call(u),f="";return p==="[object Error]"?f="{ stack: '"+u.stack+"', message: '"+u.message+"', name: '"+u.name+"'":f=JSON.stringify(u),p+f},d.addCorrelationIdHeaderFromString=function(u,p,f){var g=f.split(","),m=c.requestContextSourceKey+"=",_=g.some(function(E){return E.substring(0,m.length)===m});_||p.setHeader(c.requestContextHeader,f+","+c.requestContextSourceKey+"="+u.config.correlationId)},d.MAX_PROPERTY_LENGTH=8192,d.tlsRestrictedAgent=new o.Agent({keepAlive:!0,maxSockets:25,secureOptions:i.SSL_OP_NO_SSLv2|i.SSL_OP_NO_SSLv3|i.SSL_OP_NO_TLSv1|i.SSL_OP_NO_TLSv1_1}),d}();t.exports=l}),Kn=A((e,t)=>{"use strict";var r=Cr(),n=zt(),o=function(){function a(){}return a.queryCorrelationId=function(i,s){var c=i.profileQueryEndpoint+"/api/profiles/"+i.instrumentationKey+"/appId";if(a.completedLookups.hasOwnProperty(c)){s(a.completedLookups[c]);return}else if(a.pendingLookups[c]){a.pendingLookups[c].push(s);return}a.pendingLookups[c]=[s];var l=function(){if(a.pendingLookups[c]){var d={method:"GET",disableAppInsightsAutoCollection:!0};n.info(a.TAG,d);var u=r.makeRequest(i,c,d,function(p){if(p.statusCode===200){var f="";p.setEncoding("utf-8"),p.on("data",function(g){f+=g}),p.on("end",function(){n.info(a.TAG,f);var g=a.correlationIdPrefix+f;a.completedLookups[c]=g,a.pendingLookups[c]&&a.pendingLookups[c].forEach(function(m){return m(g)}),delete a.pendingLookups[c]})}else p.statusCode>=400&&p.statusCode<500?(a.completedLookups[c]=void 0,delete a.pendingLookups[c]):setTimeout(l,i.correlationIdRetryIntervalMs)});u&&(u.on("error",function(p){n.warn(a.TAG,p)}),u.end())}};setTimeout(l,0)},a.cancelCorrelationIdQuery=function(i,s){var c=i.profileQueryEndpoint+"/api/profiles/"+i.instrumentationKey+"/appId",l=a.pendingLookups[c];l&&(a.pendingLookups[c]=l.filter(function(d){return d!=s}),a.pendingLookups[c].length==0&&delete a.pendingLookups[c])},a.generateRequestId=function(i){if(i){i=i[0]=="|"?i:"|"+i,i[i.length-1]!=="."&&(i+=".");var s=(a.currentRootId++).toString(16);return a.appendSuffix(i,s,"_")}else return a.generateRootId()},a.getRootId=function(i){var s=i.indexOf(".");s<0&&(s=i.length);var c=i[0]==="|"?1:0;return i.substring(c,s)},a.generateRootId=function(){return"|"+r.w3cTraceId()+"."},a.appendSuffix=function(i,s,c){if(i.length+s.length<a.requestIdMaxLength)return i+s+c;var l=a.requestIdMaxLength-9;if(i.length>l)for(;l>1;--l){var d=i[l-1];if(d==="."||d==="_")break}if(l<=1)return a.generateRootId();for(s=r.randomu32().toString(16);s.length<8;)s="0"+s;return i.substring(0,l)+s+"#"},a.TAG="CorrelationIdManager",a.correlationIdPrefix="cid-v1:",a.w3cEnabled=!0,a.pendingLookups={},a.completedLookups={},a.requestIdMaxLength=1024,a.currentRootId=r.randomu32(),a}();t.exports=o}),mo=A((e,t)=>{"use strict";var r=Cr(),n=Kn(),o=function(){function a(i,s){if(this.traceFlag=a.DEFAULT_TRACE_FLAG,this.version=a.DEFAULT_VERSION,i&&typeof i=="string")if(i.split(",").length>1)this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16);else{var c=i.trim().split("-"),l=c.length;l>=4?(this.version=c[0],this.traceId=c[1],this.spanId=c[2],this.traceFlag=c[3]):(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=a.DEFAULT_VERSION,this.traceId=r.w3cTraceId()),this.version==="00"&&l!==4&&(this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=a.DEFAULT_VERSION,this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=a.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=a.DEFAULT_TRACE_FLAG,this.traceId=r.w3cTraceId()),a.isValidTraceId(this.traceId)||(this.traceId=r.w3cTraceId()),a.isValidSpanId(this.spanId)||(this.spanId=r.w3cTraceId().substr(0,16),this.traceId=r.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(s){this.parentId=s.slice();var d=n.getRootId(s);a.isValidTraceId(d)||(this.legacyRootId=d,d=r.w3cTraceId()),s.indexOf("|")!==-1&&(s=s.substring(1+s.substring(0,s.length-1).lastIndexOf("."),s.length-1)),this.traceId=d,this.spanId=s}else this.traceId=r.w3cTraceId(),this.spanId=r.w3cTraceId().substr(0,16)}return a.isValidTraceId=function(i){return i.match(/^[0-9a-f]{32}$/)&&i!=="00000000000000000000000000000000"},a.isValidSpanId=function(i){return i.match(/^[0-9a-f]{16}$/)&&i!=="0000000000000000"},a.formatOpenTelemetryTraceFlags=function(i){var s="0"+i.toString(16);return s.substring(s.length-2)},a.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},a.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},a.prototype.updateSpanId=function(){this.spanId=r.w3cTraceId().substr(0,16)},a.DEFAULT_TRACE_FLAG="01",a.DEFAULT_VERSION="00",a}();t.exports=o}),sd=A((e,t)=>{"use strict";var r=function(){function n(o){this.fieldmap=[],o&&(this.fieldmap=this.parseHeader(o))}return n.prototype.toString=function(){var o=this.fieldmap;return!o||o.length==0?null:o.join(", ")},n.validateKeyChars=function(o){var a=o.split("@");if(a.length==2){var i=a[0].trim(),s=a[1].trim(),c=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),l=Boolean(s.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return c&&l}else if(a.length==1)return Boolean(o.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},n.prototype.parseHeader=function(o){var a=[],i={},s=o.split(",");if(s.length>32)return null;for(var c=0,l=s;c<l.length;c++){var d=l[c],u=d.trim();if(u.length!==0){var p=u.split("=");if(p.length!==2||!n.validateKeyChars(p[0])||i[p[0]])return null;i[p[0]]=!0,a.push(u)}}return a},n.strict=!0,n}();t.exports=r}),on=A((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),Q_=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.properties={},s.measurements={},s}return i}(n);t.exports=o}),ad=A((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),J_=A((e,t)=>{"use strict";var r=function(){function n(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return n}();t.exports=r}),Z_=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=ad(),o=function(a){r(i,a);function i(){return a.call(this)||this}return i}(n);t.exports=o}),cd=A((e,t)=>{"use strict";var r;(function(n){n[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation"})(r||(r={})),t.exports=r}),ey=A((e,t)=>{"use strict";var r=cd(),n=function(){function o(){this.kind=r.Measurement}return o}();t.exports=n}),ty=A((e,t)=>{"use strict";var r=function(){function n(){this.ver=1,this.sampleRate=100,this.tags={}}return n}();t.exports=r}),ud=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.properties={},s.measurements={},s}return i}(n);t.exports=o}),ry=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.exceptions=[],s.properties={},s.measurements={},s}return i}(n);t.exports=o}),ny=A((e,t)=>{"use strict";var r=function(){function n(){this.hasFullStack=!0,this.parsedStack=[]}return n}();t.exports=r}),iy=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.properties={},s}return i}(n);t.exports=o}),oy=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.metrics=[],s.properties={},s}return i}(n);t.exports=o}),sy=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=ud(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.properties={},s.measurements={},s}return i}(n);t.exports=o}),ay=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.success=!0,s.properties={},s.measurements={},s}return i}(n);t.exports=o}),cy=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var a=function(i,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||function(c,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(c[d]=l[d])},a(i,s)};return function(i,s){a(i,s);function c(){this.constructor=i}i.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),n=on(),o=function(a){r(i,a);function i(){var s=a.call(this)||this;return s.ver=2,s.properties={},s.measurements={},s}return i}(n);t.exports=o}),uy=A((e,t)=>{"use strict";var r;(function(n){n[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical"})(r||(r={})),t.exports=r}),ly=A((e,t)=>{"use strict";var r=function(){function n(){}return n}();t.exports=r}),ld=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=Q_(),e.Base=ad(),e.ContextTagKeys=J_(),e.Data=Z_(),e.DataPoint=ey(),e.DataPointType=cd(),e.Domain=on(),e.Envelope=ty(),e.EventData=ud(),e.ExceptionData=ry(),e.ExceptionDetails=ny(),e.MessageData=iy(),e.MetricData=oy(),e.PageViewData=sy(),e.RemoteDependencyData=ay(),e.RequestData=cy(),e.SeverityLevel=uy(),e.StackFrame=ly()}),dy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var t=ld(),r=function(){function o(){}return o.TYPE_HTTP="Http",o.TYPE_AI="Http (tracked component)",o}();e.RemoteDependencyDataConstants=r;function n(o){return"properties"in o||o instanceof t.EventData||o instanceof t.ExceptionData||o instanceof t.MessageData||o instanceof t.MetricData||o instanceof t.PageViewData||o instanceof t.RemoteDependencyData||o instanceof t.RequestData}e.domainSupportsProperties=n}),py=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),fy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),hy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),gy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),my=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),vy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),_y=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),yy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ey=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),by=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Cy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ty=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Sy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0;function t(o){switch(o){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}}e.telemetryTypeToBaseType=t;function r(o){switch(o){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}}e.baseTypeToTelemetryType=r,e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var n;(function(o){o[o.Event=0]="Event",o[o.Exception=1]="Exception",o[o.Trace=2]="Trace",o[o.Metric=3]="Metric",o[o.Request=4]="Request",o[o.Dependency=5]="Dependency",o[o.Availability=6]="Availability",o[o.PageView=7]="PageView"})(n=e.TelemetryType||(e.TelemetryType={}))}),Ry=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(py(),e),r(fy(),e),r(hy(),e),r(gy(),e),r(my(),e),r(vy(),e),r(_y(),e),r(yy(),e),r(Ey(),e),r(by(),e),r(Cy(),e),r(Ty(),e),r(Sy(),e)}),wy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Py=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Oy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Iy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Dy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ay=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),xy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ny=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),ky=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(wy(),e),r(Py(),e),r(Oy(),e),r(Iy(),e),r(Dy(),e),r(Ay(),e),r(xy(),e),r(Ny(),e)}),dr=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(dy(),e),r(ld(),e),r(Ry(),e),r(ky(),e)}),dd=A((e,t)=>{"use strict";var r=function(){function n(){}return n.prototype.getUrl=function(){return this.url},n.prototype.RequestParser=function(){this.startTime=+new Date},n.prototype._setStatus=function(o,a){var i=+new Date;this.duration=i-this.startTime,this.statusCode=o;var s=this.properties||{};if(a){if(typeof a=="string")s.error=a;else if(a instanceof Error)s.error=a.message;else if(typeof a=="object")for(var c in a)s[c]=a[c]&&a[c].toString&&a[c].toString()}this.properties=s},n.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},n}();t.exports=r}),pd=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var p=function(f,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,_){m.__proto__=_}||function(m,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(m[E]=_[E])},p(f,g)};return function(f,g){p(f,g);function m(){this.constructor=f}f.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}(),n=require("url"),o=dr(),a=Cr(),i=wi(),s=dd(),c=Kn(),l=sd(),d=mo(),u=function(p){r(f,p);function f(g,m){var _=p.call(this)||this;return g&&(_.method=g.method,_.url=_._getAbsoluteUrl(g),_.startTime=+new Date,_.socketRemoteAddress=g.socket&&g.socket.remoteAddress,_.parseHeaders(g,m),g.connection&&(_.connectionRemoteAddress=g.connection.remoteAddress,_.legacySocketRemoteAddress=g.connection.socket&&g.connection.socket.remoteAddress)),_}return f.prototype.onError=function(g,m){this._setStatus(void 0,g),m&&(this.duration=m)},f.prototype.onResponse=function(g,m){this._setStatus(g.statusCode,void 0),m&&(this.duration=m)},f.prototype.getRequestTelemetry=function(g){var m={id:this.requestId,name:this.method+" "+n.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(g&&g.time?m.time=g.time:this.startTime&&(m.time=new Date(this.startTime)),g){for(var _ in g)m[_]||(m[_]=g[_]);if(g.properties)for(var _ in g.properties)m.properties[_]=g.properties[_]}return m},f.prototype.getRequestTags=function(g){var m={};for(var _ in g)m[_]=g[_];return m[f.keys.locationIp]=g[f.keys.locationIp]||this._getIp(),m[f.keys.sessionId]=g[f.keys.sessionId]||this._getId("ai_session"),m[f.keys.userId]=g[f.keys.userId]||this._getId("ai_user"),m[f.keys.userAuthUserId]=g[f.keys.userAuthUserId]||this._getId("ai_authUser"),m[f.keys.operationName]=this.getOperationName(g),m[f.keys.operationParentId]=this.getOperationParentId(g),m[f.keys.operationId]=this.getOperationId(g),m},f.prototype.getOperationId=function(g){return g[f.keys.operationId]||this.operationId},f.prototype.getOperationParentId=function(g){return g[f.keys.operationParentId]||this.parentId||this.getOperationId(g)},f.prototype.getOperationName=function(g){return g[f.keys.operationName]||this.method+" "+n.parse(this.url).pathname},f.prototype.getRequestId=function(){return this.requestId},f.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},f.prototype.getTraceparent=function(){return this.traceparent},f.prototype.getTracestate=function(){return this.tracestate},f.prototype.getLegacyRootId=function(){return this.legacyRootId},f.prototype._getAbsoluteUrl=function(g){if(!g.headers)return g.url;var m=g.connection?g.connection.encrypted:null,_=n.parse(g.url),E=_.pathname,T=_.search,w=m||g.headers["x-forwarded-proto"]=="https"?"https":"http",R=n.format({protocol:w,host:g.headers.host,pathname:E,search:T});return R},f.prototype._getIp=function(){var g=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,m=function(E){var T=g.exec(E);if(T)return T[0]},_=m(this.rawHeaders["x-forwarded-for"])||m(this.rawHeaders["x-client-ip"])||m(this.rawHeaders["x-real-ip"])||m(this.connectionRemoteAddress)||m(this.socketRemoteAddress)||m(this.legacySocketRemoteAddress);return!_&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(_="127.0.0.1"),_},f.prototype._getId=function(g){var m=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",_=f.parseId(a.getCookie(g,m));return _},f.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},f.prototype.parseHeaders=function(g,m){if(this.rawHeaders=g.headers||g.rawHeaders,this.userAgent=g.headers&&g.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(g,i.requestContextSourceKey),g.headers){var _=g.headers[i.traceStateHeader]?g.headers[i.traceStateHeader].toString():null,E=g.headers[i.traceparentHeader]?g.headers[i.traceparentHeader].toString():null,T=g.headers[i.requestIdHeader]?g.headers[i.requestIdHeader].toString():null,w=g.headers[i.parentIdHeader]?g.headers[i.parentIdHeader].toString():null,R=g.headers[i.rootIdHeader]?g.headers[i.rootIdHeader].toString():null;this.correlationContextHeader=g.headers[i.correlationContextHeader]?g.headers[i.correlationContextHeader].toString():null,c.w3cEnabled&&(E||_)?(this.traceparent=new d(E?E.toString():null),this.tracestate=E&&_&&new l(_?_.toString():null),this.setBackCompatFromThisTraceContext()):T?c.w3cEnabled?(this.traceparent=new d(null,T),this.setBackCompatFromThisTraceContext()):(this.parentId=T,this.requestId=c.generateRequestId(this.parentId),this.operationId=c.getRootId(this.requestId)):c.w3cEnabled?(this.traceparent=new d,this.traceparent.parentId=w,this.traceparent.legacyRootId=R||w,this.setBackCompatFromThisTraceContext()):(this.parentId=w,this.requestId=c.generateRequestId(R||this.parentId),this.correlationContextHeader=null,this.operationId=c.getRootId(this.requestId)),m&&(this.requestId=m,this.operationId=c.getRootId(this.requestId))}},f.parseId=function(g){var m=g.split("|");return m.length>0?m[0]:""},f.keys=new o.ContextTagKeys,f}(s);t.exports=u}),My=A((e,t)=>{e=t.exports=re;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var h=Array.prototype.slice.call(arguments,0);h.unshift("SEMVER"),console.log.apply(console,h)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,i=e.re=[],s=e.src=[],c=0,l=c++;s[l]="0|[1-9]\\d*";var d=c++;s[d]="[0-9]+";var u=c++;s[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;s[p]="("+s[l]+")\\.("+s[l]+")\\.("+s[l]+")";var f=c++;s[f]="("+s[d]+")\\.("+s[d]+")\\.("+s[d]+")";var g=c++;s[g]="(?:"+s[l]+"|"+s[u]+")";var m=c++;s[m]="(?:"+s[d]+"|"+s[u]+")";var _=c++;s[_]="(?:-("+s[g]+"(?:\\."+s[g]+")*))";var E=c++;s[E]="(?:-?("+s[m]+"(?:\\."+s[m]+")*))";var T=c++;s[T]="[0-9A-Za-z-]+";var w=c++;s[w]="(?:\\+("+s[T]+"(?:\\."+s[T]+")*))";var R=c++,I="v?"+s[p]+s[_]+"?"+s[w]+"?";s[R]="^"+I+"$";var H="[v=\\s]*"+s[f]+s[E]+"?"+s[w]+"?",z=c++;s[z]="^"+H+"$";var K=c++;s[K]="((?:<|>)?=?)";var J=c++;s[J]=s[d]+"|x|X|\\*";var te=c++;s[te]=s[l]+"|x|X|\\*";var U=c++;s[U]="[v=\\s]*("+s[te]+")(?:\\.("+s[te]+")(?:\\.("+s[te]+")(?:"+s[_]+")?"+s[w]+"?)?)?";var V=c++;s[V]="[v=\\s]*("+s[J]+")(?:\\.("+s[J]+")(?:\\.("+s[J]+")(?:"+s[E]+")?"+s[w]+"?)?)?";var Q=c++;s[Q]="^"+s[K]+"\\s*"+s[U]+"$";var ne=c++;s[ne]="^"+s[K]+"\\s*"+s[V]+"$";var ve=c++;s[ve]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var de=c++;s[de]="(?:~>?)";var X=c++;s[X]="(\\s*)"+s[de]+"\\s+",i[X]=new RegExp(s[X],"g");var ce="$1~",ie=c++;s[ie]="^"+s[de]+s[U]+"$";var pe=c++;s[pe]="^"+s[de]+s[V]+"$";var he=c++;s[he]="(?:\\^)";var be=c++;s[be]="(\\s*)"+s[he]+"\\s+",i[be]=new RegExp(s[be],"g");var _e="$1^",Be=c++;s[Be]="^"+s[he]+s[U]+"$";var Je=c++;s[Je]="^"+s[he]+s[V]+"$";var ze=c++;s[ze]="^"+s[K]+"\\s*("+H+")$|^$";var Fe=c++;s[Fe]="^"+s[K]+"\\s*("+I+")$|^$";var xe=c++;s[xe]="(\\s*)"+s[K]+"\\s*("+H+"|"+s[U]+")",i[xe]=new RegExp(s[xe],"g");var it="$1$2$3",ut=c++;s[ut]="^\\s*("+s[U]+")\\s+-\\s+("+s[U]+")\\s*$";var Oe=c++;s[Oe]="^\\s*("+s[V]+")\\s+-\\s+("+s[V]+")\\s*$";var me=c++;for(s[me]="(<|>)?=?\\s*\\*",Ae=0;Ae<c;Ae++)r(Ae,s[Ae]),i[Ae]||(i[Ae]=new RegExp(s[Ae]));var Ae;e.parse=Me;function Me(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof re)return h;if(typeof h!="string"||h.length>n)return null;var C=v.loose?i[z]:i[R];if(!C.test(h))return null;try{return new re(h,v)}catch{return null}}e.valid=ir;function ir(h,v){var C=Me(h,v);return C?C.version:null}e.clean=at;function at(h,v){var C=Me(h.trim().replace(/^[=v]+/,""),v);return C?C.version:null}e.SemVer=re;function re(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof re){if(h.loose===v.loose)return h;h=h.version}else if(typeof h!="string")throw new TypeError("Invalid Version: "+h);if(h.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof re))return new re(h,v);r("SemVer",h,v),this.options=v,this.loose=!!v.loose;var C=h.trim().match(v.loose?i[z]:i[R]);if(!C)throw new TypeError("Invalid Version: "+h);if(this.raw=h,this.major=+C[1],this.minor=+C[2],this.patch=+C[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");C[4]?this.prerelease=C[4].split(".").map(function(D){if(/^[0-9]+$/.test(D)){var k=+D;if(k>=0&&k<o)return k}return D}):this.prerelease=[],this.build=C[5]?C[5].split("."):[],this.format()}re.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},re.prototype.toString=function(){return this.version},re.prototype.compare=function(h){return r("SemVer.compare",this.version,this.options,h),h instanceof re||(h=new re(h,this.options)),this.compareMain(h)||this.comparePre(h)},re.prototype.compareMain=function(h){return h instanceof re||(h=new re(h,this.options)),rt(this.major,h.major)||rt(this.minor,h.minor)||rt(this.patch,h.patch)},re.prototype.comparePre=function(h){if(h instanceof re||(h=new re(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;var v=0;do{var C=this.prerelease[v],D=h.prerelease[v];if(r("prerelease compare",v,C,D),C===void 0&&D===void 0)return 0;if(D===void 0)return 1;if(C===void 0)return-1;if(C!==D)return rt(C,D)}while(++v)},re.prototype.inc=function(h,v){switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",v),this.inc("pre",v);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",v),this.inc("pre",v);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var C=this.prerelease.length;--C>=0;)typeof this.prerelease[C]=="number"&&(this.prerelease[C]++,C=-2);C===-1&&this.prerelease.push(0)}v&&(this.prerelease[0]===v?isNaN(this.prerelease[1])&&(this.prerelease=[v,0]):this.prerelease=[v,0]);break;default:throw new Error("invalid increment argument: "+h)}return this.format(),this.raw=this.version,this},e.inc=er;function er(h,v,C,D){typeof C=="string"&&(D=C,C=void 0);try{return new re(h,C).inc(v,D).version}catch{return null}}e.diff=or;function or(h,v){if(L(h,v))return null;var C=Me(h),D=Me(v),k="";if(C.prerelease.length||D.prerelease.length){k="pre";var $="prerelease"}for(var W in C)if((W==="major"||W==="minor"||W==="patch")&&C[W]!==D[W])return k+W;return $}e.compareIdentifiers=rt;var ht=/^[0-9]+$/;function rt(h,v){var C=ht.test(h),D=ht.test(v);return C&&D&&(h=+h,v=+v),h===v?0:C&&!D?-1:D&&!C?1:h<v?-1:1}e.rcompareIdentifiers=Nt;function Nt(h,v){return rt(v,h)}e.major=lt;function lt(h,v){return new re(h,v).major}e.minor=$t;function $t(h,v){return new re(h,v).minor}e.patch=Pt;function Pt(h,v){return new re(h,v).patch}e.compare=M;function M(h,v,C){return new re(h,C).compare(new re(v,C))}e.compareLoose=N;function N(h,v){return M(h,v,!0)}e.rcompare=P;function P(h,v,C){return M(v,h,C)}e.sort=q;function q(h,v){return h.sort(function(C,D){return e.compare(C,D,v)})}e.rsort=F;function F(h,v){return h.sort(function(C,D){return e.rcompare(C,D,v)})}e.gt=y;function y(h,v,C){return M(h,v,C)>0}e.lt=b;function b(h,v,C){return M(h,v,C)<0}e.eq=L;function L(h,v,C){return M(h,v,C)===0}e.neq=G;function G(h,v,C){return M(h,v,C)!==0}e.gte=ue;function ue(h,v,C){return M(h,v,C)>=0}e.lte=fe;function fe(h,v,C){return M(h,v,C)<=0}e.cmp=Re;function Re(h,v,C,D){switch(v){case"===":return typeof h=="object"&&(h=h.version),typeof C=="object"&&(C=C.version),h===C;case"!==":return typeof h=="object"&&(h=h.version),typeof C=="object"&&(C=C.version),h!==C;case"":case"=":case"==":return L(h,C,D);case"!=":return G(h,C,D);case">":return y(h,C,D);case">=":return ue(h,C,D);case"<":return b(h,C,D);case"<=":return fe(h,C,D);default:throw new TypeError("Invalid operator: "+v)}}e.Comparator=ye;function ye(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof ye){if(h.loose===!!v.loose)return h;h=h.value}if(!(this instanceof ye))return new ye(h,v);r("comparator",h,v),this.options=v,this.loose=!!v.loose,this.parse(h),this.semver===He?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var He={};ye.prototype.parse=function(h){var v=this.options.loose?i[ze]:i[Fe],C=h.match(v);if(!C)throw new TypeError("Invalid comparator: "+h);this.operator=C[1],this.operator==="="&&(this.operator=""),C[2]?this.semver=new re(C[2],this.options.loose):this.semver=He},ye.prototype.toString=function(){return this.value},ye.prototype.test=function(h){return r("Comparator.test",h,this.options.loose),this.semver===He?!0:(typeof h=="string"&&(h=new re(h,this.options)),Re(h,this.operator,this.semver,this.options))},ye.prototype.intersects=function(h,v){if(!(h instanceof ye))throw new TypeError("a Comparator is required");(!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1});var C;if(this.operator==="")return C=new le(h.value,v),_t(this.value,C,v);if(h.operator==="")return C=new le(this.value,v),_t(h.semver,C,v);var D=(this.operator===">="||this.operator===">")&&(h.operator===">="||h.operator===">"),k=(this.operator==="<="||this.operator==="<")&&(h.operator==="<="||h.operator==="<"),$=this.semver.version===h.semver.version,W=(this.operator===">="||this.operator==="<=")&&(h.operator===">="||h.operator==="<="),se=Re(this.semver,"<",h.semver,v)&&(this.operator===">="||this.operator===">")&&(h.operator==="<="||h.operator==="<"),oe=Re(this.semver,">",h.semver,v)&&(this.operator==="<="||this.operator==="<")&&(h.operator===">="||h.operator===">");return D||k||$&&W||se||oe},e.Range=le;function le(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof le)return h.loose===!!v.loose&&h.includePrerelease===!!v.includePrerelease?h:new le(h.raw,v);if(h instanceof ye)return new le(h.value,v);if(!(this instanceof le))return new le(h,v);if(this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease,this.raw=h,this.set=h.split(/\s*\|\|\s*/).map(function(C){return this.parseRange(C.trim())},this).filter(function(C){return C.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+h);this.format()}le.prototype.format=function(){return this.range=this.set.map(function(h){return h.join(" ").trim()}).join("||").trim(),this.range},le.prototype.toString=function(){return this.range},le.prototype.parseRange=function(h){var v=this.options.loose;h=h.trim();var C=v?i[Oe]:i[ut];h=h.replace(C,Ve),r("hyphen replace",h),h=h.replace(i[xe],it),r("comparator trim",h,i[xe]),h=h.replace(i[X],ce),h=h.replace(i[be],_e),h=h.split(/\s+/).join(" ");var D=v?i[ze]:i[Fe],k=h.split(" ").map(function($){return kt($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(k=k.filter(function($){return!!$.match(D)})),k=k.map(function($){return new ye($,this.options)},this),k},le.prototype.intersects=function(h,v){if(!(h instanceof le))throw new TypeError("a Range is required");return this.set.some(function(C){return C.every(function(D){return h.set.some(function(k){return k.every(function($){return D.intersects($,v)})})})})},e.toComparators=qe;function qe(h,v){return new le(h,v).set.map(function(C){return C.map(function(D){return D.value}).join(" ").trim().split(" ")})}function kt(h,v){return r("comp",h,v),h=Gr(h,v),r("caret",h),h=Ut(h,v),r("tildes",h),h=S(h,v),r("xrange",h),h=ge(h,v),r("stars",h),h}function De(h){return!h||h.toLowerCase()==="x"||h==="*"}function Ut(h,v){return h.trim().split(/\s+/).map(function(C){return Vr(C,v)}).join(" ")}function Vr(h,v){var C=v.loose?i[pe]:i[ie];return h.replace(C,function(D,k,$,W,se){r("tilde",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":se?(r("replaceTilde pr",se),oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0"):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0",r("tilde return",oe),oe})}function Gr(h,v){return h.trim().split(/\s+/).map(function(C){return Wr(C,v)}).join(" ")}function Wr(h,v){r("caret",h,v);var C=v.loose?i[Je]:i[Be];return h.replace(C,function(D,k,$,W,se){r("caret",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?k==="0"?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+".0 <"+(+k+1)+".0.0":se?(r("replaceCaret pr",se),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+"-"+se+" <"+(+k+1)+".0.0"):(r("no pr"),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+" <"+(+k+1)+".0.0"),r("caret return",oe),oe})}function S(h,v){return r("replaceXRanges",h,v),h.split(/\s+/).map(function(C){return Z(C,v)}).join(" ")}function Z(h,v){h=h.trim();var C=v.loose?i[ne]:i[Q];return h.replace(C,function(D,k,$,W,se,oe){r("xRange",h,D,k,$,W,se,oe);var et=De($),Ye=et||De(W),Ge=Ye||De(se),je=Ge;return k==="="&&je&&(k=""),et?k===">"||k==="<"?D="<0.0.0":D="*":k&&je?(Ye&&(W=0),se=0,k===">"?(k=">=",Ye?($=+$+1,W=0,se=0):(W=+W+1,se=0)):k==="<="&&(k="<",Ye?$=+$+1:W=+W+1),D=k+$+"."+W+"."+se):Ye?D=">="+$+".0.0 <"+(+$+1)+".0.0":Ge&&(D=">="+$+"."+W+".0 <"+$+"."+(+W+1)+".0"),r("xRange return",D),D})}function ge(h,v){return r("replaceStars",h,v),h.trim().replace(i[me],"")}function Ve(h,v,C,D,k,$,W,se,oe,et,Ye,Ge,je){return De(C)?v="":De(D)?v=">="+C+".0.0":De(k)?v=">="+C+"."+D+".0":v=">="+v,De(oe)?se="":De(et)?se="<"+(+oe+1)+".0.0":De(Ye)?se="<"+oe+"."+(+et+1)+".0":Ge?se="<="+oe+"."+et+"."+Ye+"-"+Ge:se="<="+se,(v+" "+se).trim()}le.prototype.test=function(h){if(!h)return!1;typeof h=="string"&&(h=new re(h,this.options));for(var v=0;v<this.set.length;v++)if(Qe(this.set[v],h,this.options))return!0;return!1};function Qe(h,v,C){for(var D=0;D<h.length;D++)if(!h[D].test(v))return!1;if(v.prerelease.length&&!C.includePrerelease){for(D=0;D<h.length;D++)if(r(h[D].semver),h[D].semver!==He&&h[D].semver.prerelease.length>0){var k=h[D].semver;if(k.major===v.major&&k.minor===v.minor&&k.patch===v.patch)return!0}return!1}return!0}e.satisfies=_t;function _t(h,v,C){try{v=new le(v,C)}catch{return!1}return v.test(h)}e.maxSatisfying=lr;function lr(h,v,C){var D=null,k=null;try{var $=new le(v,C)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===-1)&&(D=W,k=new re(D,C))}),D}e.minSatisfying=En;function En(h,v,C){var D=null,k=null;try{var $=new le(v,C)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===1)&&(D=W,k=new re(D,C))}),D}e.minVersion=yr;function yr(h,v){h=new le(h,v);var C=new re("0.0.0");if(h.test(C)||(C=new re("0.0.0-0"),h.test(C)))return C;C=null;for(var D=0;D<h.set.length;++D){var k=h.set[D];k.forEach(function($){var W=new re($.semver.version);switch($.operator){case">":W.prerelease.length===0?W.patch++:W.prerelease.push(0),W.raw=W.format();case"":case">=":(!C||y(C,W))&&(C=W);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return C&&h.test(C)?C:null}e.validRange=bn;function bn(h,v){try{return new le(h,v).range||"*"}catch{return null}}e.ltr=Cn;function Cn(h,v,C){return hr(h,v,"<",C)}e.gtr=Tn;function Tn(h,v,C){return hr(h,v,">",C)}e.outside=hr;function hr(h,v,C,D){h=new re(h,D),v=new le(v,D);var k,$,W,se,oe;switch(C){case">":k=y,$=fe,W=b,se=">",oe=">=";break;case"<":k=b,$=ue,W=y,se="<",oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(_t(h,v,D))return!1;for(var et=0;et<v.set.length;++et){var Ye=v.set[et],Ge=null,je=null;if(Ye.forEach(function(dt){dt.semver===He&&(dt=new ye(">=0.0.0")),Ge=Ge||dt,je=je||dt,k(dt.semver,Ge.semver,D)?Ge=dt:W(dt.semver,je.semver,D)&&(je=dt)}),Ge.operator===se||Ge.operator===oe||(!je.operator||je.operator===se)&&$(h,je.semver)||je.operator===oe&&W(h,je.semver))return!1}return!0}e.prerelease=Sn;function Sn(h,v){var C=Me(h,v);return C&&C.prerelease.length?C.prerelease:null}e.intersects=Er;function Er(h,v,C){return h=new le(h,C),v=new le(v,C),h.intersects(v)}e.coerce=Rn;function Rn(h){if(h instanceof re)return h;if(typeof h!="string")return null;var v=h.match(i[ve]);return v==null?null:Me(v[1]+"."+(v[2]||"0")+"."+(v[3]||"0"))}}),Xs=A((e,t)=>{"use strict";function r(d){return typeof d=="function"}var n=console.error.bind(console);function o(d,u,p){var f=!!d[u]&&d.propertyIsEnumerable(u);Object.defineProperty(d,u,{configurable:!0,enumerable:f,writable:!0,value:p})}function a(d){d&&d.logger&&(r(d.logger)?n=d.logger:n("new logger isn't a function, not replacing"))}function i(d,u,p){if(!d||!d[u]){n("no original function "+u+" to wrap");return}if(!p){n("no wrapper function"),n(new Error().stack);return}if(!r(d[u])||!r(p)){n("original object and wrapper must be functions");return}var f=d[u],g=p(f,u);return o(g,"__original",f),o(g,"__unwrap",function(){d[u]===g&&o(d,u,f)}),o(g,"__wrapped",!0),o(d,u,g),g}function s(d,u,p){if(d)Array.isArray(d)||(d=[d]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(u&&Array.isArray(u))){n("must provide one or more functions to wrap on modules");return}d.forEach(function(f){u.forEach(function(g){i(f,g,p)})})}function c(d,u){if(!d||!d[u]){n("no function to unwrap."),n(new Error().stack);return}if(!d[u].__unwrap)n("no original to unwrap to -- has "+u+" already been unwrapped?");else return d[u].__unwrap()}function l(d,u){if(d)Array.isArray(d)||(d=[d]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(u&&Array.isArray(u))){n("must provide one or more functions to unwrap on modules");return}d.forEach(function(p){u.forEach(function(f){c(p,f)})})}a.wrap=i,a.massWrap=s,a.unwrap=c,a.massUnwrap=l,t.exports=a}),Ys=A((e,t)=>{"use strict";var r=Xs(),n=r.wrap,o=r.unwrap,a="wrap@before";function i(u,p,f){var g=!!u[p]&&u.propertyIsEnumerable(p);Object.defineProperty(u,p,{configurable:!0,enumerable:g,writable:!0,value:f})}function s(u,p){for(var f=p.length,g=0;g<f;g++){var m=p[g],_=u[a];if(typeof _=="function")_(m);else if(Array.isArray(_))for(var E=_.length,T=0;T<E;T++)_[T](m)}}function c(u,p){var f;return f=u._events&&u._events[p],Array.isArray(f)||(f?f=[f]:f=[]),f}function l(u,p,f){var g=c(u,p),m=g.filter(function(_){return f.indexOf(_)===-1});m.length>0&&s(u,m)}function d(u,p){if(u){var f=u;if(typeof u=="function")f=p(u);else if(Array.isArray(u)){f=[];for(var g=0;g<u.length;g++)f[g]=p(u[g])}return f}}t.exports=function(u,p,f){if(!u||!u.on||!u.addListener||!u.removeListener||!u.emit)throw new Error("can only wrap real EEs");if(!p)throw new Error("must have function to run on listener addition");if(!f)throw new Error("must have function to wrap listeners when emitting");function g(_){return function(E,T){var w=c(this,E).slice();try{var R=_.call(this,E,T);return l(this,E,w),R}finally{this.on.__wrapped||n(this,"on",g),this.addListener.__wrapped||n(this,"addListener",g)}}}function m(_){return function(E){if(!this._events||!this._events[E])return _.apply(this,arguments);var T=this._events[E];function w(R){return function(){this._events[E]=T;try{return R.apply(this,arguments)}finally{T=this._events[E],this._events[E]=d(T,f)}}}n(this,"removeListener",w);try{return this._events[E]=d(T,f),_.apply(this,arguments)}finally{o(this,"removeListener"),this._events[E]=T}}}u[a]?typeof u[a]=="function"?i(u,a,[u[a],p]):Array.isArray(u[a])&&u[a].push(p):i(u,a,p),u.__wrapped||(n(u,"addListener",g),n(u,"on",g),n(u,"emit",m),i(u,"__unwrap",function(){o(u,"addListener"),o(u,"on"),o(u,"emit"),delete u[a],delete u.__wrapped}),i(u,"__wrapped",!0))}}),qy=A((e,t)=>{"use strict";var r=require("util"),n=require("assert"),o=Ys(),a=require("async_hooks"),i="cls@contexts",s="error@context",c=process.env.DEBUG_CLS_HOOKED,l=-1;t.exports={getNamespace:u,createNamespace:p,destroyNamespace:f,reset:g,ERROR_SYMBOL:s};function d(_){this.name=_,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}d.prototype.set=function(_,E){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[_]=E,c){let T=" ".repeat(this._indent<0?0:this._indent);m(T+"CONTEXT-SET KEY:"+_+"="+E+" in ns:"+this.name+" currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return E},d.prototype.get=function(_){if(!this.active){if(c){let E=a.currentId(),T=a.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(`${w}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${_}=undefined currentUid:${l} asyncHooksCurrentId:${E} triggerId:${T} len:${this._set.length}`)}return}if(c){let E=a.executionAsyncId(),T=a.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(w+"CONTEXT-GETTING KEY:"+_+"="+this.active[_]+" ("+this.name+") currentUid:"+l+" active:"+r.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),m(`${w}CONTEXT-GETTING KEY: (${this.name}) ${_}=${this.active[_]} currentUid:${l} asyncHooksCurrentId:${E} triggerId:${T} len:${this._set.length} active:${r.inspect(this.active)}`)}return this.active[_]},d.prototype.createContext=function(){let _=Object.create(this.active?this.active:Object.prototype);if(_._ns_name=this.name,_.id=l,c){let E=a.executionAsyncId(),T=a.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(`${w}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${E} triggerId:${T} len:${this._set.length} context:${r.inspect(_,{showHidden:!0,depth:2,colors:!0})}`)}return _},d.prototype.run=function(_){let E=this.createContext();this.enter(E);try{if(c){let T=a.triggerAsyncId(),w=a.executionAsyncId(),R=" ".repeat(this._indent<0?0:this._indent);m(`${R}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${T} asyncHooksCurrentId:${w} len:${this._set.length} context:${r.inspect(E)}`)}return _(E),E}catch(T){throw T&&(T[s]=E),T}finally{if(c){let T=a.triggerAsyncId(),w=a.executionAsyncId(),R=" ".repeat(this._indent<0?0:this._indent);m(`${R}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${T} asyncHooksCurrentId:${w} len:${this._set.length} ${r.inspect(E)}`)}this.exit(E)}},d.prototype.runAndReturn=function(_){let E;return this.run(function(T){E=_(T)}),E},d.prototype.runPromise=function(_){let E=this.createContext();this.enter(E);let T=_(E);if(!T||!T.then||!T.catch)throw new Error("fn must return a promise.");return c&&m("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(E)),T.then(w=>(c&&m("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(E)),this.exit(E),w)).catch(w=>{throw w[s]=E,c&&m("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+r.inspect(E)),this.exit(E),w})},d.prototype.bind=function(_,E){E||(this.active?E=this.active:E=this.createContext());let T=this;return function(){T.enter(E);try{return _.apply(this,arguments)}catch(w){throw w&&(w[s]=E),w}finally{T.exit(E)}}},d.prototype.enter=function(_){if(n.ok(_,"context must be provided for entering"),c){let E=a.executionAsyncId(),T=a.triggerAsyncId(),w=" ".repeat(this._indent<0?0:this._indent);m(`${w}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${T} asyncHooksCurrentId:${E} len:${this._set.length} ${r.inspect(_)}`)}this._set.push(this.active),this.active=_},d.prototype.exit=function(_){if(n.ok(_,"context must be provided for exiting"),c){let T=a.executionAsyncId(),w=a.triggerAsyncId(),R=" ".repeat(this._indent<0?0:this._indent);m(`${R}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${w} asyncHooksCurrentId:${T} len:${this._set.length} ${r.inspect(_)}`)}if(this.active===_){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let E=this._set.lastIndexOf(_);E<0?(c&&m("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(_)),n.ok(E>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(_))):(n.ok(E,"can't remove top context"),this._set.splice(E,1))},d.prototype.bindEmitter=function(_){n.ok(_.on&&_.addListener&&_.emit,"can only bind real EEs");let E=this,T="context@"+this.name;function w(I){!I||(I[i]||(I[i]=Object.create(null)),I[i][T]={namespace:E,context:E.active})}function R(I){if(!(I&&I[i]))return I;let H=I,z=I[i];return Object.keys(z).forEach(function(K){let J=z[K];H=J.namespace.bind(H,J.context)}),H}o(_,w,R)},d.prototype.fromException=function(_){return _[s]};function u(_){return process.namespaces[_]}function p(_){n.ok(_,"namespace must be given a name."),c&&m(`NS-CREATING NAMESPACE (${_})`);let E=new d(_);return E.id=l,a.createHook({init(T,w,R,I){if(l=a.executionAsyncId(),E.active){if(E._contexts.set(T,E.active),c){let H=" ".repeat(E._indent<0?0:E._indent);m(`${H}INIT [${w}] (${_}) asyncId:${T} currentUid:${l} triggerId:${R} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} resource:${I}`)}}else if(l===0){let H=a.triggerAsyncId(),z=E._contexts.get(H);if(z){if(E._contexts.set(T,z),c){let K=" ".repeat(E._indent<0?0:E._indent);m(`${K}INIT USING CONTEXT FROM TRIGGERID [${w}] (${_}) asyncId:${T} currentUid:${l} triggerId:${H} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} resource:${I}`)}}else if(c){let K=" ".repeat(E._indent<0?0:E._indent);m(`${K}INIT MISSING CONTEXT [${w}] (${_}) asyncId:${T} currentUid:${l} triggerId:${H} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} resource:${I}`)}}if(c&&w==="PROMISE"){m(r.inspect(I,{showHidden:!0}));let H=I.parentId,z=" ".repeat(E._indent<0?0:E._indent);m(`${z}INIT RESOURCE-PROMISE [${w}] (${_}) parentId:${H} asyncId:${T} currentUid:${l} triggerId:${R} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} resource:${I}`)}},before(T){l=a.executionAsyncId();let w;if(w=E._contexts.get(T)||E._contexts.get(l),w){if(c){let R=a.triggerAsyncId(),I=" ".repeat(E._indent<0?0:E._indent);m(`${I}BEFORE (${_}) asyncId:${T} currentUid:${l} triggerId:${R} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(w)}`),E._indent+=2}E.enter(w)}else if(c){let R=a.triggerAsyncId(),I=" ".repeat(E._indent<0?0:E._indent);m(`${I}BEFORE MISSING CONTEXT (${_}) asyncId:${T} currentUid:${l} triggerId:${R} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${r.inspect(E._contexts,{showHidden:!0,depth:2,colors:!0})}`),E._indent+=2}},after(T){l=a.executionAsyncId();let w;if(w=E._contexts.get(T)||E._contexts.get(l),w){if(c){let R=a.triggerAsyncId();E._indent-=2;let I=" ".repeat(E._indent<0?0:E._indent);m(`${I}AFTER (${_}) asyncId:${T} currentUid:${l} triggerId:${R} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(w)}`)}E.exit(w)}else if(c){let R=a.triggerAsyncId();E._indent-=2;let I=" ".repeat(E._indent<0?0:E._indent);m(`${I}AFTER MISSING CONTEXT (${_}) asyncId:${T} currentUid:${l} triggerId:${R} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(w)}`)}},destroy(T){if(l=a.executionAsyncId(),c){let w=a.triggerAsyncId(),R=" ".repeat(E._indent<0?0:E._indent);m(`${R}DESTROY (${_}) currentUid:${l} asyncId:${T} triggerId:${w} active:${r.inspect(E.active,{showHidden:!0,depth:2,colors:!0})} context:${r.inspect(E._contexts.get(l))}`)}E._contexts.delete(T)}}).enable(),process.namespaces[_]=E,E}function f(_){let E=u(_);n.ok(E,`can't delete nonexistent namespace! "`+_+'"'),n.ok(E.id,"don't assign to process.namespaces directly! "+r.inspect(E)),process.namespaces[_]=null}function g(){process.namespaces&&Object.keys(process.namespaces).forEach(function(_){f(_)}),process.namespaces=Object.create(null)}process.namespaces={};function m(..._){c&&process._rawDebug(`${r.format(..._)}`)}}),Ly=A((e,t)=>{"use strict";function r(){}t.exports=function(){let n=this._hooks,o=this._state,a=process.nextTick;process.nextTick=function(){if(!o.enabled)return a.apply(process,arguments);let i=new Array(arguments.length);for(let d=0;d<arguments.length;d++)i[d]=arguments[d];let s=i[0];if(typeof s!="function")throw new TypeError("callback is not a function");let c=new r,l=--o.counter;return n.init.call(c,l,0,null,null),i[0]=function(){n.pre.call(c,l);let d=!0;try{s.apply(this,arguments),d=!1}finally{d&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){n.post.call(c,l,!0),n.destroy.call(null,l)})}n.post.call(c,l,!1),n.destroy.call(null,l)},a.apply(process,i)}}}),jy=A((e,t)=>{"use strict";function r(){}t.exports=function(){let n=this._hooks,o=this._state,a=global.Promise,i=a.prototype.then;a.prototype.then=d;function s(u,p,f,g){return typeof u!="function"?g?c(f):l(f):function(){n.pre.call(p,f);try{return u.apply(this,arguments)}finally{n.post.call(p,f,!1),n.destroy.call(null,f)}}}function c(u){return function(p){return n.destroy.call(null,u),p}}function l(u){return function(p){throw n.destroy.call(null,u),p}}function d(u,p){if(!o.enabled)return i.call(this,u,p);let f=new r,g=--o.counter;return n.init.call(f,g,0,null,null),i.call(this,s(u,f,g,!0),s(p,f,g,!1))}}}),Fy=A((e,t)=>{"use strict";var r=require("timers");function n(){}function o(){}function a(){}var i=new Map,s=new Map,c=new Map,l=null,d=!1;t.exports=function(){u(this._hooks,this._state,"setTimeout","clearTimeout",n,i,!0),u(this._hooks,this._state,"setInterval","clearInterval",o,s,!1),u(this._hooks,this._state,"setImmediate","clearImmediate",a,c,!0),global.setTimeout=r.setTimeout,global.setInterval=r.setInterval,global.setImmediate=r.setImmediate,global.clearTimeout=r.clearTimeout,global.clearInterval=r.clearInterval,global.clearImmediate=r.clearImmediate};function u(p,f,g,m,_,E,T){let w=r[g],R=r[m];r[g]=function(){if(!f.enabled)return w.apply(r,arguments);let I=new Array(arguments.length);for(let te=0;te<arguments.length;te++)I[te]=arguments[te];let H=I[0];if(typeof H!="function")throw new TypeError('"callback" argument must be a function');let z=new _,K=--f.counter,J;return p.init.call(z,K,0,null,null),I[0]=function(){l=J,p.pre.call(z,K);let te=!0;try{H.apply(this,arguments),te=!1}finally{te&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){p.post.call(z,K,!0),E.delete(J),p.destroy.call(null,K)})}p.post.call(z,K,!1),l=null,(T||d)&&(d=!1,E.delete(J),p.destroy.call(null,K))},J=w.apply(r,I),E.set(J,K),J},r[m]=function(I){if(l===I&&I!==null)d=!0;else if(E.has(I)){let H=E.get(I);E.delete(I),p.destroy.call(null,H)}R.apply(r,arguments)}}}),fd=A((e,t)=>{t.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),Hy=A((e,t)=>{"use strict";var r=process.binding("async_wrap"),n=r.Providers.TIMERWRAP,o={nextTick:Ly(),promise:jy(),timers:Fy()},a=new Set;function i(){this.enabled=!1,this.counter=0}function s(){let d=this.initFns=[],u=this.preFns=[],p=this.postFns=[],f=this.destroyFns=[];this.init=function(g,m,_,E){if(m===n){a.add(g);return}for(let T of d)T(g,this,m,_,E)},this.pre=function(g){if(!a.has(g))for(let m of u)m(g,this)},this.post=function(g,m){if(!a.has(g))for(let _ of p)_(g,this,m)},this.destroy=function(g){if(a.has(g)){a.delete(g);return}for(let m of f)m(g)}}s.prototype.add=function(d){d.init&&this.initFns.push(d.init),d.pre&&this.preFns.push(d.pre),d.post&&this.postFns.push(d.post),d.destroy&&this.destroyFns.push(d.destroy)};function c(d,u){let p=d.indexOf(u);p!==-1&&d.splice(p,1)}s.prototype.remove=function(d){d.init&&c(this.initFns,d.init),d.pre&&c(this.preFns,d.pre),d.post&&c(this.postFns,d.post),d.destroy&&c(this.destroyFns,d.destroy)};function l(){this._state=new i,this._hooks=new s,this.version=fd().version,this.providers=r.Providers;for(let d of Object.keys(o))o[d].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),r.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}t.exports=l,l.prototype.addHooks=function(d){this._hooks.add(d)},l.prototype.removeHooks=function(d){this._hooks.remove(d)},l.prototype.enable=function(){this._state.enabled=!0,r.enable()},l.prototype.disable=function(){this._state.enabled=!1,r.disable()}}),hd=A((e,t)=>{t.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),$y=A((e,t)=>{function r(n){try{return Error.prototype.toString.call(n)}catch(o){try{return"<error: "+o+">"}catch{return"<error>"}}}t.exports=function(n,o){var a=[];a.push(r(n));for(var i=0;i<o.length;i++){var s=o[i],c;try{c=s.toString()}catch(l){try{c="<error: "+l+">"}catch{c="<error>"}}a.push("    at "+c)}return a.join(`
`)}}),Uy=A((e,t)=>{var r=$y();function n(){this.extend=new i,this.filter=new i,this.format=new s,this.version=hd().version}var o=!1;n.prototype.callSite=function u(p){p||(p={}),o=!0;var f={};Error.captureStackTrace(f,u);var g=f.stack;return o=!1,g=g.slice(p.slice||0),p.extend&&(g=this.extend._modify(f,g)),p.filter&&(g=this.filter._modify(f,g)),g};var a=new n;function i(){this._modifiers=[]}i.prototype._modify=function(u,p){for(var f=0,g=this._modifiers.length;f<g;f++)p=this._modifiers[f](u,p);return p},i.prototype.attach=function(u){this._modifiers.push(u)},i.prototype.deattach=function(u){var p=this._modifiers.indexOf(u);return p===-1?!1:(this._modifiers.splice(p,1),!0)};function s(){this._formater=r,this._previous=void 0}s.prototype.replace=function(u){u?this._formater=u:this.restore()},s.prototype.restore=function(){this._formater=r,this._previous=void 0},s.prototype._backup=function(){this._previous=this._formater},s.prototype._roolback=function(){this._previous===r?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&a.format.replace(Error.prepareStackTrace);var c=!1;function l(u,p){if(o)return p;if(c)return r(u,p);var f=p.concat();f=a.extend._modify(u,f),f=a.filter._modify(u,f),f=f.slice(0,Error.stackTraceLimit),Object.isExtensible(u)&&Object.getOwnPropertyDescriptor(u,"callSite")===void 0&&(u.callSite={original:p,mutated:f}),c=!0;var g=a.format._formater(u,f);return c=!1,g}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(u){u===l?a.format._roolback():(a.format._backup(),a.format.replace(u))}});function d(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:d,set:function(u){Object.defineProperty(this,"callSite",{value:u,writable:!0,configurable:!0})},configurable:!0}),t.exports=a}),gd=A((e,t)=>{if(global._stackChain)if(global._stackChain.version===hd().version)t.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else t.exports=global._stackChain=Uy()}),By=A((e,t)=>{"use strict";var r=Hy();if(global._asyncHook)if(global._asyncHook.version===fd().version)t.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else gd().filter.attach(function(n,o){return o.filter(function(a){let i=a.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),t.exports=global._asyncHook=new r}),Vy=A((e,t)=>{"use strict";var r=require("util"),n=require("assert"),o=Ys(),a=By(),i="cls@contexts",s="error@context",c=[];for(let R in a.providers)c[a.providers[R]]=R;var l=process.env.DEBUG_CLS_HOOKED,d=-1;t.exports={getNamespace:p,createNamespace:f,destroyNamespace:g,reset:m,ERROR_SYMBOL:s};function u(R){this.name=R,this.active=null,this._set=[],this.id=null,this._contexts=new Map}u.prototype.set=function(R,I){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return l&&_("    SETTING KEY:"+R+"="+I+" in ns:"+this.name+" uid:"+d+" active:"+r.inspect(this.active,!0)),this.active[R]=I,I},u.prototype.get=function(R){if(!this.active){l&&_("    GETTING KEY:"+R+"=undefined "+this.name+" uid:"+d+" active:"+r.inspect(this.active,!0));return}return l&&_("    GETTING KEY:"+R+"="+this.active[R]+" "+this.name+" uid:"+d+" active:"+r.inspect(this.active,!0)),this.active[R]},u.prototype.createContext=function(){l&&_("   CREATING Context: "+this.name+" uid:"+d+" len:"+this._set.length+"  active:"+r.inspect(this.active,!0,2,!0));let R=Object.create(this.active?this.active:Object.prototype);return R._ns_name=this.name,R.id=d,l&&_("   CREATED Context: "+this.name+" uid:"+d+" len:"+this._set.length+"  context:"+r.inspect(R,!0,2,!0)),R},u.prototype.run=function(R){let I=this.createContext();this.enter(I);try{return l&&_(" BEFORE RUN: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(I)),R(I),I}catch(H){throw H&&(H[s]=I),H}finally{l&&_(" AFTER RUN: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(I)),this.exit(I)}},u.prototype.runAndReturn=function(R){var I;return this.run(function(H){I=R(H)}),I},u.prototype.runPromise=function(R){let I=this.createContext();this.enter(I);let H=R(I);if(!H||!H.then||!H.catch)throw new Error("fn must return a promise.");return l&&_(" BEFORE runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(I)),H.then(z=>(l&&_(" AFTER runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(I)),this.exit(I),z)).catch(z=>{throw z[s]=I,l&&_(" AFTER runPromise: "+this.name+" uid:"+d+" len:"+this._set.length+" "+r.inspect(I)),this.exit(I),z})},u.prototype.bind=function(R,I){I||(this.active?I=this.active:I=this.createContext());let H=this;return function(){H.enter(I);try{return R.apply(this,arguments)}catch(z){throw z&&(z[s]=I),z}finally{H.exit(I)}}},u.prototype.enter=function(R){n.ok(R,"context must be provided for entering"),l&&_("  ENTER "+this.name+" uid:"+d+" len:"+this._set.length+" context: "+r.inspect(R)),this._set.push(this.active),this.active=R},u.prototype.exit=function(R){if(n.ok(R,"context must be provided for exiting"),l&&_("  EXIT "+this.name+" uid:"+d+" len:"+this._set.length+" context: "+r.inspect(R)),this.active===R){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let I=this._set.lastIndexOf(R);I<0?(l&&_("??ERROR?? context exiting but not entered - ignoring: "+r.inspect(R)),n.ok(I>=0,`context not currently entered; can't exit. 
`+r.inspect(this)+`
`+r.inspect(R))):(n.ok(I,"can't remove top context"),this._set.splice(I,1))},u.prototype.bindEmitter=function(R){n.ok(R.on&&R.addListener&&R.emit,"can only bind real EEs");let I=this,H="context@"+this.name;function z(J){!J||(J[i]||(J[i]=Object.create(null)),J[i][H]={namespace:I,context:I.active})}function K(J){if(!(J&&J[i]))return J;let te=J,U=J[i];return Object.keys(U).forEach(function(V){let Q=U[V];te=Q.namespace.bind(te,Q.context)}),te}o(R,z,K)},u.prototype.fromException=function(R){return R[s]};function p(R){return process.namespaces[R]}function f(R){n.ok(R,"namespace must be given a name."),l&&_("CREATING NAMESPACE "+R);let I=new u(R);return I.id=d,a.addHooks({init(H,z,K,J,te){d=H,J?(I._contexts.set(H,I._contexts.get(J)),l&&_("PARENTID: "+R+" uid:"+H+" parent:"+J+" provider:"+K)):I._contexts.set(d,I.active),l&&_("INIT "+R+" uid:"+H+" parent:"+J+" provider:"+c[K]+" active:"+r.inspect(I.active,!0))},pre(H,z){d=H;let K=I._contexts.get(H);K?(l&&_(" PRE "+R+" uid:"+H+" handle:"+E(z)+" context:"+r.inspect(K)),I.enter(K)):l&&_(" PRE MISSING CONTEXT "+R+" uid:"+H+" handle:"+E(z))},post(H,z){d=H;let K=I._contexts.get(H);K?(l&&_(" POST "+R+" uid:"+H+" handle:"+E(z)+" context:"+r.inspect(K)),I.exit(K)):l&&_(" POST MISSING CONTEXT "+R+" uid:"+H+" handle:"+E(z))},destroy(H){d=H,l&&_("DESTROY "+R+" uid:"+H+" context:"+r.inspect(I._contexts.get(d))+" active:"+r.inspect(I.active,!0)),I._contexts.delete(H)}}),process.namespaces[R]=I,I}function g(R){let I=p(R);n.ok(I,`can't delete nonexistent namespace! "`+R+'"'),n.ok(I.id,"don't assign to process.namespaces directly! "+r.inspect(I)),process.namespaces[R]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(R){g(R)}),process.namespaces=Object.create(null)}process.namespaces={},a._state&&!a._state.enabled&&a.enable();function _(R){process.env.DEBUG&&process._rawDebug(R)}function E(R){if(!R)return R;if(typeof R=="function")return R.name?R.name:(R.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(R.constructor&&R.constructor.name)return R.constructor.name}if(l){T=gd();for(w in T.filter._modifiers)T.filter.deattach(w)}var T,w}),Gy=A((e,t)=>{"use strict";var r=My();process&&r.gte(process.versions.node,"8.0.0")?t.exports=qy():t.exports=Vy()}),Wy=A((e,t)=>{e=t.exports=re;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var h=Array.prototype.slice.call(arguments,0);h.unshift("SEMVER"),console.log.apply(console,h)}:r=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,i=e.re=[],s=e.src=[],c=0,l=c++;s[l]="0|[1-9]\\d*";var d=c++;s[d]="[0-9]+";var u=c++;s[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=c++;s[p]="("+s[l]+")\\.("+s[l]+")\\.("+s[l]+")";var f=c++;s[f]="("+s[d]+")\\.("+s[d]+")\\.("+s[d]+")";var g=c++;s[g]="(?:"+s[l]+"|"+s[u]+")";var m=c++;s[m]="(?:"+s[d]+"|"+s[u]+")";var _=c++;s[_]="(?:-("+s[g]+"(?:\\."+s[g]+")*))";var E=c++;s[E]="(?:-?("+s[m]+"(?:\\."+s[m]+")*))";var T=c++;s[T]="[0-9A-Za-z-]+";var w=c++;s[w]="(?:\\+("+s[T]+"(?:\\."+s[T]+")*))";var R=c++,I="v?"+s[p]+s[_]+"?"+s[w]+"?";s[R]="^"+I+"$";var H="[v=\\s]*"+s[f]+s[E]+"?"+s[w]+"?",z=c++;s[z]="^"+H+"$";var K=c++;s[K]="((?:<|>)?=?)";var J=c++;s[J]=s[d]+"|x|X|\\*";var te=c++;s[te]=s[l]+"|x|X|\\*";var U=c++;s[U]="[v=\\s]*("+s[te]+")(?:\\.("+s[te]+")(?:\\.("+s[te]+")(?:"+s[_]+")?"+s[w]+"?)?)?";var V=c++;s[V]="[v=\\s]*("+s[J]+")(?:\\.("+s[J]+")(?:\\.("+s[J]+")(?:"+s[E]+")?"+s[w]+"?)?)?";var Q=c++;s[Q]="^"+s[K]+"\\s*"+s[U]+"$";var ne=c++;s[ne]="^"+s[K]+"\\s*"+s[V]+"$";var ve=c++;s[ve]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var de=c++;s[de]="(?:~>?)";var X=c++;s[X]="(\\s*)"+s[de]+"\\s+",i[X]=new RegExp(s[X],"g");var ce="$1~",ie=c++;s[ie]="^"+s[de]+s[U]+"$";var pe=c++;s[pe]="^"+s[de]+s[V]+"$";var he=c++;s[he]="(?:\\^)";var be=c++;s[be]="(\\s*)"+s[he]+"\\s+",i[be]=new RegExp(s[be],"g");var _e="$1^",Be=c++;s[Be]="^"+s[he]+s[U]+"$";var Je=c++;s[Je]="^"+s[he]+s[V]+"$";var ze=c++;s[ze]="^"+s[K]+"\\s*("+H+")$|^$";var Fe=c++;s[Fe]="^"+s[K]+"\\s*("+I+")$|^$";var xe=c++;s[xe]="(\\s*)"+s[K]+"\\s*("+H+"|"+s[U]+")",i[xe]=new RegExp(s[xe],"g");var it="$1$2$3",ut=c++;s[ut]="^\\s*("+s[U]+")\\s+-\\s+("+s[U]+")\\s*$";var Oe=c++;s[Oe]="^\\s*("+s[V]+")\\s+-\\s+("+s[V]+")\\s*$";var me=c++;for(s[me]="(<|>)?=?\\s*\\*",Ae=0;Ae<c;Ae++)r(Ae,s[Ae]),i[Ae]||(i[Ae]=new RegExp(s[Ae]));var Ae;e.parse=Me;function Me(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof re)return h;if(typeof h!="string"||h.length>n)return null;var C=v.loose?i[z]:i[R];if(!C.test(h))return null;try{return new re(h,v)}catch{return null}}e.valid=ir;function ir(h,v){var C=Me(h,v);return C?C.version:null}e.clean=at;function at(h,v){var C=Me(h.trim().replace(/^[=v]+/,""),v);return C?C.version:null}e.SemVer=re;function re(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof re){if(h.loose===v.loose)return h;h=h.version}else if(typeof h!="string")throw new TypeError("Invalid Version: "+h);if(h.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof re))return new re(h,v);r("SemVer",h,v),this.options=v,this.loose=!!v.loose;var C=h.trim().match(v.loose?i[z]:i[R]);if(!C)throw new TypeError("Invalid Version: "+h);if(this.raw=h,this.major=+C[1],this.minor=+C[2],this.patch=+C[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");C[4]?this.prerelease=C[4].split(".").map(function(D){if(/^[0-9]+$/.test(D)){var k=+D;if(k>=0&&k<o)return k}return D}):this.prerelease=[],this.build=C[5]?C[5].split("."):[],this.format()}re.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},re.prototype.toString=function(){return this.version},re.prototype.compare=function(h){return r("SemVer.compare",this.version,this.options,h),h instanceof re||(h=new re(h,this.options)),this.compareMain(h)||this.comparePre(h)},re.prototype.compareMain=function(h){return h instanceof re||(h=new re(h,this.options)),rt(this.major,h.major)||rt(this.minor,h.minor)||rt(this.patch,h.patch)},re.prototype.comparePre=function(h){if(h instanceof re||(h=new re(h,this.options)),this.prerelease.length&&!h.prerelease.length)return-1;if(!this.prerelease.length&&h.prerelease.length)return 1;if(!this.prerelease.length&&!h.prerelease.length)return 0;var v=0;do{var C=this.prerelease[v],D=h.prerelease[v];if(r("prerelease compare",v,C,D),C===void 0&&D===void 0)return 0;if(D===void 0)return 1;if(C===void 0)return-1;if(C!==D)return rt(C,D)}while(++v)},re.prototype.inc=function(h,v){switch(h){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",v);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",v);break;case"prepatch":this.prerelease.length=0,this.inc("patch",v),this.inc("pre",v);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",v),this.inc("pre",v);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var C=this.prerelease.length;--C>=0;)typeof this.prerelease[C]=="number"&&(this.prerelease[C]++,C=-2);C===-1&&this.prerelease.push(0)}v&&(this.prerelease[0]===v?isNaN(this.prerelease[1])&&(this.prerelease=[v,0]):this.prerelease=[v,0]);break;default:throw new Error("invalid increment argument: "+h)}return this.format(),this.raw=this.version,this},e.inc=er;function er(h,v,C,D){typeof C=="string"&&(D=C,C=void 0);try{return new re(h,C).inc(v,D).version}catch{return null}}e.diff=or;function or(h,v){if(L(h,v))return null;var C=Me(h),D=Me(v),k="";if(C.prerelease.length||D.prerelease.length){k="pre";var $="prerelease"}for(var W in C)if((W==="major"||W==="minor"||W==="patch")&&C[W]!==D[W])return k+W;return $}e.compareIdentifiers=rt;var ht=/^[0-9]+$/;function rt(h,v){var C=ht.test(h),D=ht.test(v);return C&&D&&(h=+h,v=+v),h===v?0:C&&!D?-1:D&&!C?1:h<v?-1:1}e.rcompareIdentifiers=Nt;function Nt(h,v){return rt(v,h)}e.major=lt;function lt(h,v){return new re(h,v).major}e.minor=$t;function $t(h,v){return new re(h,v).minor}e.patch=Pt;function Pt(h,v){return new re(h,v).patch}e.compare=M;function M(h,v,C){return new re(h,C).compare(new re(v,C))}e.compareLoose=N;function N(h,v){return M(h,v,!0)}e.rcompare=P;function P(h,v,C){return M(v,h,C)}e.sort=q;function q(h,v){return h.sort(function(C,D){return e.compare(C,D,v)})}e.rsort=F;function F(h,v){return h.sort(function(C,D){return e.rcompare(C,D,v)})}e.gt=y;function y(h,v,C){return M(h,v,C)>0}e.lt=b;function b(h,v,C){return M(h,v,C)<0}e.eq=L;function L(h,v,C){return M(h,v,C)===0}e.neq=G;function G(h,v,C){return M(h,v,C)!==0}e.gte=ue;function ue(h,v,C){return M(h,v,C)>=0}e.lte=fe;function fe(h,v,C){return M(h,v,C)<=0}e.cmp=Re;function Re(h,v,C,D){switch(v){case"===":return typeof h=="object"&&(h=h.version),typeof C=="object"&&(C=C.version),h===C;case"!==":return typeof h=="object"&&(h=h.version),typeof C=="object"&&(C=C.version),h!==C;case"":case"=":case"==":return L(h,C,D);case"!=":return G(h,C,D);case">":return y(h,C,D);case">=":return ue(h,C,D);case"<":return b(h,C,D);case"<=":return fe(h,C,D);default:throw new TypeError("Invalid operator: "+v)}}e.Comparator=ye;function ye(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof ye){if(h.loose===!!v.loose)return h;h=h.value}if(!(this instanceof ye))return new ye(h,v);r("comparator",h,v),this.options=v,this.loose=!!v.loose,this.parse(h),this.semver===He?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var He={};ye.prototype.parse=function(h){var v=this.options.loose?i[ze]:i[Fe],C=h.match(v);if(!C)throw new TypeError("Invalid comparator: "+h);this.operator=C[1],this.operator==="="&&(this.operator=""),C[2]?this.semver=new re(C[2],this.options.loose):this.semver=He},ye.prototype.toString=function(){return this.value},ye.prototype.test=function(h){return r("Comparator.test",h,this.options.loose),this.semver===He?!0:(typeof h=="string"&&(h=new re(h,this.options)),Re(h,this.operator,this.semver,this.options))},ye.prototype.intersects=function(h,v){if(!(h instanceof ye))throw new TypeError("a Comparator is required");(!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1});var C;if(this.operator==="")return C=new le(h.value,v),_t(this.value,C,v);if(h.operator==="")return C=new le(this.value,v),_t(h.semver,C,v);var D=(this.operator===">="||this.operator===">")&&(h.operator===">="||h.operator===">"),k=(this.operator==="<="||this.operator==="<")&&(h.operator==="<="||h.operator==="<"),$=this.semver.version===h.semver.version,W=(this.operator===">="||this.operator==="<=")&&(h.operator===">="||h.operator==="<="),se=Re(this.semver,"<",h.semver,v)&&(this.operator===">="||this.operator===">")&&(h.operator==="<="||h.operator==="<"),oe=Re(this.semver,">",h.semver,v)&&(this.operator==="<="||this.operator==="<")&&(h.operator===">="||h.operator===">");return D||k||$&&W||se||oe},e.Range=le;function le(h,v){if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),h instanceof le)return h.loose===!!v.loose&&h.includePrerelease===!!v.includePrerelease?h:new le(h.raw,v);if(h instanceof ye)return new le(h.value,v);if(!(this instanceof le))return new le(h,v);if(this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease,this.raw=h,this.set=h.split(/\s*\|\|\s*/).map(function(C){return this.parseRange(C.trim())},this).filter(function(C){return C.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+h);this.format()}le.prototype.format=function(){return this.range=this.set.map(function(h){return h.join(" ").trim()}).join("||").trim(),this.range},le.prototype.toString=function(){return this.range},le.prototype.parseRange=function(h){var v=this.options.loose;h=h.trim();var C=v?i[Oe]:i[ut];h=h.replace(C,Ve),r("hyphen replace",h),h=h.replace(i[xe],it),r("comparator trim",h,i[xe]),h=h.replace(i[X],ce),h=h.replace(i[be],_e),h=h.split(/\s+/).join(" ");var D=v?i[ze]:i[Fe],k=h.split(" ").map(function($){return kt($,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(k=k.filter(function($){return!!$.match(D)})),k=k.map(function($){return new ye($,this.options)},this),k},le.prototype.intersects=function(h,v){if(!(h instanceof le))throw new TypeError("a Range is required");return this.set.some(function(C){return C.every(function(D){return h.set.some(function(k){return k.every(function($){return D.intersects($,v)})})})})},e.toComparators=qe;function qe(h,v){return new le(h,v).set.map(function(C){return C.map(function(D){return D.value}).join(" ").trim().split(" ")})}function kt(h,v){return r("comp",h,v),h=Gr(h,v),r("caret",h),h=Ut(h,v),r("tildes",h),h=S(h,v),r("xrange",h),h=ge(h,v),r("stars",h),h}function De(h){return!h||h.toLowerCase()==="x"||h==="*"}function Ut(h,v){return h.trim().split(/\s+/).map(function(C){return Vr(C,v)}).join(" ")}function Vr(h,v){var C=v.loose?i[pe]:i[ie];return h.replace(C,function(D,k,$,W,se){r("tilde",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":se?(r("replaceTilde pr",se),oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0"):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0",r("tilde return",oe),oe})}function Gr(h,v){return h.trim().split(/\s+/).map(function(C){return Wr(C,v)}).join(" ")}function Wr(h,v){r("caret",h,v);var C=v.loose?i[Je]:i[Be];return h.replace(C,function(D,k,$,W,se){r("caret",h,D,k,$,W,se);var oe;return De(k)?oe="":De($)?oe=">="+k+".0.0 <"+(+k+1)+".0.0":De(W)?k==="0"?oe=">="+k+"."+$+".0 <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+".0 <"+(+k+1)+".0.0":se?(r("replaceCaret pr",se),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+"-"+se+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+"-"+se+" <"+(+k+1)+".0.0"):(r("no pr"),k==="0"?$==="0"?oe=">="+k+"."+$+"."+W+" <"+k+"."+$+"."+(+W+1):oe=">="+k+"."+$+"."+W+" <"+k+"."+(+$+1)+".0":oe=">="+k+"."+$+"."+W+" <"+(+k+1)+".0.0"),r("caret return",oe),oe})}function S(h,v){return r("replaceXRanges",h,v),h.split(/\s+/).map(function(C){return Z(C,v)}).join(" ")}function Z(h,v){h=h.trim();var C=v.loose?i[ne]:i[Q];return h.replace(C,function(D,k,$,W,se,oe){r("xRange",h,D,k,$,W,se,oe);var et=De($),Ye=et||De(W),Ge=Ye||De(se),je=Ge;return k==="="&&je&&(k=""),et?k===">"||k==="<"?D="<0.0.0":D="*":k&&je?(Ye&&(W=0),se=0,k===">"?(k=">=",Ye?($=+$+1,W=0,se=0):(W=+W+1,se=0)):k==="<="&&(k="<",Ye?$=+$+1:W=+W+1),D=k+$+"."+W+"."+se):Ye?D=">="+$+".0.0 <"+(+$+1)+".0.0":Ge&&(D=">="+$+"."+W+".0 <"+$+"."+(+W+1)+".0"),r("xRange return",D),D})}function ge(h,v){return r("replaceStars",h,v),h.trim().replace(i[me],"")}function Ve(h,v,C,D,k,$,W,se,oe,et,Ye,Ge,je){return De(C)?v="":De(D)?v=">="+C+".0.0":De(k)?v=">="+C+"."+D+".0":v=">="+v,De(oe)?se="":De(et)?se="<"+(+oe+1)+".0.0":De(Ye)?se="<"+oe+"."+(+et+1)+".0":Ge?se="<="+oe+"."+et+"."+Ye+"-"+Ge:se="<="+se,(v+" "+se).trim()}le.prototype.test=function(h){if(!h)return!1;typeof h=="string"&&(h=new re(h,this.options));for(var v=0;v<this.set.length;v++)if(Qe(this.set[v],h,this.options))return!0;return!1};function Qe(h,v,C){for(var D=0;D<h.length;D++)if(!h[D].test(v))return!1;if(v.prerelease.length&&!C.includePrerelease){for(D=0;D<h.length;D++)if(r(h[D].semver),h[D].semver!==He&&h[D].semver.prerelease.length>0){var k=h[D].semver;if(k.major===v.major&&k.minor===v.minor&&k.patch===v.patch)return!0}return!1}return!0}e.satisfies=_t;function _t(h,v,C){try{v=new le(v,C)}catch{return!1}return v.test(h)}e.maxSatisfying=lr;function lr(h,v,C){var D=null,k=null;try{var $=new le(v,C)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===-1)&&(D=W,k=new re(D,C))}),D}e.minSatisfying=En;function En(h,v,C){var D=null,k=null;try{var $=new le(v,C)}catch{return null}return h.forEach(function(W){$.test(W)&&(!D||k.compare(W)===1)&&(D=W,k=new re(D,C))}),D}e.minVersion=yr;function yr(h,v){h=new le(h,v);var C=new re("0.0.0");if(h.test(C)||(C=new re("0.0.0-0"),h.test(C)))return C;C=null;for(var D=0;D<h.set.length;++D){var k=h.set[D];k.forEach(function($){var W=new re($.semver.version);switch($.operator){case">":W.prerelease.length===0?W.patch++:W.prerelease.push(0),W.raw=W.format();case"":case">=":(!C||y(C,W))&&(C=W);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+$.operator)}})}return C&&h.test(C)?C:null}e.validRange=bn;function bn(h,v){try{return new le(h,v).range||"*"}catch{return null}}e.ltr=Cn;function Cn(h,v,C){return hr(h,v,"<",C)}e.gtr=Tn;function Tn(h,v,C){return hr(h,v,">",C)}e.outside=hr;function hr(h,v,C,D){h=new re(h,D),v=new le(v,D);var k,$,W,se,oe;switch(C){case">":k=y,$=fe,W=b,se=">",oe=">=";break;case"<":k=b,$=ue,W=y,se="<",oe="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(_t(h,v,D))return!1;for(var et=0;et<v.set.length;++et){var Ye=v.set[et],Ge=null,je=null;if(Ye.forEach(function(dt){dt.semver===He&&(dt=new ye(">=0.0.0")),Ge=Ge||dt,je=je||dt,k(dt.semver,Ge.semver,D)?Ge=dt:W(dt.semver,je.semver,D)&&(je=dt)}),Ge.operator===se||Ge.operator===oe||(!je.operator||je.operator===se)&&$(h,je.semver)||je.operator===oe&&W(h,je.semver))return!1}return!0}e.prerelease=Sn;function Sn(h,v){var C=Me(h,v);return C&&C.prerelease.length?C.prerelease:null}e.intersects=Er;function Er(h,v,C){return h=new le(h,C),v=new le(v,C),h.intersects(v)}e.coerce=Rn;function Rn(h){if(h instanceof re)return h;if(typeof h!="string")return null;var v=h.match(i[ve]);return v==null?null:Me(v[1]+"."+(v[2]||"0")+"."+(v[3]||"0"))}}),Ky=A((e,t)=>{var r=Xs().wrap,n=1<<0,o=1<<1,a=1<<2,i=1<<3,s=[],c=0,l=!1,d=[],u,p;function f(z,K){var J=z.length,te=K.length,U=[];if(J===0&&te===0)return U;for(var V=0;V<J;V++)U[V]=z[V];if(te===0)return U;for(var Q=0;Q<te;Q++){var ne=!0;for(V=0;V<J;V++)if(z[V].uid===K[Q].uid){ne=!1;break}ne&&U.push(K[Q])}return U}process._fatalException?(g=!1,u=function(z){var K=s.length;if(g||K===0)return!1;var J=!1;g=!0;for(var te=0;te<K;++te){var U=s[te];if((U.flags&i)!==0){var V=m&&m[U.uid];J=U.error(V,z)||J}}return g=!1,d.length>0&&(s=d.pop()),m=void 0,J&&!l},p=function(z,K,J){var te=[];l=!0;for(var U=0;U<J;++U){var V=K[U];if(te[V.uid]=V.data,(V.flags&n)!==0){var Q=V.create(V.data);Q!==void 0&&(te[V.uid]=Q)}}return l=!1,function(){m=te,d.push(s),s=f(K,s),l=!0;for(var ne=0;ne<J;++ne)(K[ne].flags&o)>0&&K[ne].before(this,te[K[ne].uid]);l=!1;var ve=z.apply(this,arguments);for(l=!0,ne=0;ne<J;++ne)(K[ne].flags&a)>0&&K[ne].after(this,te[K[ne].uid]);return l=!1,s=d.pop(),m=void 0,ve}},r(process,"_fatalException",function(z){return function(K){return u(K)||z(K)}})):(_=!1,u=function(z){if(_)throw z;for(var K=!1,J=s.length,te=0;te<J;++te){var U=s[te];(U.flags&i)!==0&&(K=U.error(null,z)||K)}if(!K&&l)throw z},p=function(z,K,J){var te=[];l=!0;for(var U=0;U<J;++U){var V=K[U];if(te[V.uid]=V.data,(V.flags&n)!==0){var Q=V.create(V.data);Q!==void 0&&(te[V.uid]=Q)}}return l=!1,function(){var ne=!1,ve=!1;d.push(s),s=f(K,s),l=!0;for(var de=0;de<J;++de)(K[de].flags&o)>0&&K[de].before(this,te[K[de].uid]);l=!1;var X;try{X=z.apply(this,arguments)}catch(ce){ne=!0;for(var de=0;de<J;++de)if((s[de].flags&i)!=0)try{ve=s[de].error(te[K[de].uid],ce)||ve}catch(pe){throw _=!0,pe}if(!ve)throw process.removeListener("uncaughtException",u),process._originalNextTick(function(){process.addListener("uncaughtException",u)}),ce}finally{if(!ne||ve){for(l=!0,de=0;de<J;++de)(K[de].flags&a)>0&&K[de].after(this,te[K[de].uid]);l=!1}s=d.pop()}return X}},process.addListener("uncaughtException",u));var g,m,_;function E(z,K,J){l=!0;for(var te=0;te<J;++te){var U=K[te];U.create&&U.create(U.data)}return l=!1,function(){d.push(s),s=f(K,s);var V=z.apply(this,arguments);return s=d.pop(),V}}function T(z){var K=s.length;if(K===0)return z;for(var J=s.slice(),te=0;te<K;++te)if(J[te].flags>0)return p(z,J,K);return E(z,J,K)}function w(z,K){typeof z.create=="function"&&(this.create=z.create,this.flags|=n),typeof z.before=="function"&&(this.before=z.before,this.flags|=o),typeof z.after=="function"&&(this.after=z.after,this.flags|=a),typeof z.error=="function"&&(this.error=z.error,this.flags|=i),this.uid=++c,this.data=K===void 0?null:K}w.prototype.create=void 0,w.prototype.before=void 0,w.prototype.after=void 0,w.prototype.error=void 0,w.prototype.data=void 0,w.prototype.uid=0,w.prototype.flags=0;function R(z,K){if(typeof z!="object"||!z)throw new TypeError("callbacks argument must be an object");return z instanceof w?z:new w(z,K)}function I(z,K){var J;z instanceof w?J=z:J=R(z,K);for(var te=!1,U=0;U<s.length;U++)if(J===s[U]){te=!0;break}return te||s.push(J),J}function H(z){for(var K=0;K<s.length;K++)if(z===s[K]){s.splice(K,1);break}}process.createAsyncListener=R,process.addAsyncListener=I,process.removeAsyncListener=H,t.exports=T}),zy=A((e,t)=>{"use strict";t.exports=(r,n)=>class extends r{constructor(o){var a,i;super(c);var s=this;try{o.apply(a,i)}catch(l){i[1](l)}return s;function c(l,d){a=this,i=[u,p];function u(f){return n(s,!1),l(f)}function p(f){return n(s,!1),d(f)}}}}}),Xy=A(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=Xs(),t=Wy(),r=e.wrap,n=e.massWrap,o=Ky(),a=require("util"),i=t.gte(process.version,"6.0.0"),s=t.gte(process.version,"7.0.0"),c=t.gte(process.version,"8.0.0"),l=t.gte(process.version,"11.0.0"),d=require("net");s&&!d._normalizeArgs?d._normalizeArgs=function(X){if(X.length===0)return[{},null];var ce=X[0],ie={};typeof ce=="object"&&ce!==null?ie=ce:de(ce)?ie.path=ce:(ie.port=ce,X.length>1&&typeof X[1]=="string"&&(ie.host=X[1]));var pe=X[X.length-1];return typeof pe!="function"?[ie,null]:[ie,pe]}:!s&&!d._normalizeConnectArgs&&(d._normalizeConnectArgs=function(X){var ce={};function ie(he){return(he=Number(he))>=0?he:!1}typeof X[0]=="object"&&X[0]!==null?ce=X[0]:typeof X[0]=="string"&&ie(X[0])===!1?ce.path=X[0]:(ce.port=X[0],typeof X[1]=="string"&&(ce.host=X[1]));var pe=X[X.length-1];return typeof pe=="function"?[ce,pe]:[ce]}),"_setUpListenHandle"in d.Server.prototype?r(d.Server.prototype,"_setUpListenHandle",u):r(d.Server.prototype,"_listen2",u);function u(X){return function(){this.on("connection",function(ce){ce._handle&&(ce._handle.onread=o(ce._handle.onread))});try{return X.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=o(this._handle.onconnection))}}}function p(X){if(X&&X._handle){var ce=X._handle;ce._originalOnread||(ce._originalOnread=ce.onread),ce.onread=o(ce._originalOnread)}}r(d.Socket.prototype,"connect",function(X){return function(){var ce;c&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?ce=arguments[0]:ce=s?d._normalizeArgs(arguments):d._normalizeConnectArgs(arguments),ce[1]&&(ce[1]=o(ce[1]));var ie=X.apply(this,ce);return p(this),ie}});var f=require("http");r(f.Agent.prototype,"addRequest",function(X){return function(ce){var ie=ce.onSocket;return ce.onSocket=o(function(pe){return p(pe),ie.apply(this,arguments)}),X.apply(this,arguments)}});var g=require("child_process");function m(X){Array.isArray(X.stdio)&&X.stdio.forEach(function(ce){ce&&ce._handle&&(ce._handle.onread=o(ce._handle.onread),r(ce._handle,"close",ne))}),X._handle&&(X._handle.onexit=o(X._handle.onexit))}g.ChildProcess?r(g.ChildProcess.prototype,"spawn",function(X){return function(){var ce=X.apply(this,arguments);return m(this),ce}}):n(g,["execFile","fork","spawn"],function(X){return function(){var ce=X.apply(this,arguments);return m(ce),ce}}),process._fatalException||(process._originalNextTick=process.nextTick);var _=[];process._nextDomainTick&&_.push("_nextDomainTick"),process._tickDomainCallback&&_.push("_tickDomainCallback"),n(process,_,Q),r(process,"nextTick",ne);var E=["setTimeout","setInterval"];global.setImmediate&&E.push("setImmediate");var T=require("timers"),w=global.setTimeout===T.setTimeout;n(T,E,ne),w&&n(global,E,ne);var R=require("dns");n(R,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],Q),R.resolveNaptr&&r(R,"resolveNaptr",Q);var I=require("fs");n(I,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],Q),I.lchown&&r(I,"lchown",Q),I.lchmod&&r(I,"lchmod",Q),I.ftruncate&&r(I,"ftruncate",Q);var H;try{H=require("zlib")}catch{}H&&H.Deflate&&H.Deflate.prototype&&(z=Object.getPrototypeOf(H.Deflate.prototype),z._transform?r(z,"_transform",Q):z.write&&z.flush&&z.end&&n(z,["write","flush","end"],Q));var z,K;try{K=require("crypto")}catch{}K&&(J=["pbkdf2","randomBytes"],l||J.push("pseudoRandomBytes"),n(K,J,Q));var J,te=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";te&&(U=process.addAsyncListener({create:function(){te=!1}}),global.Promise.resolve(!0).then(function(){te=!1}),process.removeAsyncListener(U));var U;te&&V();function V(){var X=global.Promise;function ce(_e){if(!(this instanceof ce))return X(_e);if(typeof _e!="function")return new X(_e);var Be,Je,ze=new X(Fe);ze.__proto__=ce.prototype;try{_e.apply(Be,Je)}catch(xe){Je[1](xe)}return ze;function Fe(xe,it){Be=this,Je=[ut,Oe];function ut(me){return pe(ze,!1),xe(me)}function Oe(me){return pe(ze,!1),it(me)}}}if(a.inherits(ce,X),r(X.prototype,"then",be),X.prototype.chain&&r(X.prototype,"chain",be),i)global.Promise=zy()(X,pe);else{var ie=["all","race","reject","resolve","accept","defer"];ie.forEach(function(_e){typeof X[_e]=="function"&&(ce[_e]=X[_e])}),global.Promise=ce}function pe(_e,Be){(!_e.__asl_wrapper||Be)&&(_e.__asl_wrapper=o(he))}function he(_e,Be,Je,ze){var Fe;try{return Fe=Be.call(_e,Je),{returnVal:Fe,error:!1}}catch(xe){return{errorVal:xe,error:!0}}finally{Fe instanceof X?ze.__asl_wrapper=function(){var xe=Fe.__asl_wrapper||he;return xe.apply(this,arguments)}:pe(ze,!0)}}function be(_e){return function(){var Be=this,Je=_e.apply(Be,Array.prototype.map.call(arguments,ze));return Je.__asl_wrapper=function(Fe,xe,it,ut){return Be.__asl_wrapper?(Be.__asl_wrapper(Fe,function(){},null,Je),Je.__asl_wrapper(Fe,xe,it,ut)):he(Fe,xe,it,ut)},Je;function ze(Fe){return typeof Fe!="function"?Fe:o(function(xe){var it=(Be.__asl_wrapper||he)(this,Fe,xe,Je);if(it.error)throw it.errorVal;return it.returnVal})}}}}function Q(X){var ce=function(){var ie,pe=arguments.length-1;if(typeof arguments[pe]=="function"){ie=Array(arguments.length);for(var he=0;he<arguments.length-1;he++)ie[he]=arguments[he];ie[pe]=o(arguments[pe])}return X.apply(this,ie||arguments)};switch(X.length){case 1:return function(ie){return arguments.length!==1?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie))};case 2:return function(ie,pe){return arguments.length!==2?ce.apply(this,arguments):(typeof pe=="function"&&(pe=o(pe)),X.call(this,ie,pe))};case 3:return function(ie,pe,he){return arguments.length!==3?ce.apply(this,arguments):(typeof he=="function"&&(he=o(he)),X.call(this,ie,pe,he))};case 4:return function(ie,pe,he,be){return arguments.length!==4?ce.apply(this,arguments):(typeof be=="function"&&(be=o(be)),X.call(this,ie,pe,he,be))};case 5:return function(ie,pe,he,be,_e){return arguments.length!==5?ce.apply(this,arguments):(typeof _e=="function"&&(_e=o(_e)),X.call(this,ie,pe,he,be,_e))};case 6:return function(ie,pe,he,be,_e,Be){return arguments.length!==6?ce.apply(this,arguments):(typeof Be=="function"&&(Be=o(Be)),X.call(this,ie,pe,he,be,_e,Be))};default:return ce}}function ne(X){var ce=function(){var ie;if(typeof arguments[0]=="function"){ie=Array(arguments.length),ie[0]=o(arguments[0]);for(var pe=1;pe<arguments.length;pe++)ie[pe]=arguments[pe]}return X.apply(this,ie||arguments)};switch(X.length){case 1:return function(ie){return arguments.length!==1?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie))};case 2:return function(ie,pe){return arguments.length!==2?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie,pe))};case 3:return function(ie,pe,he){return arguments.length!==3?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie,pe,he))};case 4:return function(ie,pe,he,be){return arguments.length!==4?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie,pe,he,be))};case 5:return function(ie,pe,he,be,_e){return arguments.length!==5?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie,pe,he,be,_e))};case 6:return function(ie,pe,he,be,_e,Be){return arguments.length!==6?ce.apply(this,arguments):(typeof ie=="function"&&(ie=o(ie)),X.call(this,ie,pe,he,be,_e,Be))};default:return ce}}function ve(X){return(X=Number(X))>=0?X:!1}function de(X){return typeof X=="string"&&ve(X)===!1}}),Yy=A((e,t)=>{"use strict";var r=require("assert"),n=Ys(),o="cls@contexts",a="error@context";process.addAsyncListener||Xy();function i(u){this.name=u,this.active=null,this._set=[],this.id=null}i.prototype.set=function(u,p){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[u]=p,p},i.prototype.get=function(u){if(this.active)return this.active[u]},i.prototype.createContext=function(){return Object.create(this.active)},i.prototype.run=function(u){var p=this.createContext();this.enter(p);try{return u(p),p}catch(f){throw f&&(f[a]=p),f}finally{this.exit(p)}},i.prototype.runAndReturn=function(u){var p;return this.run(function(f){p=u(f)}),p},i.prototype.bind=function(u,p){p||(this.active?p=this.active:p=this.createContext());var f=this;return function(){f.enter(p);try{return u.apply(this,arguments)}catch(g){throw g&&(g[a]=p),g}finally{f.exit(p)}}},i.prototype.enter=function(u){r.ok(u,"context must be provided for entering"),this._set.push(this.active),this.active=u},i.prototype.exit=function(u){if(r.ok(u,"context must be provided for exiting"),this.active===u){r.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var p=this._set.lastIndexOf(u);r.ok(p>=0,"context not currently entered; can't exit"),r.ok(p,"can't remove top context"),this._set.splice(p,1)},i.prototype.bindEmitter=function(u){r.ok(u.on&&u.addListener&&u.emit,"can only bind real EEs");var p=this,f="context@"+this.name;function g(_){!_||(_[o]||(_[o]=Object.create(null)),_[o][f]={namespace:p,context:p.active})}function m(_){if(!(_&&_[o]))return _;var E=_,T=_[o];return Object.keys(T).forEach(function(w){var R=T[w];E=R.namespace.bind(E,R.context)}),E}n(u,g,m)},i.prototype.fromException=function(u){return u[a]};function s(u){return process.namespaces[u]}function c(u){r.ok(u,"namespace must be given a name!");var p=new i(u);return p.id=process.addAsyncListener({create:function(){return p.active},before:function(f,g){g&&p.enter(g)},after:function(f,g){g&&p.exit(g)},error:function(f){f&&p.exit(f)}}),process.namespaces[u]=p,p}function l(u){var p=s(u);r.ok(p,"can't delete nonexistent namespace!"),r.ok(p.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(p.id),process.namespaces[u]=null}function d(){process.namespaces&&Object.keys(process.namespaces).forEach(function(u){l(u)}),process.namespaces=Object.create(null)}process.namespaces||d(),t.exports={getNamespace:s,createNamespace:c,destroyNamespace:l,reset:d}}),zn=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var t=zt(),r=zs(),n=mo(),o=sd(),a=pd(),i=function(){function c(){}return c.getCurrentContext=function(){if(!c.enabled)return null;var l=c.session.get(c.CONTEXT_NAME);return l===void 0?null:l},c.generateContextObject=function(l,d,u,p,f,g){return d=d||l,this.enabled?{operation:{name:u,id:l,parentId:d,traceparent:f,tracestate:g},customProperties:new s(p)}:null},c.spanToContextObject=function(l,d,u){var p=new n;return p.traceId=l.traceId,p.spanId=l.spanId,p.traceFlag=n.formatOpenTelemetryTraceFlags(l.traceFlags)||n.DEFAULT_TRACE_FLAG,p.parentId=d,c.generateContextObject(p.traceId,p.parentId,u,null,p)},c.runWithContext=function(l,d){var u;return c.enabled?c.session.bind(d,(u={},u[c.CONTEXT_NAME]=l,u))():d()},c.wrapEmitter=function(l){c.enabled&&c.session.bindEmitter(l)},c.wrapCallback=function(l,d){var u;return c.enabled?c.session.bind(l,d?(u={},u[c.CONTEXT_NAME]=d,u):void 0):l},c.enable=function(l){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}c.hasEverEnabled||(this.forceClsHooked=l,this.hasEverEnabled=!0,typeof this.cls>"u"&&(c.forceClsHooked===!0||c.forceClsHooked===void 0&&c.shouldUseClsHooked()?this.cls=Gy():this.cls=Yy()),c.session=this.cls.createNamespace("AI-CLS-Session"),r.registerContextPreservation(function(d){return c.session.bind(d)})),this.enabled=!0}},c.startOperation=function(l,d){var u=l&&l.traceContext||null,p=l&&l.traceId?l:null,f=l&&l.headers;if(p){var g=new n("00-"+p.traceId+"-"+p.spanId+"-01"),m=new o(p.traceState?p.traceState.serialize():null),_=c.generateContextObject(p.traceId,"|"+p.traceId+"."+p.spanId+".",typeof d=="string"?d:"",void 0,g,m);return _}if(u){var g=new n(u.traceparent),m=new o(u.tracestate),E=typeof d=="object"?new a(d):null,_=c.generateContextObject(g.traceId,g.parentId,typeof d=="string"?d:E.getOperationName({}),E&&E.getCorrelationContextHeader()||void 0,g,m);return _}if(f){var g=new n(f.traceparent?f.traceparent.toString():null),m=new o(f.tracestate?f.tracestate.toString():null),E=new a(l),_=c.generateContextObject(g.traceId,g.parentId,E.getOperationName({}),E.getCorrelationContextHeader(),g,m);return _}return t.warn("startOperation was called with invalid arguments",arguments),null},c.disable=function(){this.enabled=!1},c.reset=function(){c.hasEverEnabled&&(c.session=null,c.session=this.cls.createNamespace("AI-CLS-Session"))},c.isNodeVersionCompatible=function(){var l=process.versions.node.split(".");return parseInt(l[0])>3||parseInt(l[0])>2&&parseInt(l[1])>2},c.shouldUseClsHooked=function(){var l=process.versions.node.split(".");return parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=2},c.canUseClsHooked=function(){var l=process.versions.node.split("."),d=parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=0,u=parseInt(l[0])<8||parseInt(l[0])<=8&&parseInt(l[1])<2,p=parseInt(l[0])>4||parseInt(l[0])>=4&&parseInt(l[1])>=7;return!(d&&u)&&p},c.enabled=!1,c.hasEverEnabled=!1,c.forceClsHooked=void 0,c.CONTEXT_NAME="ApplicationInsights-Context",c}();e.CorrelationContextManager=i;var s=function(){function c(l){this.props=[],this.addHeaderData(l)}return c.prototype.addHeaderData=function(l){var d=l?l.split(", "):[];this.props=d.map(function(u){var p=u.split("=");return{key:p[0],value:p[1]}}).concat(this.props)},c.prototype.serializeToHeader=function(){return this.props.map(function(l){return l.key+"="+l.value}).join(", ")},c.prototype.getProperty=function(l){for(var d=0;d<this.props.length;++d){var u=this.props[d];if(u.key===l)return u.value}},c.prototype.setProperty=function(l,d){if(c.bannedCharacters.test(l)||c.bannedCharacters.test(d)){t.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+l+" and value: "+d);return}for(var u=0;u<this.props.length;++u){var p=this.props[u];if(p.key===l){p.value=d;return}}this.props.push({key:l,value:d})},c.bannedCharacters=/[,=]/,c}()}),Qy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=dr(),r=Mt(),n=[],o=function(s){var c=s.data.message;n.forEach(function(l){c instanceof Error?l.trackException({exception:c}):(c.lastIndexOf(`
`)==c.length-1&&(c=c.substring(0,c.length-1)),l.trackTrace({message:c,severity:s.data.stderr?t.SeverityLevel.Warning:t.SeverityLevel.Information}))})};function a(s,c){s?(n.length===0&&r.channel.subscribe("console",o),n.push(c)):(n=n.filter(function(l){return l!=c}),n.length===0&&r.channel.unsubscribe("console",o))}e.enable=a;function i(){r.channel.unsubscribe("console",o),n=[]}e.dispose=i}),Jy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=dr(),r=Mt(),n=[],o={10:t.SeverityLevel.Verbose,20:t.SeverityLevel.Verbose,30:t.SeverityLevel.Information,40:t.SeverityLevel.Warning,50:t.SeverityLevel.Error,60:t.SeverityLevel.Critical},a=function(c){var l=c.data.result;n.forEach(function(d){var u=o[c.data.level];l instanceof Error?d.trackException({exception:l}):d.trackTrace({message:l,severity:u})})};function i(c,l){c?(n.length===0&&r.channel.subscribe("bunyan",a),n.push(l)):(n=n.filter(function(d){return d!=l}),n.length===0&&r.channel.unsubscribe("bunyan",a))}e.enable=i;function s(){r.channel.unsubscribe("bunyan",a),n=[]}e.dispose=s}),Zy=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var t=dr(),r=Mt(),n=[],o={syslog:function(c){var l={emerg:t.SeverityLevel.Critical,alert:t.SeverityLevel.Critical,crit:t.SeverityLevel.Critical,error:t.SeverityLevel.Error,warning:t.SeverityLevel.Warning,notice:t.SeverityLevel.Information,info:t.SeverityLevel.Information,debug:t.SeverityLevel.Verbose};return l[c]===void 0?t.SeverityLevel.Information:l[c]},npm:function(c){var l={error:t.SeverityLevel.Error,warn:t.SeverityLevel.Warning,info:t.SeverityLevel.Information,verbose:t.SeverityLevel.Verbose,debug:t.SeverityLevel.Verbose,silly:t.SeverityLevel.Verbose};return l[c]===void 0?t.SeverityLevel.Information:l[c]},unknown:function(c){return t.SeverityLevel.Information}},a=function(c){var l=c.data.message;n.forEach(function(d){if(l instanceof Error)d.trackException({exception:l,properties:c.data.meta});else{var u=o[c.data.levelKind](c.data.level);d.trackTrace({message:l,severity:u,properties:c.data.meta})}})};function i(c,l){c?(n.length===0&&r.channel.subscribe("winston",a),n.push(l)):(n=n.filter(function(d){return d!=l}),n.length===0&&r.channel.unsubscribe("winston",a))}e.enable=i;function s(){r.channel.unsubscribe("winston",a),n=[]}e.dispose=s}),eE=A((e,t)=>{"use strict";var r=zs(),n=function(){function o(a){if(o.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=a,o.INSTANCE=this}return o.prototype.enable=function(a,i){r.IsInitialized&&(Qy().enable(a&&i,this._client),Jy().enable(a,this._client),Zy().enable(a,this._client))},o.prototype.isInitialized=function(){return this._isInitialized},o.prototype.dispose=function(){o.INSTANCE=null,this.enable(!1,!1)},o._methodNames=["debug","info","log","warn","error"],o}();t.exports=n}),tE=A((e,t)=>{"use strict";var r=function(){function n(o){if(n.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");n.INSTANCE=this,this._client=o;var a=process.versions.node.split(".");n._canUseUncaughtExceptionMonitor=parseInt(a[0])>13||parseInt(a[0])===13&&parseInt(a[1])>=7}return n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.enable=function(o){var a=this;if(o){this._isInitialized=!0;var i=this;if(!this._exceptionListenerHandle){var s=function(c,l,d){d===void 0&&(d=new Error(n._FALLBACK_ERROR_MESSAGE)),a._client.trackException({exception:d}),a._client.flush({isAppCrashing:!0}),c&&l&&process.listeners(l).length===1&&(console.error(d),process.exit(1))};n._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=s.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=s.bind(this,!0,n.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=s.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(n._canUseUncaughtExceptionMonitor?process.removeListener(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n.INSTANCE=null,n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",n.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",n.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",n._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",n._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",n._canUseUncaughtExceptionMonitor=!1,n}();t.exports=r}),sn=A(e=>{"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var r;(function(a){a.COMMITTED_BYTES="\\Memory\\Committed Bytes",a.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",a.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",a.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",a.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",a.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",a.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",a.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",a.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(r=e.QuickPulseCounter||(e.QuickPulseCounter={}));var n;(function(a){a.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",a.AVAILABLE_BYTES="\\Memory\\Available Bytes",a.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",a.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",a.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",a.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(n=e.PerformanceCounter||(e.PerformanceCounter={}));var o;(function(a){a.REQUESTS_DURATION="requests/duration",a.DEPENDENCIES_DURATION="dependencies/duration",a.EXCEPTIONS_COUNT="exceptions/count",a.TRACES_COUNT="traces/count"})(o=e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=(t={},t[n.PROCESSOR_TIME]=r.PROCESSOR_TIME,t[n.REQUEST_RATE]=r.REQUEST_RATE,t[n.REQUEST_DURATION]=r.REQUEST_DURATION,t[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,t[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,t[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,t[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,t[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,t[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,t),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"}),Qs=A((e,t)=>{"use strict";var r=require("os"),n=sn(),o=function(){function a(i,s,c){s===void 0&&(s=6e4),c===void 0&&(c=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,this._client=i,this._collectionInterval=s,this._enableLiveMetricsCounters=c}return a.prototype.enable=function(i,s){var c=this;this._isEnabled=i,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),i?this._handle||(this._lastCpus=r.cpus(),this._lastRequests={totalRequestCount:a._totalRequestCount,totalFailedRequestCount:a._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:a._totalDependencyCount,totalFailedDependencyCount:a._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:a._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=s||this._collectionInterval,this._handle=setInterval(function(){return c.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countRequest=function(i,s){var c;if(a.isEnabled()){if(typeof i=="string")c=+new Date("1970-01-01T"+i+"Z");else if(typeof i=="number")c=i;else return;a._intervalRequestExecutionTime+=c,s===!1&&a._totalFailedRequestCount++,a._totalRequestCount++}},a.countException=function(){a._totalExceptionCount++},a.countDependency=function(i,s){var c;if(a.isEnabled()){if(typeof i=="string")c=+new Date("1970-01-01T"+i+"Z");else if(typeof i=="number")c=i;else return;a._intervalDependencyExecutionTime+=c,s===!1&&a._totalFailedDependencyCount++,a._totalDependencyCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},a.prototype._trackCpu=function(){var i=r.cpus();if(i&&i.length&&this._lastCpus&&i.length===this._lastCpus.length){for(var s=0,c=0,l=0,d=0,u=0,p=0;!!i&&p<i.length;p++){var f=i[p],g=this._lastCpus[p],m="% cpu("+p+") ",_=f.model,E=f.speed,T=f.times,w=g.times,R=T.user-w.user||0;s+=R;var I=T.sys-w.sys||0;c+=I;var H=T.nice-w.nice||0;l+=H;var z=T.idle-w.idle||0;d+=z;var K=T.irq-w.irq||0;u+=K}var J=void 0;if(typeof process.cpuUsage=="function"){var te=process.cpuUsage(),U=process.hrtime(),V=te.user-this._lastAppCpuUsage.user+(te.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var Q=(U[0]-this._lastHrtime[0])*1e6+(U[1]-this._lastHrtime[1])/1e3||0;J=100*V/(Q*i.length)}this._lastAppCpuUsage=te,this._lastHrtime=U}var ne=s+c+l+d+u||1;this._client.trackMetric({name:n.PerformanceCounter.PROCESSOR_TIME,value:(ne-d)/ne*100}),this._client.trackMetric({name:n.PerformanceCounter.PROCESS_TIME,value:J||s/ne*100})}this._lastCpus=i},a.prototype._trackMemory=function(){var i=r.freemem(),s=process.memoryUsage().rss,c=r.totalmem()-i;this._client.trackMetric({name:n.PerformanceCounter.PRIVATE_BYTES,value:s}),this._client.trackMetric({name:n.PerformanceCounter.AVAILABLE_BYTES,value:i}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.COMMITTED_BYTES,value:c})},a.prototype._trackNetwork=function(){var i=this._lastRequests,s={totalRequestCount:a._totalRequestCount,totalFailedRequestCount:a._totalFailedRequestCount,time:+new Date},c=s.totalRequestCount-i.totalRequestCount||0,l=s.totalFailedRequestCount-i.totalFailedRequestCount||0,d=s.time-i.time,u=d/1e3,p=(a._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/c||0;if(this._lastIntervalRequestExecutionTime=a._intervalRequestExecutionTime,d>0){var f=c/u,g=l/u;this._client.trackMetric({name:n.PerformanceCounter.REQUEST_RATE,value:f}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.PerformanceCounter.REQUEST_DURATION,value:p}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.REQUEST_FAILURE_RATE,value:g})}this._lastRequests=s},a.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var i=this._lastDependencies,s={totalDependencyCount:a._totalDependencyCount,totalFailedDependencyCount:a._totalFailedDependencyCount,time:+new Date},c=s.totalDependencyCount-i.totalDependencyCount||0,l=s.totalFailedDependencyCount-i.totalFailedDependencyCount||0,d=s.time-i.time,u=d/1e3,p=(a._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/c||0;if(this._lastIntervalDependencyExecutionTime=a._intervalDependencyExecutionTime,d>0){var f=c/u,g=l/u;this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_RATE,value:f}),this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:g}),(!this._enableLiveMetricsCounters||c>0)&&this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_DURATION,value:p})}this._lastDependencies=s}},a.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var i=this._lastExceptions,s={totalExceptionCount:a._totalExceptionCount,time:+new Date},c=s.totalExceptionCount-i.totalExceptionCount||0,l=s.time-i.time,d=l/1e3;if(l>0){var u=c/d;this._client.trackMetric({name:n.QuickPulseCounter.EXCEPTION_RATE,value:u})}this._lastExceptions=s}},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a._totalRequestCount=0,a._totalFailedRequestCount=0,a._totalDependencyCount=0,a._totalFailedDependencyCount=0,a._totalExceptionCount=0,a._intervalDependencyExecutionTime=0,a._intervalRequestExecutionTime=0,a}();t.exports=o}),rE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;var t=function(){function r(n){this.dimensions=n,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return r}();e.AggregatedMetricCounter=t}),nE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),md=A((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(s){for(var c,l=1,d=arguments.length;l<d;l++){c=arguments[l];for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(s[u]=c[u])}return s},r.apply(this,arguments)},n=sn(),o=rE(),a=nE(),i=function(){function s(c,l){l===void 0&&(l=6e4),s.INSTANCE||(s.INSTANCE=this),this._isInitialized=!1,s._dependencyCountersCollection=[],s._requestCountersCollection=[],s._exceptionCountersCollection=[],s._traceCountersCollection=[],this._client=c,this._collectionInterval=l}return s.prototype.enable=function(c,l){var d=this;this._isEnabled=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),c?this._handle||(this._collectionInterval=l||this._collectionInterval,this._handle=setInterval(function(){return d.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},s.countException=function(c){if(s.isEnabled()){var l=s._getAggregatedCounter(c,this._exceptionCountersCollection);l.totalCount++}},s.countTrace=function(c){if(s.isEnabled()){var l=s._getAggregatedCounter(c,this._traceCountersCollection);l.totalCount++}},s.countRequest=function(c,l){if(s.isEnabled()){var d,u=s._getAggregatedCounter(l,this._requestCountersCollection);if(typeof c=="string")d=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")d=c;else return;u.intervalExecutionTime+=d,u.totalCount++}},s.countDependency=function(c,l){if(s.isEnabled()){var d=s._getAggregatedCounter(l,this._dependencyCountersCollection),u;if(typeof c=="string")u=+new Date("1970-01-01T"+c+"Z");else if(typeof c=="number")u=c;else return;d.intervalExecutionTime+=u,d.totalCount++}},s.prototype.isInitialized=function(){return this._isInitialized},s.isEnabled=function(){return s.INSTANCE&&s.INSTANCE._isEnabled},s.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},s._getAggregatedCounter=function(c,l){for(var d=!1,u=0;u<l.length;u++){if(c===l[u].dimensions)return l[u];if(Object.keys(c).length===Object.keys(l[u].dimensions).length){for(var p in c)if(c[p]!=l[u].dimensions[p]){d=!0;break}if(!d)return l[u];d=!1}}var f=new o.AggregatedMetricCounter(c);return l.push(f),f},s.prototype._trackRequestMetrics=function(){for(var c=0;c<s._requestCountersCollection.length;c++){var l=s._requestCountersCollection[c];l.time=+new Date;var d=l.totalCount-l.lastTotalCount||0,u=l.time-l.lastTime,p=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/d||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,u>0&&d>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:l.dimensions,value:p,count:d,aggregationInterval:u,metricType:n.MetricId.REQUESTS_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},s.prototype._trackDependencyMetrics=function(){for(var c=0;c<s._dependencyCountersCollection.length;c++){var l=s._dependencyCountersCollection[c];l.time=+new Date;var d=l.totalCount-l.lastTotalCount||0,u=l.time-l.lastTime,p=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/d||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,u>0&&d>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:l.dimensions,value:p,count:d,aggregationInterval:u,metricType:n.MetricId.DEPENDENCIES_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},s.prototype._trackExceptionMetrics=function(){for(var c=0;c<s._exceptionCountersCollection.length;c++){var l=s._exceptionCountersCollection[c],d=l.totalCount-l.lastTotalCount||0,u=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:l.dimensions,value:d,count:d,aggregationInterval:u,metricType:n.MetricId.EXCEPTIONS_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},s.prototype._trackTraceMetrics=function(){for(var c=0;c<s._traceCountersCollection.length;c++){var l=s._traceCountersCollection[c],d=l.totalCount-l.lastTotalCount||0,u=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:l.dimensions,value:d,count:d,aggregationInterval:u,metricType:n.MetricId.TRACES_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},s.prototype._trackPreAggregatedMetric=function(c){var l={};for(var d in c.dimensions)l[a.PreaggregatedMetricPropertyNames[d]]=c.dimensions[d];l=r(r({},l),{"_MS.MetricId":c.metricType,"_MS.AggregationIntervalMs":String(c.aggregationInterval),"_MS.IsAutocollected":"True"});var u={name:c.name,value:c.value,count:c.count,properties:l,kind:"Aggregation"};this._client.trackMetric(u)},s.prototype.dispose=function(){s.INSTANCE=null,this.enable(!1),this._isInitialized=!1},s}();t.exports=i}),vo=A((e,t)=>{"use strict";var r=require("os"),n=require("fs"),o=require("path"),a=dr(),i=zt(),s=function(){function c(l){this.keys=new a.ContextTagKeys,this.tags={},this._loadApplicationContext(l),this._loadDeviceContext(),this._loadInternalContext()}return c.prototype._loadApplicationContext=function(l){if(l=l||o.resolve(__dirname,"../../../../package.json"),!c.appVersion[l]){c.appVersion[l]="unknown";try{var d=JSON.parse(n.readFileSync(l,"utf8"));d&&typeof d.version=="string"&&(c.appVersion[l]=d.version)}catch(u){i.info("unable to read app version: ",u)}}this.tags[this.keys.applicationVersion]=c.appVersion[l]},c.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=r&&r.hostname(),this.tags[this.keys.deviceOSVersion]=r&&r.type()+" "+r.release(),this.tags[this.keys.cloudRole]=c.DefaultRoleName,this.tags["ai.device.osArchitecture"]=r&&r.arch(),this.tags["ai.device.osPlatform"]=r&&r.platform()},c.prototype._loadInternalContext=function(){var l=o.resolve(__dirname,"../../package.json");if(!c.sdkVersion){c.sdkVersion="unknown";try{var d=JSON.parse(n.readFileSync(l,"utf8"));d&&typeof d.version=="string"&&(c.sdkVersion=d.version)}catch(u){i.info("unable to read app version: ",u)}}this.tags[this.keys.internalSdkVersion]="node:"+c.sdkVersion},c.DefaultRoleName="Web",c.appVersion={},c.sdkVersion=null,c}();t.exports=s}),iE=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var d=function(u,p){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(f[m]=g[m])},d(u,p)};return function(u,p){d(u,p);function f(){this.constructor=u}u.prototype=p===null?Object.create(p):(f.prototype=p.prototype,new f)}}(),n=require("url"),o=dr(),a=Cr(),i=wi(),s=dd(),c=Kn(),l=function(d){r(u,d);function u(p,f){var g=d.call(this)||this;return f&&f.method&&p&&(g.method=f.method,g.url=u._getUrlFromRequestOptions(p,f),g.startTime=+new Date),g}return u.prototype.onError=function(p){this._setStatus(void 0,p)},u.prototype.onResponse=function(p){this._setStatus(p.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(p,i.requestContextTargetKey)},u.prototype.getDependencyTelemetry=function(p,f){var g=n.parse(this.url);g.search=void 0,g.hash=void 0;var m=this.method.toUpperCase()+" "+g.pathname,_=o.RemoteDependencyDataConstants.TYPE_HTTP,E=g.hostname;g.port&&(E+=":"+g.port),this.correlationId?(_=o.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==c.correlationIdPrefix&&(E+=" | "+this.correlationId)):_=o.RemoteDependencyDataConstants.TYPE_HTTP;var T={id:f,name:m,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:_,target:E};if(p&&p.time?T.time=p.time:this.startTime&&(T.time=new Date(this.startTime)),p){for(var w in p)T[w]||(T[w]=p[w]);if(p.properties)for(var w in p.properties)T.properties[w]=p.properties[w]}return T},u._getUrlFromRequestOptions=function(p,f){if(typeof p=="string")if(p.indexOf("http://")===0||p.indexOf("https://")===0)p=n.parse(p);else{var g=n.parse(p);g.host==="443"?p=n.parse("https://"+p):p=n.parse("http://"+p)}else{if(p&&typeof n.URL=="function"&&p instanceof n.URL)return n.format(p);var m=p;p={},m&&Object.keys(m).forEach(function(T){p[T]=m[T]})}if(p.path){var _=n.parse(p.path);p.pathname=_.pathname,p.search=_.search}if(p.host&&p.port){var E=n.parse("http://"+p.host);!E.port&&p.port&&(p.hostname=p.host,delete p.host)}return p.protocol=p.protocol||f.agent&&f.agent.protocol||f.protocol||void 0,p.hostname=p.hostname||"localhost",n.format(p)},u}(s);t.exports=l}),oE=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var s,c=1,l=arguments.length;c<l;c++){s=arguments[c];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(i[d]=s[d])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var r=bt(),n=sn();function o(i){var s=t({},i);return Object.keys(n.SpanAttribute).forEach(function(c){delete s[c]}),s}function a(i){var s="|"+i.spanContext().traceId+"."+i.spanContext().spanId+".",c=Math.round(i._duration[0]*1e3+i._duration[1]/1e6),l=i.attributes["peer.address"]?i.attributes["peer.address"].toString():"",d=i.attributes.component?i.attributes.component.toString():"",u=d.toUpperCase()===n.DependencyTypeName.Http||!!i.attributes[n.SpanAttribute.HttpUrl],p=d.toLowerCase()===n.DependencyTypeName.Grpc;if(u){var f=i.attributes[n.SpanAttribute.HttpMethod]||"GET",g=new URL(i.attributes[n.SpanAttribute.HttpUrl].toString()),m=i.attributes[n.SpanAttribute.HttpHost]||g.host,_=i.attributes[n.SpanAttribute.HttpPort]||g.port||null,E=g.pathname||"/",T=f+" "+E,w=n.DependencyTypeName.Http,R=_?(m+":"+_).toString():m.toString(),I=g.toString(),H=i.attributes[n.SpanAttribute.HttpStatusCode]||i.status.code||0,z=H<400;return{id:s,name:T,dependencyTypeName:w,target:R,data:I,success:z,duration:c,url:I,resultCode:String(H),properties:o(i.attributes)}}else if(p){var f=i.attributes[n.SpanAttribute.GrpcMethod]||"rpc",K=i.attributes[n.SpanAttribute.GrpcService],J=K?f+" "+K:i.name;return{id:s,duration:c,name:J,target:K.toString(),data:K.toString()||J,url:K.toString()||J,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(i.status.code||0),success:i.status.code===0,properties:o(i.attributes)}}else{var te=i.name,U=i.links&&i.links.map(function(V){return{operation_Id:V.context.traceId,id:V.context.spanId}});return{id:s,duration:c,name:te,target:l,data:l||te,url:l||te,dependencyTypeName:i.kind===r.SpanKind.INTERNAL?n.DependencyTypeName.InProc:d||i.name,resultCode:String(i.status.code||0),success:i.status.code===0,properties:t(t({},o(i.attributes)),{"_MS.links":U||void 0})}}}e.spanToTelemetryContract=a}),sE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=bt(),r=Mt(),n=mo(),o=oE(),a=Nl(),i=[],s=function(l){var d=l.data,u=o.spanToTelemetryContract(d),p=d.spanContext(),f=new n;f.traceId=p.traceId,f.spanId=p.spanId,f.traceFlag=n.formatOpenTelemetryTraceFlags(p.traceFlags),f.parentId=d.parentSpanId?"|"+p.traceId+"."+d.parentSpanId+".":null,a.AsyncScopeManager.with(d,function(){i.forEach(function(g){d.kind===t.SpanKind.SERVER?g.trackRequest(u):(d.kind===t.SpanKind.CLIENT||d.kind===t.SpanKind.INTERNAL)&&g.trackDependency(u)})})};e.subscriber=s;function c(l,d){l?(i.length===0&&r.channel.subscribe("azure-coretracing",e.subscriber),i.push(d)):(i=i.filter(function(u){return u!=d}),i.length===0&&r.channel.unsubscribe("azure-coretracing",e.subscriber))}e.enable=c}),aE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Mt(),r=[],n=function(a){a.data.event.commandName!=="ismaster"&&r.forEach(function(i){var s=a.data.startedData&&a.data.startedData.databaseName||"Unknown database";i.trackDependency({target:s,data:a.data.event.commandName,name:a.data.event.commandName,duration:a.data.event.duration,success:a.data.succeeded,resultCode:a.data.succeeded?"0":"1",time:a.data.startedData.time,dependencyTypeName:"mongodb"})})};e.subscriber=n;function o(a,i){a?(r.length===0&&t.channel.subscribe("mongodb",e.subscriber),r.push(i)):(r=r.filter(function(s){return s!=i}),r.length===0&&t.channel.unsubscribe("mongodb",e.subscriber))}e.enable=o}),cE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Mt(),r=[],n=function(a){r.forEach(function(i){var s=a.data.query||{},c=s.sql||"Unknown query",l=!a.data.err,d=s._connection||{},u=d.config||{},p=u.socketPath?u.socketPath:(u.host||"localhost")+":"+u.port;i.trackDependency({target:p,data:c,name:c,duration:a.data.duration,success:l,resultCode:l?"0":"1",time:a.data.time,dependencyTypeName:"mysql"})})};e.subscriber=n;function o(a,i){a?(r.length===0&&t.channel.subscribe("mysql",e.subscriber),r.push(i)):(r=r.filter(function(s){return s!=i}),r.length===0&&t.channel.unsubscribe("mysql",e.subscriber))}e.enable=o}),uE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Mt(),r=[],n=function(a){r.forEach(function(i){a.data.commandObj.command!=="info"&&i.trackDependency({target:a.data.address,name:a.data.commandObj.command,data:a.data.commandObj.command,duration:a.data.duration,success:!a.data.err,resultCode:a.data.err?"1":"0",time:a.data.time,dependencyTypeName:"redis"})})};e.subscriber=n;function o(a,i){a?(r.length===0&&t.channel.subscribe("redis",e.subscriber),r.push(i)):(r=r.filter(function(s){return s!=i}),r.length===0&&t.channel.unsubscribe("redis",e.subscriber))}e.enable=o}),lE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var t=Mt(),r=[],n=function(a){r.forEach(function(i){var s=a.data.query,c=s.preparable&&s.preparable.text||s.plan||s.text||"unknown query",l=!a.data.error,d=a.data.database.host+":"+a.data.database.port;i.trackDependency({target:d,data:c,name:c,duration:a.data.duration,success:l,resultCode:l?"0":"1",time:a.data.time,dependencyTypeName:"postgres"})})};e.subscriber=n;function o(a,i){a?(r.length===0&&t.channel.subscribe("postgres",e.subscriber),r.push(i)):(r=r.filter(function(s){return s!=i}),r.length===0&&t.channel.unsubscribe("postgres",e.subscriber))}e.enable=o}),Pi=A((e,t)=>{"use strict";var r=e&&e.__spreadArrays||function(){for(var g=0,m=0,_=arguments.length;m<_;m++)g+=arguments[m].length;for(var E=Array(g),T=0,m=0;m<_;m++)for(var w=arguments[m],R=0,I=w.length;R<I;R++,T++)E[T]=w[R];return E},n=require("http"),o=require("https"),a=zt(),i=Cr(),s=wi(),c=iE(),l=zn(),d=Kn(),u=mo(),p=zs(),f=function(){function g(m){if(g.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");g.INSTANCE=this,this._client=m}return g.prototype.enable=function(m){this._isEnabled=m,this._isEnabled&&!this._isInitialized&&this._initialize(),p.IsInitialized&&(sE().enable(!0,this._client),aE().enable(m,this._client),cE().enable(m,this._client),uE().enable(m,this._client),lE().enable(m,this._client))},g.prototype.isInitialized=function(){return this._isInitialized},g.prototype._initialize=function(){var m=this;this._isInitialized=!0;var _=n.request,E=o.request,T=function(w,R){var I=!R[g.disableCollectionRequestOption]&&!w[g.alreadyAutoCollectedFlag];R.headers&&R.headers["user-agent"]&&R.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(I=!1),w[g.alreadyAutoCollectedFlag]=!0,w&&R&&I&&(l.CorrelationContextManager.wrapEmitter(w),g.trackRequest(m._client,{options:R,request:w}))};n.request=function(w){for(var R=[],I=1;I<arguments.length;I++)R[I-1]=arguments[I];var H=_.call.apply(_,r([n,w],R));return T(H,w),H},o.request=function(w){for(var R=[],I=1;I<arguments.length;I++)R[I-1]=arguments[I];var H=E.call.apply(E,r([o,w],R));return T(H,w),H},n.get=function(w){for(var R,I=[],H=1;H<arguments.length;H++)I[H-1]=arguments[H];var z=(R=n.request).call.apply(R,r([n,w],I));return z.end(),z},o.get=function(w){for(var R,I=[],H=1;H<arguments.length;H++)I[H-1]=arguments[H];var z=(R=o.request).call.apply(R,r([o,w],I));return z.end(),z}},g.trackRequest=function(m,_){if(!_.options||!_.request||!m){a.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!_.options,!_.request,!m);return}var E=new c(_.options,_.request),T=l.CorrelationContextManager.getCurrentContext(),w,R;if(T&&T.operation&&T.operation.traceparent&&u.isValidTraceId(T.operation.traceparent.traceId))T.operation.traceparent.updateSpanId(),w=T.operation.traceparent.getBackCompatRequestId();else if(d.w3cEnabled){var I=new u;R=I.toString(),w=I.getBackCompatRequestId()}else w=T&&T.operation&&T.operation.parentId+g.requestNumber+++".";if(i.canIncludeCorrelationHeader(m,E.getUrl())&&_.request.getHeader&&_.request.setHeader&&m.config&&m.config.correlationId){var H=_.request.getHeader(s.requestContextHeader);try{i.safeIncludeCorrelationHeader(m,_.request,H)}catch(J){a.warn("Request-Context header could not be set. Correlation of requests may be lost",J)}if(T&&T.operation)try{if(_.request.setHeader(s.requestIdHeader,w),m.config.ignoreLegacyHeaders||(_.request.setHeader(s.parentIdHeader,T.operation.id),_.request.setHeader(s.rootIdHeader,w)),R||T.operation.traceparent)_.request.setHeader(s.traceparentHeader,R||T.operation.traceparent.toString());else if(d.w3cEnabled){var I=new u().toString();_.request.setHeader(s.traceparentHeader,I)}if(T.operation.tracestate){var z=T.operation.tracestate.toString();z&&_.request.setHeader(s.traceStateHeader,z)}var K=T.customProperties.serializeToHeader();K&&_.request.setHeader(s.correlationContextHeader,K)}catch(J){a.warn("Correlation headers could not be set. Correlation of requests may be lost.",J)}}_.request.on&&(_.request.on("response",function(J){E.onResponse(J);var te=E.getDependencyTelemetry(_,w);te.contextObjects=te.contextObjects||{},te.contextObjects["http.RequestOptions"]=_.options,te.contextObjects["http.ClientRequest"]=_.request,te.contextObjects["http.ClientResponse"]=J,m.trackDependency(te)}),_.request.on("error",function(J){E.onError(J);var te=E.getDependencyTelemetry(_,w);te.contextObjects=te.contextObjects||{},te.contextObjects["http.RequestOptions"]=_.options,te.contextObjects["http.ClientRequest"]=_.request,te.contextObjects.Error=J,m.trackDependency(te)}),_.request.on("abort",function(){E.onError(new Error);var J=E.getDependencyTelemetry(_,w);J.contextObjects=J.contextObjects||{},J.contextObjects["http.RequestOptions"]=_.options,J.contextObjects["http.ClientRequest"]=_.request,m.trackDependency(J)}))},g.prototype.dispose=function(){g.INSTANCE=null,this.enable(!1),this._isInitialized=!1},g.disableCollectionRequestOption="disableAppInsightsAutoCollection",g.requestNumber=1,g.alreadyAutoCollectedFlag="_appInsightsAutoCollected",g}();t.exports=f}),dE=A((e,t)=>{"use strict";var r=require("os"),n=sn(),o=Cr(),a=vo(),i=Pi(),s="http://169.254.169.254/metadata/instance/compute",c="api-version=2017-12-01",l="format=json",d="ENETUNREACH",u=function(){function p(f){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",p.INSTANCE||(p.INSTANCE=this),this._isInitialized=!1,this._client=f}return p.prototype.enable=function(f,g){var m=this;this._isEnabled=f,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),f?this._handle||(this._handle=setInterval(function(){return m.trackHeartBeat(g,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},p.prototype.isInitialized=function(){return this._isInitialized},p.isEnabled=function(){return p.INSTANCE&&p.INSTANCE._isEnabled},p.prototype.trackHeartBeat=function(f,g){var m=this,_=!1,E={},T=a.sdkVersion;E.sdk=T,E.osType=r.type(),process.env.WEBSITE_SITE_NAME?(E.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",E.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",E.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?E.azfunction_appId=process.env.WEBSITE_HOSTNAME:f&&(this._isVM===void 0?(_=!0,this._getAzureComputeMetadata(f,function(){m._isVM&&Object.keys(m._vmData).length>0&&(E.azInst_vmId=m._vmData.vmId||"",E.azInst_subscriptionId=m._vmData.subscriptionId||"",E.azInst_osType=m._vmData.osType||"",m._azInst_vmId=m._vmData.vmId||"",m._azInst_subscriptionId=m._vmData.subscriptionId||"",m._azInst_osType=m._vmData.osType||""),m._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:E}),g()})):this._isVM&&(E.azInst_vmId=this._azInst_vmId,E.azInst_subscriptionId=this._azInst_subscriptionId,E.azInst_osType=this._azInst_osType)),_||(this._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:E}),g())},p.prototype.dispose=function(){p.INSTANCE=null,this.enable(!1),this._isInitialized=!1},p.prototype._getAzureComputeMetadata=function(f,g){var m,_=this,E=s+"?"+c+"&"+l,T=(m={method:"GET"},m[i.disableCollectionRequestOption]=!0,m.headers={Metadata:"True"},m),w=o.makeRequest(f,E,T,function(R){if(R.statusCode===200){_._isVM=!0;var I="";R.on("data",function(H){I+=H}),R.on("end",function(){_._vmData=_._isJSON(I)?JSON.parse(I):{},g()})}else g()});w&&(w.on("error",function(R){R&&R.message&&R.message.indexOf(d)>-1&&(_._isVM=!1),g()}),w.end())},p.prototype._isJSON=function(f){try{return JSON.parse(f)&&!!f}catch{return!1}},p}();t.exports=u}),vd=A((e,t)=>{"use strict";var r=require("http"),n=require("https"),o=zt(),a=Cr(),i=wi(),s=pd(),c=zn(),l=Qs(),d=function(){function u(p){if(u.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");u.INSTANCE=this,this._client=p}return u.prototype.enable=function(p){this._isEnabled=p,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},u.prototype.useAutoCorrelation=function(p,f){p&&!this._isAutoCorrelating?c.CorrelationContextManager.enable(f):!p&&this._isAutoCorrelating&&c.CorrelationContextManager.disable(),this._isAutoCorrelating=p},u.prototype.isInitialized=function(){return this._isInitialized},u.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},u.prototype._generateCorrelationContext=function(p){if(this._isAutoCorrelating)return c.CorrelationContextManager.generateContextObject(p.getOperationId(this._client.context.tags),p.getRequestId(),p.getOperationName(this._client.context.tags),p.getCorrelationContextHeader(),p.getTraceparent(),p.getTracestate())},u.prototype._initialize=function(){var p=this;this._isInitialized=!0;var f=function(E){if(E){if(typeof E!="function")throw new Error("onRequest handler must be a function");return function(T,w){c.CorrelationContextManager.wrapEmitter(T),c.CorrelationContextManager.wrapEmitter(w);var R=T&&!T[u.alreadyAutoCollectedFlag];if(T&&R){var I=new s(T),H=p._generateCorrelationContext(I);c.CorrelationContextManager.runWithContext(H,function(){p._isEnabled&&(T[u.alreadyAutoCollectedFlag]=!0,u.trackRequest(p._client,{request:T,response:w},I)),typeof E=="function"&&E(T,w)})}else typeof E=="function"&&E(T,w)}}},g=function(E){var T=E.addListener.bind(E);E.addListener=function(w,R){switch(w){case"request":case"checkContinue":return T(w,f(R));default:return T(w,R)}},E.on=E.addListener},m=r.createServer;r.createServer=function(E,T){if(T&&typeof T=="function"){var w=m(E,f(T));return g(w),w}else{var w=m(f(E));return g(w),w}};var _=n.createServer;n.createServer=function(E,T){var w=_(E,f(T));return g(w),w}},u.trackRequestSync=function(p,f){if(!f.request||!f.response||!p){o.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!f.request,!f.response,!p);return}u.addResponseCorrelationIdHeader(p,f.response);var g=c.CorrelationContextManager.getCurrentContext(),m=new s(f.request,g&&g.operation.parentId);g&&(g.operation.id=m.getOperationId(p.context.tags)||g.operation.id,g.operation.name=m.getOperationName(p.context.tags)||g.operation.name,g.operation.parentId=m.getRequestId()||g.operation.parentId,g.customProperties.addHeaderData(m.getCorrelationContextHeader())),u.endRequest(p,m,f,f.duration,f.error)},u.trackRequest=function(p,f,g){if(!f.request||!f.response||!p){o.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!f.request,!f.response,!p);return}var m=c.CorrelationContextManager.getCurrentContext(),_=g||new s(f.request,m&&m.operation.parentId);a.canIncludeCorrelationHeader(p,_.getUrl())&&u.addResponseCorrelationIdHeader(p,f.response),m&&!g&&(m.operation.id=_.getOperationId(p.context.tags)||m.operation.id,m.operation.name=_.getOperationName(p.context.tags)||m.operation.name,m.operation.parentId=_.getOperationParentId(p.context.tags)||m.operation.parentId,m.customProperties.addHeaderData(_.getCorrelationContextHeader())),f.response.once&&f.response.once("finish",function(){u.endRequest(p,_,f,null,null)}),f.request.on&&f.request.on("error",function(E){u.endRequest(p,_,f,null,E)}),f.request.on&&f.request.on("aborted",function(){var E="The request has been aborted and the network socket has closed.";u.endRequest(p,_,f,null,E)})},u.addResponseCorrelationIdHeader=function(p,f){if(p.config&&p.config.correlationId&&f.getHeader&&f.setHeader&&!f.headersSent){var g=f.getHeader(i.requestContextHeader);a.safeIncludeCorrelationHeader(p,f,g)}},u.endRequest=function(p,f,g,m,_){_?f.onError(_,m):f.onResponse(g.response,m);var E=f.getRequestTelemetry(g);if(E.tagOverrides=f.getRequestTags(p.context.tags),g.tagOverrides)for(var T in g.tagOverrides)E.tagOverrides[T]=g.tagOverrides[T];var w=f.getLegacyRootId();w&&(E.properties.ai_legacyRootId=w),E.contextObjects=E.contextObjects||{},E.contextObjects["http.ServerRequest"]=g.request,E.contextObjects["http.ServerResponse"]=g.response,p.trackRequest(E)},u.prototype.dispose=function(){u.INSTANCE=null,this.enable(!1),this._isInitialized=!1,c.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},u.alreadyAutoCollectedFlag="_appInsightsAutoCollected",u}();t.exports=d}),pE=A((e,t)=>{"use strict";var r=e&&e.__assign||function(){return r=Object.assign||function(d){for(var u,p=1,f=arguments.length;p<f;p++){u=arguments[p];for(var g in u)Object.prototype.hasOwnProperty.call(u,g)&&(d[g]=u[g])}return d},r.apply(this,arguments)},n=require("os"),o=dr(),a=sn(),i=Cr(),s=zt(),c=i.w3cTraceId(),l=function(){function d(){}return d.createQuickPulseEnvelope=function(u,p,f,g){var m=n&&typeof n.hostname=="function"&&n.hostname()||"Unknown",_=g.tags&&g.keys&&g.keys.cloudRoleInstance&&g.tags[g.keys.cloudRoleInstance]||m,E=g.tags&&g.keys&&g.keys.cloudRole&&g.tags[g.keys.cloudRole]||null,T={Documents:p.length>0?p:null,InstrumentationKey:f.instrumentationKey||"",Metrics:u.length>0?u:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:g.tags[g.keys.internalSdkVersion],StreamId:c,MachineName:m,Instance:_,RoleName:E};return T},d.createQuickPulseMetric=function(u){var p;return p={Name:u.name,Value:u.value,Weight:u.count||1},p},d.telemetryEnvelopeToQuickPulseDocument=function(u){switch(u.data.baseType){case o.TelemetryTypeString.Event:return d.createQuickPulseEventDocument(u);case o.TelemetryTypeString.Exception:return d.createQuickPulseExceptionDocument(u);case o.TelemetryTypeString.Trace:return d.createQuickPulseTraceDocument(u);case o.TelemetryTypeString.Dependency:return d.createQuickPulseDependencyDocument(u);case o.TelemetryTypeString.Request:return d.createQuickPulseRequestDocument(u)}return null},d.createQuickPulseEventDocument=function(u){var p=d.createQuickPulseDocument(u),f=u.data.baseData.name,g=r(r({},p),{Name:f});return g},d.createQuickPulseTraceDocument=function(u){var p=d.createQuickPulseDocument(u),f=u.data.baseData.severityLevel||0,g=r(r({},p),{Message:u.data.baseData.message,SeverityLevel:o.SeverityLevel[f]});return g},d.createQuickPulseExceptionDocument=function(u){var p=d.createQuickPulseDocument(u),f=u.data.baseData.exceptions,g="",m="",_="";f&&f.length>0&&(f[0].parsedStack&&f[0].parsedStack.length>0?f[0].parsedStack.forEach(function(T){g+=T.assembly+`
`}):f[0].stack&&f[0].stack.length>0&&(g=f[0].stack),m=f[0].message,_=f[0].typeName);var E=r(r({},p),{Exception:g,ExceptionMessage:m,ExceptionType:_});return E},d.createQuickPulseRequestDocument=function(u){var p=d.createQuickPulseDocument(u),f=u.data.baseData,g=r(r({},p),{Name:f.name,Success:f.success,Duration:f.duration,ResponseCode:f.responseCode,OperationName:f.name});return g},d.createQuickPulseDependencyDocument=function(u){var p=d.createQuickPulseDocument(u),f=u.data.baseData,g=r(r({},p),{Name:f.name,Target:f.target,Success:f.success,Duration:f.duration,ResultCode:f.resultCode,CommandName:f.data,OperationName:p.OperationId,DependencyTypeName:f.type});return g},d.createQuickPulseDocument=function(u){var p,f,g,m;u.data.baseType?(f=a.TelemetryTypeStringToQuickPulseType[u.data.baseType],p=a.TelemetryTypeStringToQuickPulseDocumentType[u.data.baseType]):s.warn("Document type invalid; not sending live metric document",u.data.baseType),g=u.tags[d.keys.operationId],m=d.aggregateProperties(u);var _={DocumentType:p,__type:f,OperationId:g,Version:"1.0",Properties:m};return _},d.aggregateProperties=function(u){var p=[],f=u.data.baseData.measurements||{};for(var g in f)if(f.hasOwnProperty(g)){var m=f[g],_={key:g,value:m};p.push(_)}var E=u.data.baseData.properties||{};for(var g in E)if(E.hasOwnProperty(g)){var m=E[g],_={key:g,value:m};p.push(_)}return p},d.keys=new o.ContextTagKeys,d}();t.exports=l}),fE=A((e,t)=>{"use strict";var r=function(){return(Date.now()+621355968e5)*1e4};t.exports={getTransmissionTime:r}}),hE=A((e,t)=>{"use strict";var r=e&&e.__awaiter||function(u,p,f,g){function m(_){return _ instanceof f?_:new f(function(E){E(_)})}return new(f||(f=Promise))(function(_,E){function T(I){try{R(g.next(I))}catch(H){E(H)}}function w(I){try{R(g.throw(I))}catch(H){E(H)}}function R(I){I.done?_(I.value):m(I.value).then(T,w)}R((g=g.apply(u,p||[])).next())})},n=e&&e.__generator||function(u,p){var f={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},g,m,_,E;return E={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function T(R){return function(I){return w([R,I])}}function w(R){if(g)throw new TypeError("Generator is already executing.");for(;f;)try{if(g=1,m&&(_=R[0]&2?m.return:R[0]?m.throw||((_=m.return)&&_.call(m),0):m.next)&&!(_=_.call(m,R[1])).done)return _;switch(m=0,_&&(R=[R[0]&2,_.value]),R[0]){case 0:case 1:_=R;break;case 4:return f.label++,{value:R[1],done:!1};case 5:f.label++,m=R[1],R=[0];continue;case 7:R=f.ops.pop(),f.trys.pop();continue;default:if(_=f.trys,!(_=_.length>0&&_[_.length-1])&&(R[0]===6||R[0]===2)){f=0;continue}if(R[0]===3&&(!_||R[1]>_[0]&&R[1]<_[3])){f.label=R[1];break}if(R[0]===6&&f.label<_[1]){f.label=_[1],_=R;break}if(_&&f.label<_[2]){f.label=_[2],f.ops.push(R);break}_[2]&&f.ops.pop(),f.trys.pop();continue}R=p.call(u,f)}catch(I){R=[6,I],m=0}finally{g=_=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},o=require("https"),a=Pi(),i=zt(),s=fE(),c=Cr(),l={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},d=function(){function u(p){this._config=p,this._consecutiveErrors=0}return u.prototype.ping=function(p,f,g){var m=[{name:l.streamId,value:p.StreamId},{name:l.machineName,value:p.MachineName},{name:l.roleName,value:p.RoleName},{name:l.instanceName,value:p.Instance},{name:l.invariantVersion,value:p.InvariantVersion.toString()}];this._submitData(p,f,g,"ping",m)},u.prototype.post=function(p,f,g){return r(this,void 0,void 0,function(){return n(this,function(m){switch(m.label){case 0:return[4,this._submitData([p],f,g,"post")];case 1:return m.sent(),[2]}})})},u.prototype._submitData=function(p,f,g,m,_){return r(this,void 0,void 0,function(){var E,T,w,R,I,H=this;return n(this,function(z){return E=JSON.stringify(p),T=(R={},R[a.disableCollectionRequestOption]=!0,R.host=f&&f.length>0?f:this._config.quickPulseHost,R.method=l.method,R.path="/QuickPulseService.svc/"+m+"?ikey="+this._config.instrumentationKey,R.headers=(I={Expect:"100-continue"},I[l.time]=s.getTransmissionTime(),I["Content-Type"]="application/json",I["Content-Length"]=Buffer.byteLength(E),I),R),_&&_.length>0&&_.forEach(function(K){return T.headers[K.name]=K.value}),this._config.httpsAgent?T.agent=this._config.httpsAgent:T.agent=c.tlsRestrictedAgent,w=o.request(T,function(K){if(K.statusCode==200){var J=K.headers[l.subscribed]==="true",te=K.headers[l.endpointRedirect]?K.headers[l.endpointRedirect].toString():null,U=K.headers[l.pollingIntervalHint]?parseInt(K.headers[l.pollingIntervalHint].toString()):null;H._consecutiveErrors=0,g(J,K,te,U)}else H._onError("StatusCode:"+K.statusCode+" StatusMessage:"+K.statusMessage),g()}),w.on("error",function(K){H._onError(K),g()}),w.write(E),w.end(),[2]})})},u.prototype._onError=function(p){this._consecutiveErrors++;var f="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%u.MAX_QPS_FAILURES_BEFORE_WARN===0?(f="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",i.warn(u.TAG,f,p)):i.info(u.TAG,f,p)},u.TAG="QuickPulseSender",u.MAX_QPS_FAILURES_BEFORE_WARN=25,u}();t.exports=d}),gE=A((e,t)=>{"use strict";var r=e&&e.__awaiter||function(d,u,p,f){function g(m){return m instanceof p?m:new p(function(_){_(m)})}return new(p||(p=Promise))(function(m,_){function E(R){try{w(f.next(R))}catch(I){_(I)}}function T(R){try{w(f.throw(R))}catch(I){_(I)}}function w(R){R.done?m(R.value):g(R.value).then(E,T)}w((f=f.apply(d,u||[])).next())})},n=e&&e.__generator||function(d,u){var p={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,g,m,_;return _={next:E(0),throw:E(1),return:E(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function E(w){return function(R){return T([w,R])}}function T(w){if(f)throw new TypeError("Generator is already executing.");for(;p;)try{if(f=1,g&&(m=w[0]&2?g.return:w[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,w[1])).done)return m;switch(g=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return p.label++,{value:w[1],done:!1};case 5:p.label++,g=w[1],w=[0];continue;case 7:w=p.ops.pop(),p.trys.pop();continue;default:if(m=p.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){p=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){p.label=w[1];break}if(w[0]===6&&p.label<m[1]){p.label=m[1],m=w;break}if(m&&p.label<m[2]){p.label=m[2],p.ops.push(w);break}m[2]&&p.ops.pop(),p.trys.pop();continue}w=u.call(d,p)}catch(R){w=[6,R],g=0}finally{f=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},o=zt(),a=pE(),i=hE(),s=sn(),c=vo(),l=function(){function d(u,p){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=u,this.context=p||new c,this._sender=new i(this.config),this._isEnabled=!1}return d.prototype.addCollector=function(u){this._collectors.push(u)},d.prototype.trackMetric=function(u){this._addMetric(u)},d.prototype.addDocument=function(u){var p=a.telemetryEnvelopeToQuickPulseDocument(u);p&&this._documents.push(p)},d.prototype.enable=function(u){u&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!u&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},d.prototype.enableCollectors=function(u){this._collectors.forEach(function(p){p.enable(u)})},d.prototype._addMetric=function(u){var p=u.value,f=u.count||1,g=s.PerformanceToQuickPulseCounter[u.name];g&&(this._metrics[g]?(this._metrics[g].Value=(this._metrics[g].Value*this._metrics[g].Weight+p*f)/(this._metrics[g].Weight+f),this._metrics[g].Weight+=f):(this._metrics[g]=a.createQuickPulseMetric(u),this._metrics[g].Name=g,this._metrics[g].Weight=1))},d.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},d.prototype._goQuickPulse=function(){return r(this,void 0,void 0,function(){var u,p,f,g,m=this;return n(this,function(_){switch(_.label){case 0:return u=Object.keys(this._metrics).map(function(E){return m._metrics[E]}),p=a.createQuickPulseEnvelope(u,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(p)]:[3,2];case 1:return _.sent(),[3,3];case 2:this._ping(p),_.label=3;case 3:return f=this._pollingIntervalHint>0?this._pollingIntervalHint:d.PING_INTERVAL,g=this._isCollectingData?d.POST_INTERVAL:f,this._isCollectingData&&Date.now()-this._lastSuccessTime>=d.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,g=d.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=d.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(g=d.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),g),this._handle.unref(),[2]}})})},d.prototype._ping=function(u){this._sender.ping(u,this._redirectedHost,this._quickPulseDone.bind(this))},d.prototype._post=function(u){return r(this,void 0,void 0,function(){return n(this,function(p){switch(p.label){case 0:return[4,this._sender.post(u,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return p.sent(),[2]}})})},d.prototype._quickPulseDone=function(u,p,f,g){u!=null?(this._isCollectingData!==u&&(o.info("Live Metrics sending data",u),this.enableCollectors(u)),this._isCollectingData=u,f&&f.length>0&&(this._redirectedHost=f,o.info("Redirecting endpoint to: ",f)),g&&g>0&&(this._pollingIntervalHint=g),p&&p.statusCode<300&&p.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},d.MAX_POST_WAIT_TIME=2e4,d.MAX_PING_WAIT_TIME=6e4,d.FALLBACK_INTERVAL=6e4,d.PING_INTERVAL=5e3,d.POST_INTERVAL=1e3,d}();t.exports=l}),mE=A((e,t)=>{"use strict";var r=sn(),n=function(){function o(){}return o.parse=function(a){if(!a)return{};var i=a.split(o._FIELDS_SEPARATOR),s=i.reduce(function(l,d){var u=d.split(o._FIELD_KEY_VALUE_SEPARATOR);if(u.length===2){var p=u[0].toLowerCase(),f=u[1];l[p]=f}return l},{});if(Object.keys(s).length>0){if(s.endpointsuffix){var c=s.location?s.location+".":"";s.ingestionendpoint=s.ingestionendpoint||"https://"+c+"dc."+s.endpointsuffix,s.liveendpoint=s.liveendpoint||"https://"+c+"live."+s.endpointsuffix}s.ingestionendpoint=s.ingestionendpoint||r.DEFAULT_BREEZE_ENDPOINT,s.liveendpoint=s.liveendpoint||r.DEFAULT_LIVEMETRICS_ENDPOINT}return s},o._FIELDS_SEPARATOR=";",o._FIELD_KEY_VALUE_SEPARATOR="=",o}();t.exports=n}),_d=A((e,t)=>{"use strict";var r=Kn(),n=mE(),o=zt(),a=sn(),i=require("url"),s=function(){function c(l){var d=this;this.endpointBase=a.DEFAULT_BREEZE_ENDPOINT;var u=process.env[c.ENV_connectionString],p=n.parse(l),f=n.parse(u),g=!p.instrumentationkey&&Object.keys(p).length>0?null:l;this.instrumentationKey=p.instrumentationkey||g||f.instrumentationkey||c._getInstrumentationKey(),c._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(p.ingestionendpoint||f.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(m){return d.correlationId=m},this.proxyHttpUrl=process.env[c.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[c.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=p.ingestionendpoint||f.ingestionendpoint||process.env[c.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=p.liveendpoint||f.liveendpoint||process.env[c.ENV_quickPulseHost]||a.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=i.parse(this._quickPulseHost).host)}return Object.defineProperty(c.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(l){r.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=l,this.correlationId=r.correlationIdPrefix,r.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(l){this._quickPulseHost=l},enumerable:!1,configurable:!0}),c._getInstrumentationKey=function(){var l=process.env[c.ENV_iKey]||process.env[c.ENV_azurePrefix+c.ENV_iKey]||process.env[c.legacy_ENV_iKey]||process.env[c.ENV_azurePrefix+c.legacy_ENV_iKey];if(!l||l=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return l},c._validateInstrumentationKey=function(l){var d="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",u=new RegExp(d);return u.test(l)},c.ENV_azurePrefix="APPSETTING_",c.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",c.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",c.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",c.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",c.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",c.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",c.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",c.ENV_http_proxy="http_proxy",c.ENV_https_proxy="https_proxy",c}();t.exports=s}),vE=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var s,c=1,l=arguments.length;c<l;c++){s=arguments[c];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(i[d]=s[d])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var r=_d(),n=vo(),o=zt(),a=function(){function i(s){this._disabledMetrics={},i.INSTANCE&&i.INSTANCE.dispose(),i.INSTANCE=this,this._client=s}return i.isNodeVersionCompatible=function(){var s=process.versions.node.split(".");return parseInt(s[0])>=6},i.prototype.enable=function(s,c,l){var d=this;if(c===void 0&&(c={}),l===void 0&&(l=6e4),!!i.isNodeVersionCompatible()){if(i._metricsAvailable==null&&s&&!this._isInitialized)try{var u=require("applicationinsights-native-metrics");i._emitter=new u,i._metricsAvailable=!0,o.info("Native metrics module successfully loaded!")}catch{i._metricsAvailable=!1;return}this._isEnabled=s,this._disabledMetrics=c,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&i._emitter?(i._emitter.enable(!0,l),this._handle||(this._handle=setInterval(function(){return d._trackNativeMetrics()},l),this._handle.unref())):i._emitter&&(i._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},i.prototype.dispose=function(){this.enable(!1)},i.parseEnabled=function(s){var c=process.env[r.ENV_nativeMetricsDisableAll],l=process.env[r.ENV_nativeMetricsDisablers];if(c)return{isEnabled:!1,disabledMetrics:{}};if(l){var d=l.split(","),u={};if(d.length>0)for(var p=0,f=d;p<f.length;p++){var g=f[p];u[g]=!0}return typeof s=="object"?{isEnabled:!0,disabledMetrics:t(t({},s),u)}:{isEnabled:s,disabledMetrics:u}}return typeof s=="boolean"?{isEnabled:s,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:s}},i.prototype._trackNativeMetrics=function(){var s=!0;typeof this._isEnabled!="object"&&(s=this._isEnabled),s&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},i.prototype._trackGarbageCollection=function(){var s;if(!this._disabledMetrics.gc){var c=i._emitter.getGCData();for(var l in c){var d=c[l].metrics,u=l+" Garbage Collection Duration",p=Math.sqrt(d.sumSquares/d.count-Math.pow(d.total/d.count,2))||0;this._client.trackMetric({name:u,value:d.total,count:d.count,max:d.max,min:d.min,stdDev:p,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,s)})}}},i.prototype._trackEventLoop=function(){var s;if(!this._disabledMetrics.loop){var c=i._emitter.getLoopData(),l=c.loopUsage;if(l.count!=0){var d="Event Loop CPU Time",u=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:d,value:l.total,count:l.count,min:l.min,max:l.max,stdDev:u,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,s)})}}},i.prototype._trackHeapUsage=function(){var s,c,l;if(!this._disabledMetrics.heap){var d=process.memoryUsage(),u=d.heapUsed,p=d.heapTotal,f=d.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:u,count:1,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,s)}),this._client.trackMetric({name:"Memory Total (Heap)",value:p,count:1,tagOverrides:(c={},c[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,c)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:f-p,count:1,tagOverrides:(l={},l[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,l)})}},i}();e.AutoCollectNativePerformance=a}),_E=A((e,t)=>{"use strict";var r=zt(),n=function(){function o(a,i,s,c){this._buffer=[],this._lastSend=0,this._isDisabled=a,this._getBatchSize=i,this._getBatchIntervalMs=s,this._sender=c}return o.prototype.setUseDiskRetryCaching=function(a,i,s){this._sender.setDiskRetryMode(a,i,s)},o.prototype.send=function(a){var i=this;if(!this._isDisabled()){if(!a){r.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(a),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){i._timeoutHandle=null,i.triggerSend(!1)},this._getBatchIntervalMs()))}},o.prototype.triggerSend=function(a,i){var s=this._buffer.length<1;s||(a?(this._sender.saveOnCrash(this._buffer),typeof i=="function"&&i("data saved on crash")):this._sender.send(this._buffer,i)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,s&&typeof i=="function"&&i("no data to send")},o}();t.exports=n}),yE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0;function t(r,n){process.env.WEBSITE_SITE_NAME&&(r.tags[n.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}e.azureRoleEnvironmentTelemetryProcessor=t}),EE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var t=dr();function r(o,a){var i=o.sampleRate,s=!1;return i==null||i>=100||o.data&&t.TelemetryType.Metric===t.baseTypeToTelemetryType(o.data.baseType)?!0:(a.correlationContext&&a.correlationContext.operation?s=n(a.correlationContext.operation.id)<i:s=Math.random()*100<i,s)}e.samplingTelemetryProcessor=r;function n(o){var a=-2147483648,i=2147483647,s=5381;if(!o)return 0;for(;o.length<8;)o=o+o;for(var c=0;c<o.length;c++)s=((s<<5)+s|0)+o.charCodeAt(c)|0;return s=s<=a?i:Math.abs(s),s/i*100}e.getSamplingHashCode=n}),bE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var t=Qs(),r=dr();function n(o,a){switch(a&&a.addDocument(o),o.data.baseType){case r.TelemetryTypeString.Exception:t.countException();break;case r.TelemetryTypeString.Request:var i=o.data.baseData;t.countRequest(i.duration,i.success);break;case r.TelemetryTypeString.Dependency:var s=o.data.baseData;t.countDependency(s.duration,s.success);break}return!0}e.performanceMetricsTelemetryProcessor=n}),CE=A(e=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(i){for(var s,c=1,l=arguments.length;c<l;c++){s=arguments[c];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(i[d]=s[d])}return i},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var r=dr(),n=md(),o=dr();function a(i,s){if(n.isEnabled())switch(i.data.baseType){case o.TelemetryTypeString.Exception:var c=i.data.baseData;c.properties=t(t({},c.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var l={cloudRoleInstance:i.tags[s.keys.cloudRoleInstance],cloudRoleName:i.tags[s.keys.cloudRole]};n.countException(l);break;case o.TelemetryTypeString.Trace:var d=i.data.baseData;d.properties=t(t({},d.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var u={cloudRoleInstance:i.tags[s.keys.cloudRoleInstance],cloudRoleName:i.tags[s.keys.cloudRole],traceSeverityLevel:r.SeverityLevel[d.severity]};n.countTrace(u);break;case o.TelemetryTypeString.Request:var p=i.data.baseData;p.properties=t(t({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var f={cloudRoleInstance:i.tags[s.keys.cloudRoleInstance],cloudRoleName:i.tags[s.keys.cloudRole],operationSynthetic:i.tags[s.keys.operationSyntheticSource],requestSuccess:p.success,requestResultCode:p.responseCode};n.countRequest(p.duration,f);break;case o.TelemetryTypeString.Dependency:var g=i.data.baseData;g.properties=t(t({},g.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var m={cloudRoleInstance:i.tags[s.keys.cloudRoleInstance],cloudRoleName:i.tags[s.keys.cloudRole],operationSynthetic:i.tags[s.keys.operationSyntheticSource],dependencySuccess:g.success,dependencyType:g.type,dependencyTarget:g.target,dependencyResultCode:g.resultCode};n.countDependency(g.duration,m);break}return!0}e.preAggregatedMetricsTelemetryProcessor=a}),TE=A(e=>{"use strict";var t=e&&e.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a),Object.defineProperty(n,i,{enumerable:!0,get:function(){return o[a]}})}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=e&&e.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(yE(),e),r(EE(),e),r(bE(),e),r(CE(),e)}),SE=A((e,t)=>{"use strict";var r=e&&e.__awaiter||function(f,g,m,_){function E(T){return T instanceof m?T:new m(function(w){w(T)})}return new(m||(m=Promise))(function(T,w){function R(z){try{H(_.next(z))}catch(K){w(K)}}function I(z){try{H(_.throw(z))}catch(K){w(K)}}function H(z){z.done?T(z.value):E(z.value).then(R,I)}H((_=_.apply(f,g||[])).next())})},n=e&&e.__generator||function(f,g){var m={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},_,E,T,w;return w={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function R(H){return function(z){return I([H,z])}}function I(H){if(_)throw new TypeError("Generator is already executing.");for(;m;)try{if(_=1,E&&(T=H[0]&2?E.return:H[0]?E.throw||((T=E.return)&&T.call(E),0):E.next)&&!(T=T.call(E,H[1])).done)return T;switch(E=0,T&&(H=[H[0]&2,T.value]),H[0]){case 0:case 1:T=H;break;case 4:return m.label++,{value:H[1],done:!1};case 5:m.label++,E=H[1],H=[0];continue;case 7:H=m.ops.pop(),m.trys.pop();continue;default:if(T=m.trys,!(T=T.length>0&&T[T.length-1])&&(H[0]===6||H[0]===2)){m=0;continue}if(H[0]===3&&(!T||H[1]>T[0]&&H[1]<T[3])){m.label=H[1];break}if(H[0]===6&&m.label<T[1]){m.label=T[1],T=H;break}if(T&&m.label<T[2]){m.label=T[2],m.ops.push(H);break}T[2]&&m.ops.pop(),m.trys.pop();continue}H=g.call(f,m)}catch(z){H=[6,z],E=0}finally{_=T=0}if(H[0]&5)throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}},o=require("fs"),a=require("os"),i=require("path"),s=require("zlib"),c=require("child_process"),l=zt(),d=Pi(),u=Cr(),p=function(){function f(g,m,_){if(this._redirectedHost=null,this._config=g,this._onSuccess=m,this._onError=_,this._enableDiskRetryMode=!1,this._resendInterval=f.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=f.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=i.join(a.tmpdir(),f.TEMPDIR_PREFIX+this._config.instrumentationKey),!f.OS_PROVIDES_FILE_PROTECTION)if(f.USE_ICACLS){try{f.OS_PROVIDES_FILE_PROTECTION=o.existsSync(f.ICACLS_PATH)}catch{}f.OS_PROVIDES_FILE_PROTECTION||l.warn(f.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else f.OS_PROVIDES_FILE_PROTECTION=!0}return f.prototype.setDiskRetryMode=function(g,m,_){var E=this;this._enableDiskRetryMode=f.OS_PROVIDES_FILE_PROTECTION&&g,typeof m=="number"&&m>=0&&(this._resendInterval=Math.floor(m)),typeof _=="number"&&_>=0&&(this._maxBytesOnDisk=Math.floor(_)),g&&!f.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(f.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){E._fileCleanupTask()},f.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},f.prototype.send=function(g,m){return r(this,void 0,void 0,function(){var _,E,T,w,R=this;return n(this,function(I){return g&&(_=this._redirectedHost||this._config.endpointUrl,E={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},T="",g.forEach(function(H){var z=R._stringify(H);typeof z=="string"&&(T+=z+`
`)}),T.length>0&&(T=T.substring(0,T.length-1)),w=Buffer.from?Buffer.from(T):new Buffer(T),s.gzip(w,function(H,z){var K=z;H?(l.warn(H),K=w,E.headers["Content-Length"]=w.length.toString()):(E.headers["Content-Encoding"]="gzip",E.headers["Content-Length"]=z.length.toString()),l.info(f.TAG,E),E[d.disableCollectionRequestOption]=!0;var J=function(U){U.setEncoding("utf-8");var V="";U.on("data",function(Q){V+=Q}),U.on("end",function(){if(R._numConsecutiveFailures=0,R._enableDiskRetryMode){if(U.statusCode===200)R._resendTimer||(R._resendTimer=setTimeout(function(){R._resendTimer=null,R._sendFirstFileOnDisk()},R._resendInterval),R._resendTimer.unref());else if(R._isRetriable(U.statusCode))try{var Q=JSON.parse(V),ne=[];Q.errors.forEach(function(de){R._isRetriable(de.statusCode)&&ne.push(g[de.index])}),ne.length>0&&R._storeToDisk(ne)}catch{R._storeToDisk(g)}}if(U.statusCode===307||U.statusCode===308)if(R._numConsecutiveRedirects++,R._numConsecutiveRedirects<10){var ve=U.headers.location?U.headers.location.toString():null;ve&&(R._redirectedHost=ve,R.send(g,m))}else typeof m=="function"&&m("Error sending telemetry because of circular redirects.");else R._numConsecutiveRedirects=0,typeof m=="function"&&m(V),l.info(f.TAG,V),typeof R._onSuccess=="function"&&R._onSuccess(V)})},te=u.makeRequest(R._config,_,E,J);te.on("error",function(U){if(R._numConsecutiveFailures++,!R._enableDiskRetryMode||R._numConsecutiveFailures>0&&R._numConsecutiveFailures%f.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var V="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";R._enableDiskRetryMode&&(V="Ingestion endpoint could not be reached "+R._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(f.TAG,V,u.dumpObj(U))}else{var V="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(f.TAG,V,u.dumpObj(U))}R._onErrorHelper(U),typeof m=="function"&&(U&&m(u.dumpObj(U)),m("Error sending telemetry")),R._enableDiskRetryMode&&R._storeToDisk(g)}),te.write(K),te.end()})),[2]})})},f.prototype.saveOnCrash=function(g){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(g))},f.prototype._isRetriable=function(g){return g===206||g===408||g===429||g===439||g===500||g===503},f.prototype._runICACLS=function(g,m){var _=c.spawn(f.ICACLS_PATH,g,{windowsHide:!0});_.on("error",function(E){return m(E)}),_.on("close",function(E,T){return m(E===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+E+")"))})},f.prototype._runICACLSSync=function(g){if(c.spawnSync){var m=c.spawnSync(f.ICACLS_PATH,g,{windowsHide:!0});if(m.error)throw m.error;if(m.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+m.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},f.prototype._getACLIdentity=function(g){if(f.ACL_IDENTITY)return g(null,f.ACL_IDENTITY);var m=c.spawn(f.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),_="";m.stdout.on("data",function(E){return _+=E}),m.on("error",function(E){return g(E,null)}),m.on("close",function(E,T){return f.ACL_IDENTITY=_&&_.trim(),g(E===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+E+")"),f.ACL_IDENTITY)})},f.prototype._getACLIdentitySync=function(){if(f.ACL_IDENTITY)return f.ACL_IDENTITY;if(c.spawnSync){var g=c.spawnSync(f.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(g.error)throw g.error;if(g.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+g.status+")");return f.ACL_IDENTITY=g.stdout&&g.stdout.toString().trim(),f.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},f.prototype._getACLArguments=function(g,m){return[g,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",m+":(OI)(CI)F","/inheritance:r"]},f.prototype._applyACLRules=function(g,m){var _=this;if(!f.USE_ICACLS)return m(null);if(f.ACLED_DIRECTORIES[g]===void 0)f.ACLED_DIRECTORIES[g]=!1,this._getACLIdentity(function(E,T){if(E)return f.ACLED_DIRECTORIES[g]=!1,m(E);_._runICACLS(_._getACLArguments(g,T),function(w){return f.ACLED_DIRECTORIES[g]=!w,m(w)})});else return m(f.ACLED_DIRECTORIES[g]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},f.prototype._applyACLRulesSync=function(g){if(f.USE_ICACLS){if(f.ACLED_DIRECTORIES[g]===void 0){this._runICACLSSync(this._getACLArguments(g,this._getACLIdentitySync())),f.ACLED_DIRECTORIES[g]=!0;return}else if(!f.ACLED_DIRECTORIES[g])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},f.prototype._confirmDirExists=function(g,m){var _=this;o.lstat(g,function(E,T){E&&E.code==="ENOENT"?o.mkdir(g,function(w){w&&w.code!=="EEXIST"?m(w):_._applyACLRules(g,m)}):!E&&T.isDirectory()?_._applyACLRules(g,m):m(E||new Error("Path existed but was not a directory"))})},f.prototype._getShallowDirectorySize=function(g,m){o.readdir(g,function(_,E){if(_)return m(_,-1);var T=null,w=0,R=0;if(E.length===0){m(null,0);return}for(var I=0;I<E.length;I++)o.stat(i.join(g,E[I]),function(H,z){R++,H?T=H:z.isFile()&&(w+=z.size),R===E.length&&(T?m(T,-1):m(T,w))})})},f.prototype._getShallowDirectorySizeSync=function(g){for(var m=o.readdirSync(g),_=0,E=0;E<m.length;E++)_+=o.statSync(i.join(g,m[E])).size;return _},f.prototype._storeToDisk=function(g){var m=this;l.info(f.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(_){if(_){l.warn(f.TAG,"Error while checking/creating directory: "+(_&&_.message)),m._onErrorHelper(_);return}m._getShallowDirectorySize(m._tempDir,function(E,T){if(E||T<0){l.warn(f.TAG,"Error while checking directory size: "+(E&&E.message)),m._onErrorHelper(E);return}else if(T>m._maxBytesOnDisk){l.warn(f.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+T);return}var w=new Date().getTime()+".ai.json",R=i.join(m._tempDir,w);l.info(f.TAG,"saving data to disk at: "+R),o.writeFile(R,m._stringify(g),{mode:384},function(I){return m._onErrorHelper(I)})})})},f.prototype._storeToDiskSync=function(g){try{l.info(f.TAG,"Checking existence of data storage directory: "+this._tempDir),o.existsSync(this._tempDir)||o.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var m=this._getShallowDirectorySizeSync(this._tempDir);if(m>this._maxBytesOnDisk){l.info(f.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+m);return}var _=new Date().getTime()+".ai.json",E=i.join(this._tempDir,_);l.info(f.TAG,"saving data before crash to disk at: "+E),o.writeFileSync(E,g,{mode:384})}catch(T){l.warn(f.TAG,"Error while saving data to disk: "+(T&&T.message)),this._onErrorHelper(T)}},f.prototype._sendFirstFileOnDisk=function(){var g=this;o.exists(this._tempDir,function(m){m&&o.readdir(g._tempDir,function(_,E){if(_)g._onErrorHelper(_);else if(E=E.filter(function(R){return i.basename(R).indexOf(".ai.json")>-1}),E.length>0){var T=E[0],w=i.join(g._tempDir,T);o.readFile(w,function(R,I){R?g._onErrorHelper(R):o.unlink(w,function(H){if(H)g._onErrorHelper(H);else try{var z=JSON.parse(I.toString());g.send(z)}catch(K){l.warn("Failed to read persisted file",K)}})})}})})},f.prototype._onErrorHelper=function(g){typeof this._onError=="function"&&this._onError(g)},f.prototype._stringify=function(g){try{return JSON.stringify(g)}catch(m){l.warn("Failed to serialize payload",m,g)}},f.prototype._fileCleanupTask=function(){var g=this;o.exists(this._tempDir,function(m){m&&o.readdir(g._tempDir,function(_,E){_?g._onErrorHelper(_):(E=E.filter(function(T){return i.basename(T).indexOf(".ai.json")>-1}),E.length>0&&E.forEach(function(T){var w=new Date(parseInt(T.split(".ai.json")[0])),R=new Date(+new Date-f.FILE_RETEMPTION_PERIOD)>w;if(R){var I=i.join(g._tempDir,T);o.unlink(I,function(H){H&&g._onErrorHelper(H)})}}))})})},f.TAG="Sender",f.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",f.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",f.ACLED_DIRECTORIES={},f.ACL_IDENTITY=null,f.WAIT_BETWEEN_RESEND=60*1e3,f.MAX_BYTES_ON_DISK=50*1024*1024,f.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,f.CLEANUP_TIMEOUT=60*60*1e3,f.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,f.TEMPDIR_PREFIX="appInsights-node",f.OS_PROVIDES_FILE_PROTECTION=!1,f.USE_ICACLS=a.type()==="Windows_NT",f}();t.exports=p}),RE=A((e,t)=>{"use strict";var r=dr(),n=Cr(),o=zn(),a=function(){function s(){}return s.createEnvelope=function(c,l,d,u,p){var f=null;switch(l){case r.TelemetryType.Trace:f=s.createTraceData(c);break;case r.TelemetryType.Dependency:f=s.createDependencyData(c);break;case r.TelemetryType.Event:f=s.createEventData(c);break;case r.TelemetryType.Exception:f=s.createExceptionData(c);break;case r.TelemetryType.Request:f=s.createRequestData(c);break;case r.TelemetryType.Metric:f=s.createMetricData(c);break;case r.TelemetryType.Availability:f=s.createAvailabilityData(c);break;case r.TelemetryType.PageView:f=s.createPageViewData(c);break}if(d&&r.domainSupportsProperties(f.baseData)){if(f&&f.baseData)if(!f.baseData.properties)f.baseData.properties=d;else for(var g in d)f.baseData.properties[g]||(f.baseData.properties[g]=d[g]);f.baseData.properties=n.validateStringMap(f.baseData.properties)}var m=p&&p.instrumentationKey||"",_=new r.Envelope;return _.data=f,_.iKey=m,_.name="Microsoft.ApplicationInsights."+m.replace(/-/g,"")+"."+f.baseType.substr(0,f.baseType.length-4),_.tags=this.getTags(u,c.tagOverrides),_.time=new Date().toISOString(),_.ver=1,_.sampleRate=p?p.samplingPercentage:100,l===r.TelemetryType.Metric&&(_.sampleRate=100),_},s.createTraceData=function(c){var l=new r.MessageData;l.message=c.message,l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Information:l.severityLevel=c.severity;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Trace),d.baseData=l,d},s.createDependencyData=function(c){var l=new r.RemoteDependencyData;typeof c.name=="string"&&(l.name=c.name.length>1024?c.name.slice(0,1021)+"...":c.name),l.data=c.data,l.target=c.target,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.type=c.dependencyTypeName,l.properties=c.properties,l.resultCode=c.resultCode?c.resultCode+"":"",c.id?l.id=c.id:l.id=n.w3cTraceId();var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Dependency),d.baseData=l,d},s.createEventData=function(c){var l=new r.EventData;l.name=c.name,l.properties=c.properties,l.measurements=c.measurements;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Event),d.baseData=l,d},s.createExceptionData=function(c){var l=new r.ExceptionData;l.properties=c.properties,isNaN(c.severity)?l.severityLevel=r.SeverityLevel.Error:l.severityLevel=c.severity,l.measurements=c.measurements,l.exceptions=[];var d=c.exception.stack,u=new r.ExceptionDetails;u.message=c.exception.message,u.typeName=c.exception.name,u.parsedStack=this.parseStack(d),u.hasFullStack=n.isArray(u.parsedStack)&&u.parsedStack.length>0,l.exceptions.push(u);var p=new r.Data;return p.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Exception),p.baseData=l,p},s.createRequestData=function(c){var l=new r.RequestData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.url=c.url,l.source=c.source,l.duration=n.msToTimeSpan(c.duration),l.responseCode=c.resultCode?c.resultCode+"":"",l.success=c.success,l.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Request),d.baseData=l,d},s.createMetricData=function(c){var l=new r.MetricData;l.metrics=[];var d=new r.DataPoint;d.count=isNaN(c.count)?1:c.count,d.kind=r.DataPointType.Aggregation,d.max=isNaN(c.max)?c.value:c.max,d.min=isNaN(c.min)?c.value:c.min,d.name=c.name,d.stdDev=isNaN(c.stdDev)?0:c.stdDev,d.value=c.value,l.metrics.push(d),l.properties=c.properties;var u=new r.Data;return u.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Metric),u.baseData=l,u},s.createAvailabilityData=function(c){var l=new r.AvailabilityData;c.id?l.id=c.id:l.id=n.w3cTraceId(),l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.success=c.success,l.runLocation=c.runLocation,l.message=c.message,l.measurements=c.measurements,l.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.Availability),d.baseData=l,d},s.createPageViewData=function(c){var l=new r.PageViewData;l.name=c.name,l.duration=n.msToTimeSpan(c.duration),l.url=c.url,l.measurements=c.measurements,l.properties=c.properties;var d=new r.Data;return d.baseType=r.telemetryTypeToBaseType(r.TelemetryType.PageView),d.baseData=l,d},s.getTags=function(c,l){var d=o.CorrelationContextManager.getCurrentContext(),u={};if(c&&c.tags)for(var p in c.tags)u[p]=c.tags[p];if(l)for(var p in l)u[p]=l[p];return d&&(u[c.keys.operationId]=u[c.keys.operationId]||d.operation.id,u[c.keys.operationName]=u[c.keys.operationName]||d.operation.name,u[c.keys.operationParentId]=u[c.keys.operationParentId]||d.operation.parentId),u},s.parseStack=function(c){var l=void 0;if(typeof c=="string"){var d=c.split(`
`);l=[];for(var u=0,p=0,f=0;f<=d.length;f++){var g=d[f];if(i.regex.test(g)){var m=new i(d[f],u++);p+=m.sizeInBytes,l.push(m)}}var _=32*1024;if(p>_)for(var E=0,T=l.length-1,w=0,R=E,I=T;E<T;){var H=l[E].sizeInBytes,z=l[T].sizeInBytes;if(w+=H+z,w>_){var K=I-R+1;l.splice(R,K);break}R=E,I=T,E++,T--}}return l},s}(),i=function(){function s(c,l){this.sizeInBytes=0,this.level=l,this.method="<no_method>",this.assembly=n.trim(c);var d=c.match(s.regex);d&&d.length>=5&&(this.method=n.trim(d[2])||this.method,this.fileName=n.trim(d[4])||"<no_filename>",this.line=parseInt(d[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=s.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return s.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,s.baseSize=58,s}();t.exports=a}),wE=A((e,t)=>{"use strict";var r=require("url"),n=_d(),o=vo(),a=dr(),i=_E(),s=TE(),c=zn(),l=SE(),d=Cr(),u=zt(),p=RE(),f=function(){function g(m){this._telemetryProcessors=[],this._enableAzureProperties=!1;var _=new n(m);this.config=_,this.context=new o,this.commonProperties={};var E=new l(this.config);this.channel=new i(function(){return _.disableAppInsights},function(){return _.maxBatchSize},function(){return _.maxBatchIntervalMs},E)}return g.prototype.trackAvailability=function(m){this.track(m,a.TelemetryType.Availability)},g.prototype.trackPageView=function(m){this.track(m,a.TelemetryType.PageView)},g.prototype.trackTrace=function(m){this.track(m,a.TelemetryType.Trace)},g.prototype.trackMetric=function(m){this.track(m,a.TelemetryType.Metric)},g.prototype.trackException=function(m){m&&m.exception&&!d.isError(m.exception)&&(m.exception=new Error(m.exception.toString())),this.track(m,a.TelemetryType.Exception)},g.prototype.trackEvent=function(m){this.track(m,a.TelemetryType.Event)},g.prototype.trackRequest=function(m){this.track(m,a.TelemetryType.Request)},g.prototype.trackDependency=function(m){m&&!m.target&&m.data&&(m.target=r.parse(m.data).host),this.track(m,a.TelemetryType.Dependency)},g.prototype.flush=function(m){this.channel.triggerSend(m?!!m.isAppCrashing:!1,m?m.callback:void 0)},g.prototype.track=function(m,_){if(m&&a.telemetryTypeToBaseType(_)){var E=p.createEnvelope(m,_,this.commonProperties,this.context,this.config);m.time&&(E.time=m.time.toISOString()),this._enableAzureProperties&&s.azureRoleEnvironmentTelemetryProcessor(E,this.context);var T=this.runTelemetryProcessors(E,m.contextObjects);T=T&&s.samplingTelemetryProcessor(E,{correlationContext:c.CorrelationContextManager.getCurrentContext()}),s.preAggregatedMetricsTelemetryProcessor(E,this.context),T&&(s.performanceMetricsTelemetryProcessor(E,this.quickPulseClient),this.channel.send(E))}else u.warn("track() requires telemetry object and telemetryType to be specified.")},g.prototype.setAutoPopulateAzureProperties=function(m){this._enableAzureProperties=m},g.prototype.addTelemetryProcessor=function(m){this._telemetryProcessors.push(m)},g.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},g.prototype.runTelemetryProcessors=function(m,_){var E=!0,T=this._telemetryProcessors.length;if(T===0)return E;_=_||{},_.correlationContext=c.CorrelationContextManager.getCurrentContext();for(var w=0;w<T;++w)try{var R=this._telemetryProcessors[w];if(R&&R.apply(null,[m,_])===!1){E=!1;break}}catch(I){E=!0,u.warn("One of telemetry processors failed, telemetry item will be sent.",I,m)}return E&&(m&&m.tags&&(m.tags=d.validateStringMap(m.tags)),m&&m.data&&m.data.baseData&&m.data.baseData.properties&&(m.data.baseData.properties=d.validateStringMap(m.data.baseData.properties))),E},g}();t.exports=f}),PE=A((e,t)=>{"use strict";var r=e&&e.__extends||function(){var c=function(l,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var f in p)Object.prototype.hasOwnProperty.call(p,f)&&(u[f]=p[f])},c(l,d)};return function(l,d){c(l,d);function u(){this.constructor=l}l.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}(),n=wE(),o=vd(),a=Pi(),i=zt(),s=function(c){r(l,c);function l(){return c!==null&&c.apply(this,arguments)||this}return l.prototype.trackNodeHttpRequestSync=function(d){d&&d.request&&d.response&&d.duration?o.trackRequestSync(this,d):i.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},l.prototype.trackNodeHttpRequest=function(d){(d.duration||d.error)&&i.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),d&&d.request&&d.response?o.trackRequest(this,d):i.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},l.prototype.trackNodeHttpDependency=function(d){d&&d.request?a.trackRequest(this,d):i.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},l}(n);t.exports=s}),OE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),IE=A(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var t=zn(),r=eE(),n=tE(),o=Qs(),a=md(),i=dE(),s=Pi(),c=vd(),l=Kn(),d=zt(),u=gE(),p=vE();e.TelemetryClient=PE(),e.Contracts=dr(),e.azureFunctionsTypes=OE();var f;(function(Oe){Oe[Oe.AI=0]="AI",Oe[Oe.AI_AND_W3C=1]="AI_AND_W3C"})(f=e.DistributedTracingModes||(e.DistributedTracingModes={}));var g=!0,m=!1,_=!0,E=!0,T=!0,w=!1,R=!0,I=!0,H=!0,z=!0,K,J=!1,te=!0,U,V=void 0,Q=void 0,ne,ve,de,X,ce,ie,pe,he,be=!1,_e;function Be(Oe){return e.defaultClient?d.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(Oe),ne=new r(e.defaultClient),ve=new n(e.defaultClient),de=new o(e.defaultClient),X=new a(e.defaultClient),ce=new i(e.defaultClient),pe=new c(e.defaultClient),he=new s(e.defaultClient),ie||(ie=new p.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(H,V,Q),it}e.setup=Be;function Je(){return e.defaultClient?(be=!0,ne.enable(g,m),ve.enable(_),de.enable(E),X.enable(T),ce.enable(w,e.defaultClient.config),ie.enable(te,U),pe.useAutoCorrelation(z,K),pe.enable(R),he.enable(I),e.liveMetricsClient&&J&&e.liveMetricsClient.enable(J)):d.warn("Start cannot be called before setup"),it}e.start=Je;function ze(){return z?t.CorrelationContextManager.getCurrentContext():null}e.getCorrelationContext=ze;function Fe(Oe,me){return t.CorrelationContextManager.startOperation(Oe,me)}e.startOperation=Fe;function xe(Oe,me){return t.CorrelationContextManager.wrapCallback(Oe,me)}e.wrapWithCorrelationContext=xe;var it=function(){function Oe(){}return Oe.setDistributedTracingMode=function(me){return l.w3cEnabled=me===f.AI_AND_W3C,Oe},Oe.setAutoCollectConsole=function(me,Ae){return Ae===void 0&&(Ae=!1),g=me,m=Ae,be&&ne.enable(me,Ae),Oe},Oe.setAutoCollectExceptions=function(me){return _=me,be&&ve.enable(me),Oe},Oe.setAutoCollectPerformance=function(me,Ae){Ae===void 0&&(Ae=!0),E=me;var Me=p.AutoCollectNativePerformance.parseEnabled(Ae);return te=Me.isEnabled,U=Me.disabledMetrics,be&&(de.enable(me),ie.enable(Me.isEnabled,Me.disabledMetrics)),Oe},Oe.setAutoCollectPreAggregatedMetrics=function(me){return T=me,be&&X.enable(me),Oe},Oe.setAutoCollectHeartbeat=function(me){return w=me,be&&ce.enable(me,e.defaultClient.config),Oe},Oe.setAutoCollectRequests=function(me){return R=me,be&&pe.enable(me),Oe},Oe.setAutoCollectDependencies=function(me){return I=me,be&&he.enable(me),Oe},Oe.setAutoDependencyCorrelation=function(me,Ae){return z=me,K=Ae,be&&pe.useAutoCorrelation(me,Ae),Oe},Oe.setUseDiskRetryCaching=function(me,Ae,Me){return H=me,V=Ae,Q=Me,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(me,Ae,Me),Oe},Oe.setInternalLogging=function(me,Ae){return me===void 0&&(me=!1),Ae===void 0&&(Ae=!0),d.enableDebug=me,d.disableWarnings=!Ae,Oe},Oe.setSendLiveMetrics=function(me){return me===void 0&&(me=!1),e.defaultClient?(!e.liveMetricsClient&&me?(e.liveMetricsClient=new u(e.defaultClient.config,null),_e=new o(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(_e),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(me),J=me,Oe):(d.warn("Live metrics client cannot be setup without the default client"),Oe)},Oe.start=Je,Oe}();e.Configuration=it;function ut(){l.w3cEnabled=!0,e.defaultClient=null,be=!1,ne&&ne.dispose(),ve&&ve.dispose(),de&&de.dispose(),X&&X.dispose(),ce&&ce.dispose(),ie&&ie.dispose(),pe&&pe.dispose(),he&&he.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),J=!1,e.liveMetricsClient=void 0)}e.dispose=ut}),yd={};av(yd,{default:()=>NE});Ed.exports=cv(yd);var Hs=Ci(require("os")),Wn=Ci(require("vscode")),Ot=Ci(require("vscode")),ho=Ci(require("vscode"));function Ei(){let e="telemetry",t="enableTelemetry";try{let r=ho.env.telemetryConfiguration;return r.isUsageEnabled&&r.isErrorsEnabled&&r.isCrashEnabled?"on":r.isErrorsEnabled&&r.isCrashEnabled?"error":"off"}catch{return ho.env.isTelemetryEnabled!==void 0?ho.env.isTelemetryEnabled?"on":"off":ho.workspace.getConfiguration(e).get(t)?"on":"off"}}var DE=class{constructor(e,t,r,n,o){this.extensionId=e,this.extensionVersion=t,this.telemetryAppender=r,this.osShim=n,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!o,this.updateUserOptStatus(),Ot.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(Ot.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(Ot.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(Ot.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let e=Ei();this.userOptIn=e==="on",this.errorOptIn=e==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let t="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(r=>{e.indexOf(`${r}`)===0&&(t=r)}),t}get extension(){return this._extension===void 0&&(this._extension=Ot.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,t){if(e===null||typeof e!="object"||typeof t!="function")return e;let r={};for(let n in e)r[n]=t(n,e[n]);return r}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(Ot.env.remoteName&&this.cleanRemoteName(Ot.env.remoteName)==="other"):!0}getCommonProperties(){let e=Object.create(null);if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,Ot&&Ot.env){switch(e["common.vscodemachineid"]=Ot.env.machineId,e["common.vscodesessionid"]=Ot.env.sessionId,e["common.vscodeversion"]=Ot.version,e["common.isnewappinstall"]=Ot.env.isNewAppInstall?Ot.env.isNewAppInstall.toString():"false",e["common.product"]=Ot.env.appHost,Ot.env.uiKind){case Ot.UIKind.Web:e["common.uikind"]="web";break;case Ot.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(Ot.env.remoteName)}return e}anonymizeFilePaths(e,t){let r;if(e==null)return"";let n=[];Ot.env.appRoot!==""&&n.push(new RegExp(Ot.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let o=e;if(t){let a=[];for(let l of n)for(;(r=l.exec(e))&&r;)a.push([r.index,l.lastIndex]);let i=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,c=0;for(o="";(r=s.exec(e))&&r;)r[0]&&!i.test(r[0])&&a.every(([l,d])=>r.index<l||r.index>=d)&&(o+=e.substring(c,r.index)+"<REDACTED: user-file-path>",c=s.lastIndex);c<e.length&&(o+=e.substr(c))}for(let a of n)o=o.replace(a,"");return o}removePropertiesWithPossibleUserInfo(e){if(typeof e!="object")return;let t=Object.create(null);for(let r of Object.keys(e)){let n=e[r];if(!n)continue;let o=/@[a-zA-Z0-9-.]+/,a=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,i=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;a.test(n.toLowerCase())?t[r]="<REDACTED: secret>":o.test(n)?t[r]="<REDACTED: email>":i.test(n)?t[r]="<REDACTED: token>":t[r]=n}return t}get telemetryLevel(){switch(Ei()){case"on":return"all";case"error":return"error";case"off":return"off"}}sendTelemetryEvent(e,t,r){if(this.userOptIn&&e!==""){t=nn(nn({},t),this.getCommonProperties());let n=this.cloneAndChange(t,(o,a)=>this.anonymizeFilePaths(a,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}sendRawTelemetryEvent(e,t,r){this.userOptIn&&e!==""&&(t=nn(nn({},t),this.getCommonProperties()),this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:t,measurements:r}))}sendTelemetryErrorEvent(e,t,r,n){if(this.errorOptIn&&e!==""){t=nn(nn({},t),this.getCommonProperties());let o=this.cloneAndChange(t,(a,i)=>this.shouldSendErrorTelemetry()?this.anonymizeFilePaths(i,this.firstParty):n===void 0||n.indexOf(a)!==-1?"REDACTED":this.anonymizeFilePaths(i,this.firstParty));this.telemetryAppender.logEvent(`${this.extensionId}/${e}`,{properties:this.removePropertiesWithPossibleUserInfo(o),measurements:r})}}sendTelemetryException(e,t,r){if(this.shouldSendErrorTelemetry()&&this.errorOptIn&&e){t=nn(nn({},t),this.getCommonProperties());let n=this.cloneAndChange(t,(o,a)=>this.anonymizeFilePaths(a,this.firstParty));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),this.telemetryAppender.logException(e,{properties:this.removePropertiesWithPossibleUserInfo(n),measurements:r})}}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(e=>e.dispose()))}},AE=class{constructor(e,t){this._isInstantiated=!1,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=t,this._key=e,Ei()!=="off"&&this.instantiateAppender()}logEvent(e,t){if(!this._telemetryClient){!this._isInstantiated&&Ei()==="on"&&this._eventQueue.push({eventName:e,data:t});return}this._telemetryClient.logEvent(e,t)}logException(e,t){if(!this._telemetryClient){!this._isInstantiated&&Ei()!=="off"&&this._exceptionQueue.push({exception:e,data:t});return}this._telemetryClient.logException(e,t)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:t})=>this.logEvent(e,t)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:t})=>this.logException(e,t)),this._exceptionQueue=[]}instantiateAppender(){this._isInstantiated||this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._isInstantiated=!0,this._flushQueues()}).catch(e=>{console.error(e)})}},xE=async e=>{let t;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let r=await Promise.resolve().then(()=>Ci(IE()));r.defaultClient?(t=new r.TelemetryClient(e),t.channel.setUseDiskRetryCaching(!0)):(r.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),t=r.defaultClient),Wn&&Wn.env&&(t.context.tags[t.context.keys.userId]=Wn.env.machineId,t.context.tags[t.context.keys.sessionId]=Wn.env.sessionId,t.context.tags[t.context.keys.cloudRole]=Wn.env.appName,t.context.tags[t.context.keys.cloudRoleInstance]=Wn.env.appName),e&&e.indexOf("AIF-")===0&&(t.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1")}catch(r){return Promise.reject(`Failed to initialize app insights!
`+r.message)}return{logEvent:(r,n)=>{try{t?.trackEvent({name:r,properties:n?.properties,measurements:n?.measurements})}catch(o){throw new Error(`Failed to log event to app insights!
`+o.message)}},logException:(r,n)=>{try{t?.trackException({exception:r,properties:n?.properties,measurements:n?.measurements})}catch(o){throw new Error(`Failed to log exception to app insights!
`+o.message)}},flush:async()=>{try{t?.flush()}catch(r){throw new Error(`Failed to flush app insights!
`+r.message)}}}},NE=class extends DE{constructor(e,t,r,n){let o=new AE(r,xE);r&&r.indexOf("AIF-")===0&&(n=!0),super(e,t,o,{release:Hs.release(),platform:Hs.platform(),architecture:Hs.arch()},n)}}});var Oi=ee((LP,Cd)=>{var kE="2.0.0",ME=Number.MAX_SAFE_INTEGER||9007199254740991,qE=16;Cd.exports={SEMVER_SPEC_VERSION:kE,MAX_LENGTH:256,MAX_SAFE_INTEGER:ME,MAX_SAFE_COMPONENT_LENGTH:qE}});var Ii=ee((jP,Td)=>{var LE=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};Td.exports=LE});var Pn=ee((an,Sd)=>{var{MAX_SAFE_COMPONENT_LENGTH:Js}=Oi(),jE=Ii();an=Sd.exports={};var FE=an.re=[],Te=an.src=[],Se=an.t={},HE=0,We=(e,t,r)=>{let n=HE++;jE(n,t),Se[e]=n,Te[n]=t,FE[n]=new RegExp(t,r?"g":void 0)};We("NUMERICIDENTIFIER","0|[1-9]\\d*");We("NUMERICIDENTIFIERLOOSE","[0-9]+");We("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");We("MAINVERSION",`(${Te[Se.NUMERICIDENTIFIER]})\\.(${Te[Se.NUMERICIDENTIFIER]})\\.(${Te[Se.NUMERICIDENTIFIER]})`);We("MAINVERSIONLOOSE",`(${Te[Se.NUMERICIDENTIFIERLOOSE]})\\.(${Te[Se.NUMERICIDENTIFIERLOOSE]})\\.(${Te[Se.NUMERICIDENTIFIERLOOSE]})`);We("PRERELEASEIDENTIFIER",`(?:${Te[Se.NUMERICIDENTIFIER]}|${Te[Se.NONNUMERICIDENTIFIER]})`);We("PRERELEASEIDENTIFIERLOOSE",`(?:${Te[Se.NUMERICIDENTIFIERLOOSE]}|${Te[Se.NONNUMERICIDENTIFIER]})`);We("PRERELEASE",`(?:-(${Te[Se.PRERELEASEIDENTIFIER]}(?:\\.${Te[Se.PRERELEASEIDENTIFIER]})*))`);We("PRERELEASELOOSE",`(?:-?(${Te[Se.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Te[Se.PRERELEASEIDENTIFIERLOOSE]})*))`);We("BUILDIDENTIFIER","[0-9A-Za-z-]+");We("BUILD",`(?:\\+(${Te[Se.BUILDIDENTIFIER]}(?:\\.${Te[Se.BUILDIDENTIFIER]})*))`);We("FULLPLAIN",`v?${Te[Se.MAINVERSION]}${Te[Se.PRERELEASE]}?${Te[Se.BUILD]}?`);We("FULL",`^${Te[Se.FULLPLAIN]}$`);We("LOOSEPLAIN",`[v=\\s]*${Te[Se.MAINVERSIONLOOSE]}${Te[Se.PRERELEASELOOSE]}?${Te[Se.BUILD]}?`);We("LOOSE",`^${Te[Se.LOOSEPLAIN]}$`);We("GTLT","((?:<|>)?=?)");We("XRANGEIDENTIFIERLOOSE",`${Te[Se.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);We("XRANGEIDENTIFIER",`${Te[Se.NUMERICIDENTIFIER]}|x|X|\\*`);We("XRANGEPLAIN",`[v=\\s]*(${Te[Se.XRANGEIDENTIFIER]})(?:\\.(${Te[Se.XRANGEIDENTIFIER]})(?:\\.(${Te[Se.XRANGEIDENTIFIER]})(?:${Te[Se.PRERELEASE]})?${Te[Se.BUILD]}?)?)?`);We("XRANGEPLAINLOOSE",`[v=\\s]*(${Te[Se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Te[Se.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Te[Se.XRANGEIDENTIFIERLOOSE]})(?:${Te[Se.PRERELEASELOOSE]})?${Te[Se.BUILD]}?)?)?`);We("XRANGE",`^${Te[Se.GTLT]}\\s*${Te[Se.XRANGEPLAIN]}$`);We("XRANGELOOSE",`^${Te[Se.GTLT]}\\s*${Te[Se.XRANGEPLAINLOOSE]}$`);We("COERCE",`(^|[^\\d])(\\d{1,${Js}})(?:\\.(\\d{1,${Js}}))?(?:\\.(\\d{1,${Js}}))?(?:$|[^\\d])`);We("COERCERTL",Te[Se.COERCE],!0);We("LONETILDE","(?:~>?)");We("TILDETRIM",`(\\s*)${Te[Se.LONETILDE]}\\s+`,!0);an.tildeTrimReplace="$1~";We("TILDE",`^${Te[Se.LONETILDE]}${Te[Se.XRANGEPLAIN]}$`);We("TILDELOOSE",`^${Te[Se.LONETILDE]}${Te[Se.XRANGEPLAINLOOSE]}$`);We("LONECARET","(?:\\^)");We("CARETTRIM",`(\\s*)${Te[Se.LONECARET]}\\s+`,!0);an.caretTrimReplace="$1^";We("CARET",`^${Te[Se.LONECARET]}${Te[Se.XRANGEPLAIN]}$`);We("CARETLOOSE",`^${Te[Se.LONECARET]}${Te[Se.XRANGEPLAINLOOSE]}$`);We("COMPARATORLOOSE",`^${Te[Se.GTLT]}\\s*(${Te[Se.LOOSEPLAIN]})$|^$`);We("COMPARATOR",`^${Te[Se.GTLT]}\\s*(${Te[Se.FULLPLAIN]})$|^$`);We("COMPARATORTRIM",`(\\s*)${Te[Se.GTLT]}\\s*(${Te[Se.LOOSEPLAIN]}|${Te[Se.XRANGEPLAIN]})`,!0);an.comparatorTrimReplace="$1$2$3";We("HYPHENRANGE",`^\\s*(${Te[Se.XRANGEPLAIN]})\\s+-\\s+(${Te[Se.XRANGEPLAIN]})\\s*$`);We("HYPHENRANGELOOSE",`^\\s*(${Te[Se.XRANGEPLAINLOOSE]})\\s+-\\s+(${Te[Se.XRANGEPLAINLOOSE]})\\s*$`);We("STAR","(<|>)?=?\\s*\\*");We("GTE0","^\\s*>=\\s*0.0.0\\s*$");We("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var Di=ee((FP,Rd)=>{var $E=["includePrerelease","loose","rtl"],UE=e=>e?typeof e!="object"?{loose:!0}:$E.filter(t=>e[t]).reduce((t,r)=>(t[r]=!0,t),{}):{};Rd.exports=UE});var _o=ee((HP,Od)=>{var wd=/^[0-9]+$/,Pd=(e,t)=>{let r=wd.test(e),n=wd.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},BE=(e,t)=>Pd(t,e);Od.exports={compareIdentifiers:Pd,rcompareIdentifiers:BE}});var tr=ee(($P,xd)=>{var yo=Ii(),{MAX_LENGTH:Id,MAX_SAFE_INTEGER:Eo}=Oi(),{re:Dd,t:Ad}=Pn(),VE=Di(),{compareIdentifiers:Ai}=_o(),mr=class{constructor(t,r){if(r=VE(r),t instanceof mr){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>Id)throw new TypeError(`version is longer than ${Id} characters`);yo("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?Dd[Ad.LOOSE]:Dd[Ad.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Eo||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Eo||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Eo||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let a=+o;if(a>=0&&a<Eo)return a}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(yo("SemVer.compare",this.version,this.options,t),!(t instanceof mr)){if(typeof t=="string"&&t===this.version)return 0;t=new mr(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof mr||(t=new mr(t,this.options)),Ai(this.major,t.major)||Ai(this.minor,t.minor)||Ai(this.patch,t.patch)}comparePre(t){if(t instanceof mr||(t=new mr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],o=t.prerelease[r];if(yo("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Ai(n,o)}while(++r)}compareBuild(t){t instanceof mr||(t=new mr(t,this.options));let r=0;do{let n=this.build[r],o=t.build[r];if(yo("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Ai(n,o)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};xd.exports=mr});var On=ee((UP,qd)=>{var{MAX_LENGTH:GE}=Oi(),{re:Nd,t:kd}=Pn(),Md=tr(),WE=Di(),KE=(e,t)=>{if(t=WE(t),e instanceof Md)return e;if(typeof e!="string"||e.length>GE||!(t.loose?Nd[kd.LOOSE]:Nd[kd.FULL]).test(e))return null;try{return new Md(e,t)}catch{return null}};qd.exports=KE});var jd=ee((BP,Ld)=>{var zE=On(),XE=(e,t)=>{let r=zE(e,t);return r?r.version:null};Ld.exports=XE});var Hd=ee((VP,Fd)=>{var YE=On(),QE=(e,t)=>{let r=YE(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};Fd.exports=QE});var Ud=ee((GP,$d)=>{var JE=tr(),ZE=(e,t,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new JE(e,r).inc(t,n).version}catch{return null}};$d.exports=ZE});var Tr=ee((WP,Vd)=>{var Bd=tr(),eb=(e,t,r)=>new Bd(e,r).compare(new Bd(t,r));Vd.exports=eb});var bo=ee((KP,Gd)=>{var tb=Tr(),rb=(e,t,r)=>tb(e,t,r)===0;Gd.exports=rb});var zd=ee((zP,Kd)=>{var Wd=On(),nb=bo(),ib=(e,t)=>{if(nb(e,t))return null;{let r=Wd(e),n=Wd(t),o=r.prerelease.length||n.prerelease.length,a=o?"pre":"",i=o?"prerelease":"";for(let s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return a+s;return i}};Kd.exports=ib});var Yd=ee((XP,Xd)=>{var ob=tr(),sb=(e,t)=>new ob(e,t).major;Xd.exports=sb});var Jd=ee((YP,Qd)=>{var ab=tr(),cb=(e,t)=>new ab(e,t).minor;Qd.exports=cb});var ep=ee((QP,Zd)=>{var ub=tr(),lb=(e,t)=>new ub(e,t).patch;Zd.exports=lb});var rp=ee((JP,tp)=>{var db=On(),pb=(e,t)=>{let r=db(e,t);return r&&r.prerelease.length?r.prerelease:null};tp.exports=pb});var ip=ee((ZP,np)=>{var fb=Tr(),hb=(e,t,r)=>fb(t,e,r);np.exports=hb});var sp=ee((eO,op)=>{var gb=Tr(),mb=(e,t)=>gb(e,t,!0);op.exports=mb});var Co=ee((tO,cp)=>{var ap=tr(),vb=(e,t,r)=>{let n=new ap(e,r),o=new ap(t,r);return n.compare(o)||n.compareBuild(o)};cp.exports=vb});var lp=ee((rO,up)=>{var _b=Co(),yb=(e,t)=>e.sort((r,n)=>_b(r,n,t));up.exports=yb});var pp=ee((nO,dp)=>{var Eb=Co(),bb=(e,t)=>e.sort((r,n)=>Eb(n,r,t));dp.exports=bb});var xi=ee((iO,fp)=>{var Cb=Tr(),Tb=(e,t,r)=>Cb(e,t,r)>0;fp.exports=Tb});var To=ee((oO,hp)=>{var Sb=Tr(),Rb=(e,t,r)=>Sb(e,t,r)<0;hp.exports=Rb});var Zs=ee((sO,gp)=>{var wb=Tr(),Pb=(e,t,r)=>wb(e,t,r)!==0;gp.exports=Pb});var So=ee((aO,mp)=>{var Ob=Tr(),Ib=(e,t,r)=>Ob(e,t,r)>=0;mp.exports=Ib});var Ro=ee((cO,vp)=>{var Db=Tr(),Ab=(e,t,r)=>Db(e,t,r)<=0;vp.exports=Ab});var ea=ee((uO,_p)=>{var xb=bo(),Nb=Zs(),kb=xi(),Mb=So(),qb=To(),Lb=Ro(),jb=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return xb(e,r,n);case"!=":return Nb(e,r,n);case">":return kb(e,r,n);case">=":return Mb(e,r,n);case"<":return qb(e,r,n);case"<=":return Lb(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};_p.exports=jb});var Ep=ee((lO,yp)=>{var Fb=tr(),Hb=On(),{re:wo,t:Po}=Pn(),$b=(e,t)=>{if(e instanceof Fb)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(wo[Po.COERCE]);else{let n;for(;(n=wo[Po.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),wo[Po.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;wo[Po.COERCERTL].lastIndex=-1}return r===null?null:Hb(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};yp.exports=$b});var Cp=ee((dO,bp)=>{"use strict";bp.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}});var Sp=ee((pO,Tp)=>{"use strict";Tp.exports=nt;nt.Node=In;nt.create=nt;function nt(e){var t=this;if(t instanceof nt||(t=new nt),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(o){t.push(o)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}nt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};nt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};nt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};nt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Bb(this,arguments[e]);return this.length};nt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Vb(this,arguments[e]);return this.length};nt.prototype.pop=function(){if(!!this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};nt.prototype.shift=function(){if(!!this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};nt.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};nt.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};nt.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};nt.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};nt.prototype.map=function(e,t){t=t||this;for(var r=new nt,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};nt.prototype.mapReverse=function(e,t){t=t||this;for(var r=new nt,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};nt.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;n!==null;o++)r=e(r,n.value,o),n=n.next;return r};nt.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;n!==null;o--)r=e(r,n.value,o),n=n.prev;return r};nt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};nt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};nt.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new nt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(;o!==null&&n<t;n++,o=o.next)r.push(o.value);return r};nt.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new nt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,o=this.tail;o!==null&&n>t;n--)o=o.prev;for(;o!==null&&n>e;n--,o=o.prev)r.push(o.value);return r};nt.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;o!==null&&n<e;n++)o=o.next;for(var a=[],n=0;o&&n<t;n++)a.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var n=0;n<r.length;n++)o=Ub(this,o,r[n]);return a};nt.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function Ub(e,t,r){var n=t===e.head?new In(r,null,t,e):new In(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function Bb(e,t){e.tail=new In(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Vb(e,t){e.head=new In(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function In(e,t,r,n){if(!(this instanceof In))return new In(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Cp()(nt)}catch{}});var Ip=ee((fO,Op)=>{"use strict";var Gb=Sp(),Dn=Symbol("max"),zr=Symbol("length"),Xn=Symbol("lengthCalculator"),ki=Symbol("allowStale"),An=Symbol("maxAge"),Kr=Symbol("dispose"),Rp=Symbol("noDisposeOnSet"),Bt=Symbol("lruList"),Or=Symbol("cache"),Pp=Symbol("updateAgeOnGet"),ta=()=>1,na=class{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");let r=this[Dn]=t.max||1/0,n=t.length||ta;if(this[Xn]=typeof n!="function"?ta:n,this[ki]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[An]=t.maxAge||0,this[Kr]=t.dispose,this[Rp]=t.noDisposeOnSet||!1,this[Pp]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Dn]=t||1/0,Ni(this)}get max(){return this[Dn]}set allowStale(t){this[ki]=!!t}get allowStale(){return this[ki]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[An]=t,Ni(this)}get maxAge(){return this[An]}set lengthCalculator(t){typeof t!="function"&&(t=ta),t!==this[Xn]&&(this[Xn]=t,this[zr]=0,this[Bt].forEach(r=>{r.length=this[Xn](r.value,r.key),this[zr]+=r.length})),Ni(this)}get lengthCalculator(){return this[Xn]}get length(){return this[zr]}get itemCount(){return this[Bt].length}rforEach(t,r){r=r||this;for(let n=this[Bt].tail;n!==null;){let o=n.prev;wp(this,t,n,r),n=o}}forEach(t,r){r=r||this;for(let n=this[Bt].head;n!==null;){let o=n.next;wp(this,t,n,r),n=o}}keys(){return this[Bt].toArray().map(t=>t.key)}values(){return this[Bt].toArray().map(t=>t.value)}reset(){this[Kr]&&this[Bt]&&this[Bt].length&&this[Bt].forEach(t=>this[Kr](t.key,t.value)),this[Or]=new Map,this[Bt]=new Gb,this[zr]=0}dump(){return this[Bt].map(t=>Oo(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Bt]}set(t,r,n){if(n=n||this[An],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let o=n?Date.now():0,a=this[Xn](r,t);if(this[Or].has(t)){if(a>this[Dn])return Yn(this,this[Or].get(t)),!1;let c=this[Or].get(t).value;return this[Kr]&&(this[Rp]||this[Kr](t,c.value)),c.now=o,c.maxAge=n,c.value=r,this[zr]+=a-c.length,c.length=a,this.get(t),Ni(this),!0}let i=new ia(t,r,a,o,n);return i.length>this[Dn]?(this[Kr]&&this[Kr](t,r),!1):(this[zr]+=i.length,this[Bt].unshift(i),this[Or].set(t,this[Bt].head),Ni(this),!0)}has(t){if(!this[Or].has(t))return!1;let r=this[Or].get(t).value;return!Oo(this,r)}get(t){return ra(this,t,!0)}peek(t){return ra(this,t,!1)}pop(){let t=this[Bt].tail;return t?(Yn(this,t),t.value):null}del(t){Yn(this,this[Or].get(t))}load(t){this.reset();let r=Date.now();for(let n=t.length-1;n>=0;n--){let o=t[n],a=o.e||0;if(a===0)this.set(o.k,o.v);else{let i=a-r;i>0&&this.set(o.k,o.v,i)}}}prune(){this[Or].forEach((t,r)=>ra(this,r,!1))}},ra=(e,t,r)=>{let n=e[Or].get(t);if(n){let o=n.value;if(Oo(e,o)){if(Yn(e,n),!e[ki])return}else r&&(e[Pp]&&(n.value.now=Date.now()),e[Bt].unshiftNode(n));return o.value}},Oo=(e,t)=>{if(!t||!t.maxAge&&!e[An])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[An]&&r>e[An]},Ni=e=>{if(e[zr]>e[Dn])for(let t=e[Bt].tail;e[zr]>e[Dn]&&t!==null;){let r=t.prev;Yn(e,t),t=r}},Yn=(e,t)=>{if(t){let r=t.value;e[Kr]&&e[Kr](r.key,r.value),e[zr]-=r.length,e[Or].delete(r.key),e[Bt].removeNode(t)}},ia=class{constructor(t,r,n,o,a){this.key=t,this.value=r,this.length=n,this.now=o,this.maxAge=a||0}},wp=(e,t,r,n)=>{let o=r.value;Oo(e,o)&&(Yn(e,r),e[ki]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};Op.exports=na});var Sr=ee((hO,Np)=>{var xn=class{constructor(t,r){if(r=Kb(r),t instanceof xn)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new xn(t.raw,r);if(t instanceof oa)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(o=>!Ap(o[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&Jb(o[0])){this.set=[o];break}}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${t}`,o=Dp.get(n);if(o)return o;let a=this.options.loose,i=a?rr[Xt.HYPHENRANGELOOSE]:rr[Xt.HYPHENRANGE];t=t.replace(i,cC(this.options.includePrerelease)),It("hyphen replace",t),t=t.replace(rr[Xt.COMPARATORTRIM],Xb),It("comparator trim",t,rr[Xt.COMPARATORTRIM]),t=t.replace(rr[Xt.TILDETRIM],Yb),t=t.replace(rr[Xt.CARETTRIM],Qb),t=t.split(/\s+/).join(" ");let s=a?rr[Xt.COMPARATORLOOSE]:rr[Xt.COMPARATOR],c=t.split(" ").map(p=>Zb(p,this.options)).join(" ").split(/\s+/).map(p=>aC(p,this.options)).filter(this.options.loose?p=>!!p.match(s):()=>!0).map(p=>new oa(p,this.options)),l=c.length,d=new Map;for(let p of c){if(Ap(p))return[p];d.set(p.value,p)}d.size>1&&d.has("")&&d.delete("");let u=[...d.values()];return Dp.set(n,u),u}intersects(t,r){if(!(t instanceof xn))throw new TypeError("a Range is required");return this.set.some(n=>xp(n,r)&&t.set.some(o=>xp(o,r)&&n.every(a=>o.every(i=>a.intersects(i,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new zb(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(uC(this.set[r],t,this.options))return!0;return!1}};Np.exports=xn;var Wb=Ip(),Dp=new Wb({max:1e3}),Kb=Di(),oa=Mi(),It=Ii(),zb=tr(),{re:rr,t:Xt,comparatorTrimReplace:Xb,tildeTrimReplace:Yb,caretTrimReplace:Qb}=Pn(),Ap=e=>e.value==="<0.0.0-0",Jb=e=>e.value==="",xp=(e,t)=>{let r=!0,n=e.slice(),o=n.pop();for(;r&&n.length;)r=n.every(a=>o.intersects(a,t)),o=n.pop();return r},Zb=(e,t)=>(It("comp",e,t),e=rC(e,t),It("caret",e),e=eC(e,t),It("tildes",e),e=iC(e,t),It("xrange",e),e=sC(e,t),It("stars",e),e),sr=e=>!e||e.toLowerCase()==="x"||e==="*",eC=(e,t)=>e.trim().split(/\s+/).map(r=>tC(r,t)).join(" "),tC=(e,t)=>{let r=t.loose?rr[Xt.TILDELOOSE]:rr[Xt.TILDE];return e.replace(r,(n,o,a,i,s)=>{It("tilde",e,n,o,a,i,s);let c;return sr(o)?c="":sr(a)?c=`>=${o}.0.0 <${+o+1}.0.0-0`:sr(i)?c=`>=${o}.${a}.0 <${o}.${+a+1}.0-0`:s?(It("replaceTilde pr",s),c=`>=${o}.${a}.${i}-${s} <${o}.${+a+1}.0-0`):c=`>=${o}.${a}.${i} <${o}.${+a+1}.0-0`,It("tilde return",c),c})},rC=(e,t)=>e.trim().split(/\s+/).map(r=>nC(r,t)).join(" "),nC=(e,t)=>{It("caret",e,t);let r=t.loose?rr[Xt.CARETLOOSE]:rr[Xt.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(o,a,i,s,c)=>{It("caret",e,o,a,i,s,c);let l;return sr(a)?l="":sr(i)?l=`>=${a}.0.0${n} <${+a+1}.0.0-0`:sr(s)?a==="0"?l=`>=${a}.${i}.0${n} <${a}.${+i+1}.0-0`:l=`>=${a}.${i}.0${n} <${+a+1}.0.0-0`:c?(It("replaceCaret pr",c),a==="0"?i==="0"?l=`>=${a}.${i}.${s}-${c} <${a}.${i}.${+s+1}-0`:l=`>=${a}.${i}.${s}-${c} <${a}.${+i+1}.0-0`:l=`>=${a}.${i}.${s}-${c} <${+a+1}.0.0-0`):(It("no pr"),a==="0"?i==="0"?l=`>=${a}.${i}.${s}${n} <${a}.${i}.${+s+1}-0`:l=`>=${a}.${i}.${s}${n} <${a}.${+i+1}.0-0`:l=`>=${a}.${i}.${s} <${+a+1}.0.0-0`),It("caret return",l),l})},iC=(e,t)=>(It("replaceXRanges",e,t),e.split(/\s+/).map(r=>oC(r,t)).join(" ")),oC=(e,t)=>{e=e.trim();let r=t.loose?rr[Xt.XRANGELOOSE]:rr[Xt.XRANGE];return e.replace(r,(n,o,a,i,s,c)=>{It("xRange",e,n,o,a,i,s,c);let l=sr(a),d=l||sr(i),u=d||sr(s),p=u;return o==="="&&p&&(o=""),c=t.includePrerelease?"-0":"",l?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&p?(d&&(i=0),s=0,o===">"?(o=">=",d?(a=+a+1,i=0,s=0):(i=+i+1,s=0)):o==="<="&&(o="<",d?a=+a+1:i=+i+1),o==="<"&&(c="-0"),n=`${o+a}.${i}.${s}${c}`):d?n=`>=${a}.0.0${c} <${+a+1}.0.0-0`:u&&(n=`>=${a}.${i}.0${c} <${a}.${+i+1}.0-0`),It("xRange return",n),n})},sC=(e,t)=>(It("replaceStars",e,t),e.trim().replace(rr[Xt.STAR],"")),aC=(e,t)=>(It("replaceGTE0",e,t),e.trim().replace(rr[t.includePrerelease?Xt.GTE0PRE:Xt.GTE0],"")),cC=e=>(t,r,n,o,a,i,s,c,l,d,u,p,f)=>(sr(n)?r="":sr(o)?r=`>=${n}.0.0${e?"-0":""}`:sr(a)?r=`>=${n}.${o}.0${e?"-0":""}`:i?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,sr(l)?c="":sr(d)?c=`<${+l+1}.0.0-0`:sr(u)?c=`<${l}.${+d+1}.0-0`:p?c=`<=${l}.${d}.${u}-${p}`:e?c=`<${l}.${d}.${+u+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),uC=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(It(e[n].semver),e[n].semver!==oa.ANY&&e[n].semver.prerelease.length>0){let o=e[n].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}});var Mi=ee((gO,jp)=>{var qi=Symbol("SemVer ANY"),Qn=class{static get ANY(){return qi}constructor(t,r){if(r=lC(r),t instanceof Qn){if(t.loose===!!r.loose)return t;t=t.value}aa("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===qi?this.value="":this.value=this.operator+this.semver.version,aa("comp",this)}parse(t){let r=this.options.loose?kp[Mp.COMPARATORLOOSE]:kp[Mp.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new qp(n[2],this.options.loose):this.semver=qi}toString(){return this.value}test(t){if(aa("Comparator.test",t,this.options.loose),this.semver===qi||t===qi)return!0;if(typeof t=="string")try{t=new qp(t,this.options)}catch{return!1}return sa(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof Qn))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Lp(t.value,r).test(this.value);if(t.operator==="")return t.value===""?!0:new Lp(this.value,r).test(t.semver);let n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),o=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),a=this.semver.version===t.semver.version,i=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),s=sa(this.semver,"<",t.semver,r)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=sa(this.semver,">",t.semver,r)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||o||a&&i||s||c}};jp.exports=Qn;var lC=Di(),{re:kp,t:Mp}=Pn(),sa=ea(),aa=Ii(),qp=tr(),Lp=Sr()});var Li=ee((mO,Fp)=>{var dC=Sr(),pC=(e,t,r)=>{try{t=new dC(t,r)}catch{return!1}return t.test(e)};Fp.exports=pC});var $p=ee((vO,Hp)=>{var fC=Sr(),hC=(e,t)=>new fC(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Hp.exports=hC});var Bp=ee((_O,Up)=>{var gC=tr(),mC=Sr(),vC=(e,t,r)=>{let n=null,o=null,a=null;try{a=new mC(t,r)}catch{return null}return e.forEach(i=>{a.test(i)&&(!n||o.compare(i)===-1)&&(n=i,o=new gC(n,r))}),n};Up.exports=vC});var Gp=ee((yO,Vp)=>{var _C=tr(),yC=Sr(),EC=(e,t,r)=>{let n=null,o=null,a=null;try{a=new yC(t,r)}catch{return null}return e.forEach(i=>{a.test(i)&&(!n||o.compare(i)===1)&&(n=i,o=new _C(n,r))}),n};Vp.exports=EC});var zp=ee((EO,Kp)=>{var ca=tr(),bC=Sr(),Wp=xi(),CC=(e,t)=>{e=new bC(e,t);let r=new ca("0.0.0");if(e.test(r)||(r=new ca("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let o=e.set[n],a=null;o.forEach(i=>{let s=new ca(i.semver.version);switch(i.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!a||Wp(s,a))&&(a=s);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),a&&(!r||Wp(r,a))&&(r=a)}return r&&e.test(r)?r:null};Kp.exports=CC});var Yp=ee((bO,Xp)=>{var TC=Sr(),SC=(e,t)=>{try{return new TC(e,t).range||"*"}catch{return null}};Xp.exports=SC});var Io=ee((CO,ef)=>{var RC=tr(),Zp=Mi(),{ANY:wC}=Zp,PC=Sr(),OC=Li(),Qp=xi(),Jp=To(),IC=Ro(),DC=So(),AC=(e,t,r,n)=>{e=new RC(e,n),t=new PC(t,n);let o,a,i,s,c;switch(r){case">":o=Qp,a=IC,i=Jp,s=">",c=">=";break;case"<":o=Jp,a=DC,i=Qp,s="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(OC(e,t,n))return!1;for(let l=0;l<t.set.length;++l){let d=t.set[l],u=null,p=null;if(d.forEach(f=>{f.semver===wC&&(f=new Zp(">=0.0.0")),u=u||f,p=p||f,o(f.semver,u.semver,n)?u=f:i(f.semver,p.semver,n)&&(p=f)}),u.operator===s||u.operator===c||(!p.operator||p.operator===s)&&a(e,p.semver))return!1;if(p.operator===c&&i(e,p.semver))return!1}return!0};ef.exports=AC});var rf=ee((TO,tf)=>{var xC=Io(),NC=(e,t,r)=>xC(e,t,">",r);tf.exports=NC});var of=ee((SO,nf)=>{var kC=Io(),MC=(e,t,r)=>kC(e,t,"<",r);nf.exports=MC});var cf=ee((RO,af)=>{var sf=Sr(),qC=(e,t,r)=>(e=new sf(e,r),t=new sf(t,r),e.intersects(t));af.exports=qC});var lf=ee((wO,uf)=>{var LC=Li(),jC=Tr();uf.exports=(e,t,r)=>{let n=[],o=null,a=null,i=e.sort((d,u)=>jC(d,u,r));for(let d of i)LC(d,t,r)?(a=d,o||(o=d)):(a&&n.push([o,a]),a=null,o=null);o&&n.push([o,null]);let s=[];for(let[d,u]of n)d===u?s.push(d):!u&&d===i[0]?s.push("*"):u?d===i[0]?s.push(`<=${u}`):s.push(`${d} - ${u}`):s.push(`>=${d}`);let c=s.join(" || "),l=typeof t.raw=="string"?t.raw:String(t);return c.length<l.length?c:t}});var gf=ee((PO,hf)=>{var df=Sr(),Do=Mi(),{ANY:ua}=Do,ji=Li(),la=Tr(),FC=(e,t,r={})=>{if(e===t)return!0;e=new df(e,r),t=new df(t,r);let n=!1;e:for(let o of e.set){for(let a of t.set){let i=HC(o,a,r);if(n=n||i!==null,i)continue e}if(n)return!1}return!0},HC=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===ua){if(t.length===1&&t[0].semver===ua)return!0;r.includePrerelease?e=[new Do(">=0.0.0-0")]:e=[new Do(">=0.0.0")]}if(t.length===1&&t[0].semver===ua){if(r.includePrerelease)return!0;t=[new Do(">=0.0.0")]}let n=new Set,o,a;for(let f of e)f.operator===">"||f.operator===">="?o=pf(o,f,r):f.operator==="<"||f.operator==="<="?a=ff(a,f,r):n.add(f.semver);if(n.size>1)return null;let i;if(o&&a){if(i=la(o.semver,a.semver,r),i>0)return null;if(i===0&&(o.operator!==">="||a.operator!=="<="))return null}for(let f of n){if(o&&!ji(f,String(o),r)||a&&!ji(f,String(a),r))return null;for(let g of t)if(!ji(f,String(g),r))return!1;return!0}let s,c,l,d,u=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;u&&u.prerelease.length===1&&a.operator==="<"&&u.prerelease[0]===0&&(u=!1);for(let f of t){if(d=d||f.operator===">"||f.operator===">=",l=l||f.operator==="<"||f.operator==="<=",o){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(s=pf(o,f,r),s===f&&s!==o)return!1}else if(o.operator===">="&&!ji(o.semver,String(f),r))return!1}if(a){if(u&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===u.major&&f.semver.minor===u.minor&&f.semver.patch===u.patch&&(u=!1),f.operator==="<"||f.operator==="<="){if(c=ff(a,f,r),c===f&&c!==a)return!1}else if(a.operator==="<="&&!ji(a.semver,String(f),r))return!1}if(!f.operator&&(a||o)&&i!==0)return!1}return!(o&&l&&!a&&i!==0||a&&d&&!o&&i!==0||p||u)},pf=(e,t,r)=>{if(!e)return t;let n=la(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},ff=(e,t,r)=>{if(!e)return t;let n=la(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};hf.exports=FC});var vf=ee((OO,mf)=>{var da=Pn();mf.exports={re:da.re,src:da.src,tokens:da.t,SEMVER_SPEC_VERSION:Oi().SEMVER_SPEC_VERSION,SemVer:tr(),compareIdentifiers:_o().compareIdentifiers,rcompareIdentifiers:_o().rcompareIdentifiers,parse:On(),valid:jd(),clean:Hd(),inc:Ud(),diff:zd(),major:Yd(),minor:Jd(),patch:ep(),prerelease:rp(),compare:Tr(),rcompare:ip(),compareLoose:sp(),compareBuild:Co(),sort:lp(),rsort:pp(),gt:xi(),lt:To(),eq:bo(),neq:Zs(),gte:So(),lte:Ro(),cmp:ea(),coerce:Ep(),Comparator:Mi(),Range:Sr(),satisfies:Li(),toComparators:$p(),maxSatisfying:Bp(),minSatisfying:Gp(),minVersion:zp(),validRange:Yp(),outside:Io(),gtr:rf(),ltr:of(),intersects:cf(),simplifyRange:lf(),subset:gf()}});var cn=ee(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.asPromise=wt.thenable=wt.typedArray=wt.stringArray=wt.array=wt.func=wt.error=wt.number=wt.string=wt.boolean=void 0;function $C(e){return e===!0||e===!1}wt.boolean=$C;function _f(e){return typeof e=="string"||e instanceof String}wt.string=_f;function UC(e){return typeof e=="number"||e instanceof Number}wt.number=UC;function BC(e){return e instanceof Error}wt.error=BC;function yf(e){return typeof e=="function"}wt.func=yf;function Ef(e){return Array.isArray(e)}wt.array=Ef;function VC(e){return Ef(e)&&e.every(t=>_f(t))}wt.stringArray=VC;function GC(e,t){return Array.isArray(e)&&e.every(t)}wt.typedArray=GC;function bf(e){return e&&yf(e.then)}wt.thenable=bf;function WC(e){return e instanceof Promise?e:bf(e)?new Promise((t,r)=>{e.then(n=>t(n),n=>r(n))}):Promise.resolve(e)}wt.asPromise=WC});var Xr=ee(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});var pa;function fa(){if(pa===void 0)throw new Error("No runtime abstraction layer installed");return pa}(function(e){function t(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");pa=r}e.install=t})(fa||(fa={}));ha.default=fa});var ga=ee(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.Disposable=void 0;var KC;(function(e){function t(r){return{dispose:r}}e.create=t})(KC=Fi.Disposable||(Fi.Disposable={}))});var Cf=ee(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.AbstractMessageBuffer=void 0;var zC=13,XC=10,YC=`\r
`,ma=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){let r=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(){if(this._chunks.length===0)return;let t=0,r=0,n=0,o=0;e:for(;r<this._chunks.length;){let c=this._chunks[r];n=0;t:for(;n<c.length;){switch(c[n]){case zC:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case XC:switch(t){case 1:t=2;break;case 3:t=4,n++;break e;default:t=0}break;default:t=0}n++}o+=c.byteLength,r++}if(t!==4)return;let a=this._read(o+n),i=new Map,s=this.toString(a,"ascii").split(YC);if(s.length<2)return i;for(let c=0;c<s.length-2;c++){let l=s[c],d=l.indexOf(":");if(d===-1)throw new Error("Message header must separate key and value using :");let u=l.substr(0,d),p=l.substr(d+1).trim();i.set(u,p)}return i}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let a=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(a)}if(this._chunks[0].byteLength>t){let a=this._chunks[0],i=this.asNative(a,t);return this._chunks[0]=a.slice(t),this._totalLength-=t,i}let r=this.allocNative(t),n=0,o=0;for(;t>0;){let a=this._chunks[o];if(a.byteLength>t){let i=a.slice(0,t);r.set(i,n),n+=t,this._chunks[o]=a.slice(t),this._totalLength-=t,t-=t}else r.set(a,n),n+=a.byteLength,this._chunks.shift(),this._totalLength-=a.byteLength,t-=a.byteLength}return r}};Ao.AbstractMessageBuffer=ma});var Rf=ee(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});var QC=Xr(),Tf=require("util"),Nn=ga(),JC=Cf(),Jn=class extends JC.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return Jn.emptyBuffer}fromString(t,r){return Buffer.from(t,r)}toString(t,r){return t instanceof Buffer?t.toString(r):new Tf.TextDecoder(r).decode(t)}asNative(t,r){return r===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,r):Buffer.from(t,0,r)}allocNative(t){return Buffer.allocUnsafe(t)}};Jn.emptyBuffer=Buffer.allocUnsafe(0);var va=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Nn.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Nn.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Nn.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),Nn.Disposable.create(()=>this.stream.off("data",t))}},_a=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Nn.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Nn.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Nn.Disposable.create(()=>this.stream.off("end",t))}write(t,r){return new Promise((n,o)=>{let a=i=>{i==null?n():o(i)};typeof t=="string"?this.stream.write(t,r,a):this.stream.write(t,a)})}end(){this.stream.end()}},Sf=Object.freeze({messageBuffer:Object.freeze({create:e=>new Jn(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new Tf.TextDecoder(t.charset).decode(e)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:e=>new va(e),asWritableStream:e=>new _a(e)}),console,timer:Object.freeze({setTimeout(e,t,...r){return setTimeout(e,t,...r)},clearTimeout(e){clearTimeout(e)},setImmediate(e,...t){return setImmediate(e,...t)},clearImmediate(e){clearImmediate(e)}})});function ya(){return Sf}(function(e){function t(){QC.default.install(Sf)}e.install=t})(ya||(ya={}));Ea.default=ya});var Zn=ee(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.stringArray=nr.array=nr.func=nr.error=nr.number=nr.string=nr.boolean=void 0;function ZC(e){return e===!0||e===!1}nr.boolean=ZC;function wf(e){return typeof e=="string"||e instanceof String}nr.string=wf;function eT(e){return typeof e=="number"||e instanceof Number}nr.number=eT;function tT(e){return e instanceof Error}nr.error=tT;function rT(e){return typeof e=="function"}nr.func=rT;function Pf(e){return Array.isArray(e)}nr.array=Pf;function nT(e){return Pf(e)&&e.every(t=>wf(t))}nr.stringArray=nT});var Ba=ee(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.isResponseMessage=we.isNotificationMessage=we.isRequestMessage=we.NotificationType9=we.NotificationType8=we.NotificationType7=we.NotificationType6=we.NotificationType5=we.NotificationType4=we.NotificationType3=we.NotificationType2=we.NotificationType1=we.NotificationType0=we.NotificationType=we.RequestType9=we.RequestType8=we.RequestType7=we.RequestType6=we.RequestType5=we.RequestType4=we.RequestType3=we.RequestType2=we.RequestType1=we.RequestType=we.RequestType0=we.AbstractMessageSignature=we.ParameterStructures=we.ResponseError=we.ErrorCodes=void 0;var kn=Zn(),Of;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=e.jsonrpcReservedErrorRangeStart,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=e.jsonrpcReservedErrorRangeEnd})(Of=we.ErrorCodes||(we.ErrorCodes={}));var Hi=class extends Error{constructor(t,r,n){super(r),this.code=kn.number(t)?t:Of.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,Hi.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}};we.ResponseError=Hi;var Vt=class{constructor(t){this.kind=t}static is(t){return t===Vt.auto||t===Vt.byName||t===Vt.byPosition}toString(){return this.kind}};we.ParameterStructures=Vt;Vt.auto=new Vt("auto");Vt.byPosition=new Vt("byPosition");Vt.byName=new Vt("byName");var mt=class{constructor(t,r){this.method=t,this.numberOfParams=r}get parameterStructures(){return Vt.auto}};we.AbstractMessageSignature=mt;var ba=class extends mt{constructor(t){super(t,0)}};we.RequestType0=ba;var Ca=class extends mt{constructor(t,r=Vt.auto){super(t,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};we.RequestType=Ca;var Ta=class extends mt{constructor(t,r=Vt.auto){super(t,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};we.RequestType1=Ta;var Sa=class extends mt{constructor(t){super(t,2)}};we.RequestType2=Sa;var Ra=class extends mt{constructor(t){super(t,3)}};we.RequestType3=Ra;var wa=class extends mt{constructor(t){super(t,4)}};we.RequestType4=wa;var Pa=class extends mt{constructor(t){super(t,5)}};we.RequestType5=Pa;var Oa=class extends mt{constructor(t){super(t,6)}};we.RequestType6=Oa;var Ia=class extends mt{constructor(t){super(t,7)}};we.RequestType7=Ia;var Da=class extends mt{constructor(t){super(t,8)}};we.RequestType8=Da;var Aa=class extends mt{constructor(t){super(t,9)}};we.RequestType9=Aa;var xa=class extends mt{constructor(t,r=Vt.auto){super(t,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};we.NotificationType=xa;var Na=class extends mt{constructor(t){super(t,0)}};we.NotificationType0=Na;var ka=class extends mt{constructor(t,r=Vt.auto){super(t,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};we.NotificationType1=ka;var Ma=class extends mt{constructor(t){super(t,2)}};we.NotificationType2=Ma;var qa=class extends mt{constructor(t){super(t,3)}};we.NotificationType3=qa;var La=class extends mt{constructor(t){super(t,4)}};we.NotificationType4=La;var ja=class extends mt{constructor(t){super(t,5)}};we.NotificationType5=ja;var Fa=class extends mt{constructor(t){super(t,6)}};we.NotificationType6=Fa;var Ha=class extends mt{constructor(t){super(t,7)}};we.NotificationType7=Ha;var $a=class extends mt{constructor(t){super(t,8)}};we.NotificationType8=$a;var Ua=class extends mt{constructor(t){super(t,9)}};we.NotificationType9=Ua;function iT(e){let t=e;return t&&kn.string(t.method)&&(kn.string(t.id)||kn.number(t.id))}we.isRequestMessage=iT;function oT(e){let t=e;return t&&kn.string(t.method)&&e.id===void 0}we.isNotificationMessage=oT;function sT(e){let t=e;return t&&(t.result!==void 0||!!t.error)&&(kn.string(t.id)||kn.number(t.id)||t.id===null)}we.isResponseMessage=sT});var ti=ee(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.Emitter=Mn.Event=void 0;var aT=Xr(),cT;(function(e){let t={dispose(){}};e.None=function(){return t}})(cT=Mn.Event||(Mn.Event={}));var Va=class{add(t,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(t,r)})}remove(t,r=null){if(!this._callbacks)return;let n=!1;for(let o=0,a=this._callbacks.length;o<a;o++)if(this._callbacks[o]===t)if(this._contexts[o]===r){this._callbacks.splice(o,1),this._contexts.splice(o,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),o=this._contexts.slice(0);for(let a=0,i=n.length;a<i;a++)try{r.push(n[a].apply(o[a],t))}catch(s){aT.default().console.error(s)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},ei=class{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,r,n)=>{this._callbacks||(this._callbacks=new Va),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,r);let o={dispose:()=>{!this._callbacks||(this._callbacks.remove(t,r),o.dispose=ei._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(o),o}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Mn.Emitter=ei;ei._noop=function(){}});var za=ee(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.CancellationTokenSource=qn.CancellationToken=void 0;var If=Xr(),uT=Zn(),Ga=ti(),Wa;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ga.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ga.Event.None});function t(r){let n=r;return n&&(n===e.None||n===e.Cancelled||uT.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}e.is=t})(Wa=qn.CancellationToken||(qn.CancellationToken={}));var lT=Object.freeze(function(e,t){let r=If.default().timer.setTimeout(e.bind(t),0);return{dispose(){If.default().timer.clearTimeout(r)}}}),xo=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?lT:(this._emitter||(this._emitter=new Ga.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Ka=class{get token(){return this._token||(this._token=new xo),this._token}cancel(){this._token?this._token.cancel():this._token=Wa.Cancelled}dispose(){this._token?this._token instanceof xo&&this._token.dispose():this._token=Wa.None}};qn.CancellationTokenSource=Ka});var Df=ee(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.ReadableStreamMessageReader=Yr.AbstractMessageReader=Yr.MessageReader=void 0;var No=Xr(),ri=Zn(),Xa=ti(),dT;(function(e){function t(r){let n=r;return n&&ri.func(n.listen)&&ri.func(n.dispose)&&ri.func(n.onError)&&ri.func(n.onClose)&&ri.func(n.onPartialMessage)}e.is=t})(dT=Yr.MessageReader||(Yr.MessageReader={}));var ko=class{constructor(){this.errorEmitter=new Xa.Emitter,this.closeEmitter=new Xa.Emitter,this.partialMessageEmitter=new Xa.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t)}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${ri.string(t.message)?t.message:"unknown"}`)}};Yr.AbstractMessageReader=ko;var Ya;(function(e){function t(r){var n;let o,a,i,s=new Map,c,l=new Map;if(r===void 0||typeof r=="string")o=r??"utf-8";else{if(o=(n=r.charset)!==null&&n!==void 0?n:"utf-8",r.contentDecoder!==void 0&&(i=r.contentDecoder,s.set(i.name,i)),r.contentDecoders!==void 0)for(let d of r.contentDecoders)s.set(d.name,d);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,l.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let d of r.contentTypeDecoders)l.set(d.name,d)}return c===void 0&&(c=No.default().applicationJson.decoder,l.set(c.name,c)),{charset:o,contentDecoder:i,contentDecoders:s,contentTypeDecoder:c,contentTypeDecoders:l}}e.fromOptions=t})(Ya||(Ya={}));var Qa=class extends ko{constructor(t,r){super(),this.readable=t,this.options=Ya.fromOptions(r),this.buffer=No.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(t){this._partialMessageTimeout=t}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(t){for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let o=this.buffer.tryReadHeaders();if(!o)return;let a=o.get("Content-Length");if(!a)throw new Error("Header must provide a Content-Length property.");let i=parseInt(a);if(isNaN(i))throw new Error("Content-Length value must be a number.");this.nextMessageLength=i}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1;let n;this.options.contentDecoder!==void 0?n=this.options.contentDecoder.decode(r):n=Promise.resolve(r),n.then(o=>{this.options.contentTypeDecoder.decode(o,this.options).then(a=>{this.callback(a)},a=>{this.fireError(a)})},o=>{this.fireError(o)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(No.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=No.default().timer.setTimeout((t,r)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Yr.ReadableStreamMessageReader=Qa});var Af=ee(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.Semaphore=void 0;var pT=Xr(),Ja=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((r,n)=>{this._waiting.push({thunk:t,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||pT.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=t.thunk();r instanceof Promise?r.then(n=>{this._active--,t.resolve(n),this.runNext()},n=>{this._active--,t.reject(n),this.runNext()}):(this._active--,t.resolve(r),this.runNext())}catch(r){this._active--,t.reject(r),this.runNext()}}};Mo.Semaphore=Ja});var Mf=ee(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});Qr.WriteableStreamMessageWriter=Qr.AbstractMessageWriter=Qr.MessageWriter=void 0;var xf=Xr(),$i=Zn(),fT=Af(),Nf=ti(),hT="Content-Length: ",kf=`\r
`,gT;(function(e){function t(r){let n=r;return n&&$i.func(n.dispose)&&$i.func(n.onClose)&&$i.func(n.onError)&&$i.func(n.write)}e.is=t})(gT=Qr.MessageWriter||(Qr.MessageWriter={}));var qo=class{constructor(){this.errorEmitter=new Nf.Emitter,this.closeEmitter=new Nf.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t,r,n){this.errorEmitter.fire([this.asError(t),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${$i.string(t.message)?t.message:"unknown"}`)}};Qr.AbstractMessageWriter=qo;var Za;(function(e){function t(r){var n,o;return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:xf.default().applicationJson.encoder}:{charset:(n=r.charset)!==null&&n!==void 0?n:"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:(o=r.contentTypeEncoder)!==null&&o!==void 0?o:xf.default().applicationJson.encoder}}e.fromOptions=t})(Za||(Za={}));var ec=class extends qo{constructor(t,r){super(),this.writable=t,this.options=Za.fromOptions(r),this.errorCount=0,this.writeSemaphore=new fT.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let o=[];return o.push(hT,n.byteLength.toString(),kf),o.push(kf),this.doWrite(t,o,n)},n=>{throw this.fireError(n),n}))}async doWrite(t,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(o){return this.handleError(o,t),Promise.reject(o)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount)}end(){this.writable.end()}};Qr.WriteableStreamMessageWriter=ec});var qf=ee(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.LRUCache=Jr.LinkedMap=Jr.Touch=void 0;var ar;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(ar=Jr.Touch||(Jr.Touch={}));var Lo=class{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var t;return(t=this._head)===null||t===void 0?void 0:t.value}get last(){var t;return(t=this._tail)===null||t===void 0?void 0:t.value}has(t){return this._map.has(t)}get(t,r=ar.None){let n=this._map.get(t);if(!!n)return r!==ar.None&&this.touch(n,r),n.value}set(t,r,n=ar.None){let o=this._map.get(t);if(o)o.value=r,n!==ar.None&&this.touch(o,n);else{switch(o={key:t,value:r,next:void 0,previous:void 0},n){case ar.None:this.addItemLast(o);break;case ar.First:this.addItemFirst(o);break;case ar.Last:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(t,o),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){let r=this._map.get(t);if(!!r)return this._map.delete(t),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,r){let n=this._state,o=this._head;for(;o;){if(r?t.bind(r)(o.value,o.key,this):t(o.value,o.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){let t=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(t._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let a={value:n.key,done:!1};return n=n.next,a}else return{value:void 0,done:!0}}};return o}values(){let t=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(t._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let a={value:n.value,done:!1};return n=n.next,a}else return{value:void 0,done:!0}}};return o}entries(){let t=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(t._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let a={value:[n.key,n.value],done:!1};return n=n.next,a}else return{value:void 0,done:!0}}};return o}[Symbol.iterator](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>t;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{let r=t.next,n=t.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}t.next=void 0,t.previous=void 0,this._state++}touch(t,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==ar.First&&r!==ar.Last)){if(r===ar.First){if(t===this._head)return;let n=t.next,o=t.previous;t===this._tail?(o.next=void 0,this._tail=o):(n.previous=o,o.next=n),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(r===ar.Last){if(t===this._tail)return;let n=t.next,o=t.previous;t===this._head?(n.previous=void 0,this._head=n):(n.previous=o,o.next=n),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){let t=[];return this.forEach((r,n)=>{t.push([n,r])}),t}fromJSON(t){this.clear();for(let[r,n]of t)this.set(r,n)}};Jr.LinkedMap=Lo;var tc=class extends Lo{constructor(t,r=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,r=ar.AsNew){return super.get(t,r)}peek(t){return super.get(t,ar.None)}set(t,r){return super.set(t,r,ar.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Jr.LRUCache=tc});var $f=ee(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.createMessageConnection=Le.ConnectionOptions=Le.CancellationStrategy=Le.CancellationSenderStrategy=Le.CancellationReceiverStrategy=Le.ConnectionStrategy=Le.ConnectionError=Le.ConnectionErrors=Le.LogTraceNotification=Le.SetTraceNotification=Le.TraceFormat=Le.Trace=Le.NullLogger=Le.ProgressType=void 0;var Lf=Xr(),Gt=Zn(),ke=Ba(),jf=qf(),Ui=ti(),rc=za(),Bi;(function(e){e.type=new ke.NotificationType("$/cancelRequest")})(Bi||(Bi={}));var Fo;(function(e){e.type=new ke.NotificationType("$/progress")})(Fo||(Fo={}));var nc=class{constructor(){}};Le.ProgressType=nc;var ic;(function(e){function t(r){return Gt.func(r)}e.is=t})(ic||(ic={}));Le.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var qt;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"})(qt=Le.Trace||(Le.Trace={}));(function(e){function t(n){if(!Gt.string(n))return e.Off;switch(n=n.toLowerCase(),n){case"off":return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function r(n){switch(n){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}e.toString=r})(qt=Le.Trace||(Le.Trace={}));var Ir;(function(e){e.Text="text",e.JSON="json"})(Ir=Le.TraceFormat||(Le.TraceFormat={}));(function(e){function t(r){return r=r.toLowerCase(),r==="json"?e.JSON:e.Text}e.fromString=t})(Ir=Le.TraceFormat||(Le.TraceFormat={}));var Ff;(function(e){e.type=new ke.NotificationType("$/setTrace")})(Ff=Le.SetTraceNotification||(Le.SetTraceNotification={}));var oc;(function(e){e.type=new ke.NotificationType("$/logTrace")})(oc=Le.LogTraceNotification||(Le.LogTraceNotification={}));var jo;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"})(jo=Le.ConnectionErrors||(Le.ConnectionErrors={}));var un=class extends Error{constructor(t,r){super(r),this.code=t,Object.setPrototypeOf(this,un.prototype)}};Le.ConnectionError=un;var Hf;(function(e){function t(r){let n=r;return n&&Gt.func(n.cancelUndispatched)}e.is=t})(Hf=Le.ConnectionStrategy||(Le.ConnectionStrategy={}));var sc;(function(e){e.Message=Object.freeze({createCancellationTokenSource(r){return new rc.CancellationTokenSource}});function t(r){let n=r;return n&&Gt.func(n.createCancellationTokenSource)}e.is=t})(sc=Le.CancellationReceiverStrategy||(Le.CancellationReceiverStrategy={}));var ac;(function(e){e.Message=Object.freeze({sendCancellation(r,n){r.sendNotification(Bi.type,{id:n})},cleanup(r){}});function t(r){let n=r;return n&&Gt.func(n.sendCancellation)&&Gt.func(n.cleanup)}e.is=t})(ac=Le.CancellationSenderStrategy||(Le.CancellationSenderStrategy={}));var cc;(function(e){e.Message=Object.freeze({receiver:sc.Message,sender:ac.Message});function t(r){let n=r;return n&&sc.is(n.receiver)&&ac.is(n.sender)}e.is=t})(cc=Le.CancellationStrategy||(Le.CancellationStrategy={}));var mT;(function(e){function t(r){let n=r;return n&&(cc.is(n.cancellationStrategy)||Hf.is(n.connectionStrategy))}e.is=t})(mT=Le.ConnectionOptions||(Le.ConnectionOptions={}));var Dr;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"})(Dr||(Dr={}));function vT(e,t,r,n){let o=r!==void 0?r:Le.NullLogger,a=0,i=0,s=0,c="2.0",l,d=Object.create(null),u,p=Object.create(null),f=new Map,g,m=new jf.LinkedMap,_=Object.create(null),E=Object.create(null),T=qt.Off,w=Ir.Text,R,I=Dr.New,H=new Ui.Emitter,z=new Ui.Emitter,K=new Ui.Emitter,J=new Ui.Emitter,te=new Ui.Emitter,U=n&&n.cancellationStrategy?n.cancellationStrategy:cc.Message;function V(M){if(M===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+M.toString()}function Q(M){return M===null?"res-unknown-"+(++s).toString():"res-"+M.toString()}function ne(){return"not-"+(++i).toString()}function ve(M,N){ke.isRequestMessage(N)?M.set(V(N.id),N):ke.isResponseMessage(N)?M.set(Q(N.id),N):M.set(ne(),N)}function de(M){}function X(){return I===Dr.Listening}function ce(){return I===Dr.Closed}function ie(){return I===Dr.Disposed}function pe(){(I===Dr.New||I===Dr.Listening)&&(I=Dr.Closed,z.fire(void 0))}function he(M){H.fire([M,void 0,void 0])}function be(M){H.fire(M)}e.onClose(pe),e.onError(he),t.onClose(pe),t.onError(be);function _e(){g||m.size===0||(g=Lf.default().timer.setImmediate(()=>{g=void 0,Be()}))}function Be(){if(m.size===0)return;let M=m.shift();try{ke.isRequestMessage(M)?ze(M):ke.isNotificationMessage(M)?xe(M):ke.isResponseMessage(M)?Fe(M):it(M)}finally{_e()}}let Je=M=>{try{if(ke.isNotificationMessage(M)&&M.method===Bi.type.method){let N=V(M.params.id),P=m.get(N);if(ke.isRequestMessage(P)){let q=n?.connectionStrategy,F=q&&q.cancelUndispatched?q.cancelUndispatched(P,de):void 0;if(F&&(F.error!==void 0||F.result!==void 0)){m.delete(N),F.id=P.id,me(F,M.method,Date.now()),t.write(F);return}}}ve(m,M)}finally{_e()}};function ze(M){if(ie())return;function N(G,ue,fe){let Re={jsonrpc:c,id:M.id};G instanceof ke.ResponseError?Re.error=G.toJson():Re.result=G===void 0?null:G,me(Re,ue,fe),t.write(Re)}function P(G,ue,fe){let Re={jsonrpc:c,id:M.id,error:G.toJson()};me(Re,ue,fe),t.write(Re)}function q(G,ue,fe){G===void 0&&(G=null);let Re={jsonrpc:c,id:M.id,result:G};me(Re,ue,fe),t.write(Re)}Ae(M);let F=d[M.method],y,b;F&&(y=F.type,b=F.handler);let L=Date.now();if(b||l){let G=String(M.id),ue=U.receiver.createCancellationTokenSource(G);E[G]=ue;try{let fe;if(b)if(M.params===void 0){if(y!==void 0&&y.numberOfParams!==0){P(new ke.ResponseError(ke.ErrorCodes.InvalidParams,`Request ${M.method} defines ${y.numberOfParams} params but recevied none.`),M.method,L);return}fe=b(ue.token)}else if(Array.isArray(M.params)){if(y!==void 0&&y.parameterStructures===ke.ParameterStructures.byName){P(new ke.ResponseError(ke.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by name but received parameters by position`),M.method,L);return}fe=b(...M.params,ue.token)}else{if(y!==void 0&&y.parameterStructures===ke.ParameterStructures.byPosition){P(new ke.ResponseError(ke.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by position but received parameters by name`),M.method,L);return}fe=b(M.params,ue.token)}else l&&(fe=l(M.method,M.params,ue.token));let Re=fe;fe?Re.then?Re.then(ye=>{delete E[G],N(ye,M.method,L)},ye=>{delete E[G],ye instanceof ke.ResponseError?P(ye,M.method,L):ye&&Gt.string(ye.message)?P(new ke.ResponseError(ke.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${ye.message}`),M.method,L):P(new ke.ResponseError(ke.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,L)}):(delete E[G],N(fe,M.method,L)):(delete E[G],q(fe,M.method,L))}catch(fe){delete E[G],fe instanceof ke.ResponseError?N(fe,M.method,L):fe&&Gt.string(fe.message)?P(new ke.ResponseError(ke.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${fe.message}`),M.method,L):P(new ke.ResponseError(ke.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,L)}}else P(new ke.ResponseError(ke.ErrorCodes.MethodNotFound,`Unhandled method ${M.method}`),M.method,L)}function Fe(M){if(!ie())if(M.id===null)M.error?o.error(`Received response message without id: Error is: 
${JSON.stringify(M.error,void 0,4)}`):o.error("Received response message without id. No further error information provided.");else{let N=String(M.id),P=_[N];if(ir(M,P),P){delete _[N];try{if(M.error){let q=M.error;P.reject(new ke.ResponseError(q.code,q.message,q.data))}else if(M.result!==void 0)P.resolve(M.result);else throw new Error("Should never happen.")}catch(q){q.message?o.error(`Response handler '${P.method}' failed with message: ${q.message}`):o.error(`Response handler '${P.method}' failed unexpectedly.`)}}}}function xe(M){if(ie())return;let N,P;if(M.method===Bi.type.method)P=q=>{let F=q.id,y=E[String(F)];y&&y.cancel()};else{let q=p[M.method];q&&(P=q.handler,N=q.type)}if(P||u)try{Me(M),P?M.params===void 0?(N!==void 0&&N.numberOfParams!==0&&N.parameterStructures!==ke.ParameterStructures.byName&&o.error(`Notification ${M.method} defines ${N.numberOfParams} params but recevied none.`),P()):Array.isArray(M.params)?(N!==void 0&&(N.parameterStructures===ke.ParameterStructures.byName&&o.error(`Notification ${M.method} defines parameters by name but received parameters by position`),N.numberOfParams!==M.params.length&&o.error(`Notification ${M.method} defines ${N.numberOfParams} params but received ${M.params.length} argumennts`)),P(...M.params)):(N!==void 0&&N.parameterStructures===ke.ParameterStructures.byPosition&&o.error(`Notification ${M.method} defines parameters by position but received parameters by name`),P(M.params)):u&&u(M.method,M.params)}catch(q){q.message?o.error(`Notification handler '${M.method}' failed with message: ${q.message}`):o.error(`Notification handler '${M.method}' failed unexpectedly.`)}else K.fire(M)}function it(M){if(!M){o.error("Received empty message.");return}o.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(M,null,4)}`);let N=M;if(Gt.string(N.id)||Gt.number(N.id)){let P=String(N.id),q=_[P];q&&q.reject(new Error("The received response has neither a result nor an error property."))}}function ut(M){if(!(T===qt.Off||!R))if(w===Ir.Text){let N;T===qt.Verbose&&M.params&&(N=`Params: ${JSON.stringify(M.params,null,4)}

`),R.log(`Sending request '${M.method} - (${M.id})'.`,N)}else at("send-request",M)}function Oe(M){if(!(T===qt.Off||!R))if(w===Ir.Text){let N;T===qt.Verbose&&(M.params?N=`Params: ${JSON.stringify(M.params,null,4)}

`:N=`No parameters provided.

`),R.log(`Sending notification '${M.method}'.`,N)}else at("send-notification",M)}function me(M,N,P){if(!(T===qt.Off||!R))if(w===Ir.Text){let q;T===qt.Verbose&&(M.error&&M.error.data?q=`Error data: ${JSON.stringify(M.error.data,null,4)}

`:M.result?q=`Result: ${JSON.stringify(M.result,null,4)}

`:M.error===void 0&&(q=`No result returned.

`)),R.log(`Sending response '${N} - (${M.id})'. Processing request took ${Date.now()-P}ms`,q)}else at("send-response",M)}function Ae(M){if(!(T===qt.Off||!R))if(w===Ir.Text){let N;T===qt.Verbose&&M.params&&(N=`Params: ${JSON.stringify(M.params,null,4)}

`),R.log(`Received request '${M.method} - (${M.id})'.`,N)}else at("receive-request",M)}function Me(M){if(!(T===qt.Off||!R||M.method===oc.type.method))if(w===Ir.Text){let N;T===qt.Verbose&&(M.params?N=`Params: ${JSON.stringify(M.params,null,4)}

`:N=`No parameters provided.

`),R.log(`Received notification '${M.method}'.`,N)}else at("receive-notification",M)}function ir(M,N){if(!(T===qt.Off||!R))if(w===Ir.Text){let P;if(T===qt.Verbose&&(M.error&&M.error.data?P=`Error data: ${JSON.stringify(M.error.data,null,4)}

`:M.result?P=`Result: ${JSON.stringify(M.result,null,4)}

`:M.error===void 0&&(P=`No result returned.

`)),N){let q=M.error?` Request failed: ${M.error.message} (${M.error.code}).`:"";R.log(`Received response '${N.method} - (${M.id})' in ${Date.now()-N.timerStart}ms.${q}`,P)}else R.log(`Received response ${M.id} without active response promise.`,P)}else at("receive-response",M)}function at(M,N){if(!R||T===qt.Off)return;let P={isLSPMessage:!0,type:M,message:N,timestamp:Date.now()};R.log(P)}function re(){if(ce())throw new un(jo.Closed,"Connection is closed.");if(ie())throw new un(jo.Disposed,"Connection is disposed.")}function er(){if(X())throw new un(jo.AlreadyListening,"Connection is already listening")}function or(){if(!X())throw new Error("Call listen() first.")}function ht(M){return M===void 0?null:M}function rt(M){if(M!==null)return M}function Nt(M){return M!=null&&!Array.isArray(M)&&typeof M=="object"}function lt(M,N){switch(M){case ke.ParameterStructures.auto:return Nt(N)?rt(N):[ht(N)];case ke.ParameterStructures.byName:if(!Nt(N))throw new Error("Recevied parameters by name but param is not an object literal.");return rt(N);case ke.ParameterStructures.byPosition:return[ht(N)];default:throw new Error(`Unknown parameter structure ${M.toString()}`)}}function $t(M,N){let P,q=M.numberOfParams;switch(q){case 0:P=void 0;break;case 1:P=lt(M.parameterStructures,N[0]);break;default:P=[];for(let F=0;F<N.length&&F<q;F++)P.push(ht(N[F]));if(N.length<q)for(let F=N.length;F<q;F++)P.push(null);break}return P}let Pt={sendNotification:(M,...N)=>{re();let P,q;if(Gt.string(M)){P=M;let y=N[0],b=0,L=ke.ParameterStructures.auto;ke.ParameterStructures.is(y)&&(b=1,L=y);let G=N.length,ue=G-b;switch(ue){case 0:q=void 0;break;case 1:q=lt(L,N[b]);break;default:if(L===ke.ParameterStructures.byName)throw new Error(`Recevied ${ue} parameters for 'by Name' notification parameter structure.`);q=N.slice(b,G).map(fe=>ht(fe));break}}else{let y=N;P=M.method,q=$t(M,y)}let F={jsonrpc:c,method:P,params:q};Oe(F),t.write(F)},onNotification:(M,N)=>{re();let P;return Gt.func(M)?u=M:N&&(Gt.string(M)?(P=M,p[M]={type:void 0,handler:N}):(P=M.method,p[M.method]={type:M,handler:N})),{dispose:()=>{P!==void 0?delete p[P]:u=void 0}}},onProgress:(M,N,P)=>{if(f.has(N))throw new Error(`Progress handler for token ${N} already registered`);return f.set(N,P),{dispose:()=>{f.delete(N)}}},sendProgress:(M,N,P)=>{Pt.sendNotification(Fo.type,{token:N,value:P})},onUnhandledProgress:J.event,sendRequest:(M,...N)=>{re(),or();let P,q,F;if(Gt.string(M)){P=M;let G=N[0],ue=N[N.length-1],fe=0,Re=ke.ParameterStructures.auto;ke.ParameterStructures.is(G)&&(fe=1,Re=G);let ye=N.length;rc.CancellationToken.is(ue)&&(ye=ye-1,F=ue);let He=ye-fe;switch(He){case 0:q=void 0;break;case 1:q=lt(Re,N[fe]);break;default:if(Re===ke.ParameterStructures.byName)throw new Error(`Recevied ${He} parameters for 'by Name' request parameter structure.`);q=N.slice(fe,ye).map(le=>ht(le));break}}else{let G=N;P=M.method,q=$t(M,G);let ue=M.numberOfParams;F=rc.CancellationToken.is(G[ue])?G[ue]:void 0}let y=a++,b;return F&&(b=F.onCancellationRequested(()=>{U.sender.sendCancellation(Pt,y)})),new Promise((G,ue)=>{let fe={jsonrpc:c,id:y,method:P,params:q},Re=le=>{G(le),U.sender.cleanup(y),b?.dispose()},ye=le=>{ue(le),U.sender.cleanup(y),b?.dispose()},He={method:P,timerStart:Date.now(),resolve:Re,reject:ye};ut(fe);try{t.write(fe)}catch(le){He.reject(new ke.ResponseError(ke.ErrorCodes.MessageWriteError,le.message?le.message:"Unknown reason")),He=null}He&&(_[String(y)]=He)})},onRequest:(M,N)=>{re();let P=null;return ic.is(M)?(P=void 0,l=M):Gt.string(M)?(P=null,N!==void 0&&(P=M,d[M]={handler:N,type:void 0})):N!==void 0&&(P=M.method,d[M.method]={type:M,handler:N}),{dispose:()=>{P!==null&&(P!==void 0?delete d[P]:l=void 0)}}},trace:(M,N,P)=>{let q=!1,F=Ir.Text;P!==void 0&&(Gt.boolean(P)?q=P:(q=P.sendNotification||!1,F=P.traceFormat||Ir.Text)),T=M,w=F,T===qt.Off?R=void 0:R=N,q&&!ce()&&!ie()&&Pt.sendNotification(Ff.type,{value:qt.toString(M)})},onError:H.event,onClose:z.event,onUnhandledNotification:K.event,onDispose:te.event,end:()=>{t.end()},dispose:()=>{if(ie())return;I=Dr.Disposed,te.fire(void 0);let M=new Error("Connection got disposed.");Object.keys(_).forEach(N=>{_[N].reject(M)}),_=Object.create(null),E=Object.create(null),m=new jf.LinkedMap,Gt.func(t.dispose)&&t.dispose(),Gt.func(e.dispose)&&e.dispose()},listen:()=>{re(),er(),I=Dr.Listening,e.listen(Je)},inspect:()=>{Lf.default().console.log("inspect")}};return Pt.onNotification(oc.type,M=>{T===qt.Off||!R||R.log(M.message,T===qt.Verbose?M.verbose:void 0)}),Pt.onNotification(Fo.type,M=>{let N=f.get(M.token);N?N(M.value):J.fire(M)}),Pt}Le.createMessageConnection=vT});var dc=ee(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.CancellationSenderStrategy=ae.CancellationReceiverStrategy=ae.ConnectionError=ae.ConnectionErrors=ae.LogTraceNotification=ae.SetTraceNotification=ae.TraceFormat=ae.Trace=ae.ProgressType=ae.createMessageConnection=ae.NullLogger=ae.ConnectionOptions=ae.ConnectionStrategy=ae.WriteableStreamMessageWriter=ae.AbstractMessageWriter=ae.MessageWriter=ae.ReadableStreamMessageReader=ae.AbstractMessageReader=ae.MessageReader=ae.CancellationToken=ae.CancellationTokenSource=ae.Emitter=ae.Event=ae.Disposable=ae.ParameterStructures=ae.NotificationType9=ae.NotificationType8=ae.NotificationType7=ae.NotificationType6=ae.NotificationType5=ae.NotificationType4=ae.NotificationType3=ae.NotificationType2=ae.NotificationType1=ae.NotificationType0=ae.NotificationType=ae.ErrorCodes=ae.ResponseError=ae.RequestType9=ae.RequestType8=ae.RequestType7=ae.RequestType6=ae.RequestType5=ae.RequestType4=ae.RequestType3=ae.RequestType2=ae.RequestType1=ae.RequestType0=ae.RequestType=ae.RAL=void 0;ae.CancellationStrategy=void 0;var vt=Ba();Object.defineProperty(ae,"RequestType",{enumerable:!0,get:function(){return vt.RequestType}});Object.defineProperty(ae,"RequestType0",{enumerable:!0,get:function(){return vt.RequestType0}});Object.defineProperty(ae,"RequestType1",{enumerable:!0,get:function(){return vt.RequestType1}});Object.defineProperty(ae,"RequestType2",{enumerable:!0,get:function(){return vt.RequestType2}});Object.defineProperty(ae,"RequestType3",{enumerable:!0,get:function(){return vt.RequestType3}});Object.defineProperty(ae,"RequestType4",{enumerable:!0,get:function(){return vt.RequestType4}});Object.defineProperty(ae,"RequestType5",{enumerable:!0,get:function(){return vt.RequestType5}});Object.defineProperty(ae,"RequestType6",{enumerable:!0,get:function(){return vt.RequestType6}});Object.defineProperty(ae,"RequestType7",{enumerable:!0,get:function(){return vt.RequestType7}});Object.defineProperty(ae,"RequestType8",{enumerable:!0,get:function(){return vt.RequestType8}});Object.defineProperty(ae,"RequestType9",{enumerable:!0,get:function(){return vt.RequestType9}});Object.defineProperty(ae,"ResponseError",{enumerable:!0,get:function(){return vt.ResponseError}});Object.defineProperty(ae,"ErrorCodes",{enumerable:!0,get:function(){return vt.ErrorCodes}});Object.defineProperty(ae,"NotificationType",{enumerable:!0,get:function(){return vt.NotificationType}});Object.defineProperty(ae,"NotificationType0",{enumerable:!0,get:function(){return vt.NotificationType0}});Object.defineProperty(ae,"NotificationType1",{enumerable:!0,get:function(){return vt.NotificationType1}});Object.defineProperty(ae,"NotificationType2",{enumerable:!0,get:function(){return vt.NotificationType2}});Object.defineProperty(ae,"NotificationType3",{enumerable:!0,get:function(){return vt.NotificationType3}});Object.defineProperty(ae,"NotificationType4",{enumerable:!0,get:function(){return vt.NotificationType4}});Object.defineProperty(ae,"NotificationType5",{enumerable:!0,get:function(){return vt.NotificationType5}});Object.defineProperty(ae,"NotificationType6",{enumerable:!0,get:function(){return vt.NotificationType6}});Object.defineProperty(ae,"NotificationType7",{enumerable:!0,get:function(){return vt.NotificationType7}});Object.defineProperty(ae,"NotificationType8",{enumerable:!0,get:function(){return vt.NotificationType8}});Object.defineProperty(ae,"NotificationType9",{enumerable:!0,get:function(){return vt.NotificationType9}});Object.defineProperty(ae,"ParameterStructures",{enumerable:!0,get:function(){return vt.ParameterStructures}});var _T=ga();Object.defineProperty(ae,"Disposable",{enumerable:!0,get:function(){return _T.Disposable}});var Uf=ti();Object.defineProperty(ae,"Event",{enumerable:!0,get:function(){return Uf.Event}});Object.defineProperty(ae,"Emitter",{enumerable:!0,get:function(){return Uf.Emitter}});var Bf=za();Object.defineProperty(ae,"CancellationTokenSource",{enumerable:!0,get:function(){return Bf.CancellationTokenSource}});Object.defineProperty(ae,"CancellationToken",{enumerable:!0,get:function(){return Bf.CancellationToken}});var uc=Df();Object.defineProperty(ae,"MessageReader",{enumerable:!0,get:function(){return uc.MessageReader}});Object.defineProperty(ae,"AbstractMessageReader",{enumerable:!0,get:function(){return uc.AbstractMessageReader}});Object.defineProperty(ae,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return uc.ReadableStreamMessageReader}});var lc=Mf();Object.defineProperty(ae,"MessageWriter",{enumerable:!0,get:function(){return lc.MessageWriter}});Object.defineProperty(ae,"AbstractMessageWriter",{enumerable:!0,get:function(){return lc.AbstractMessageWriter}});Object.defineProperty(ae,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return lc.WriteableStreamMessageWriter}});var pr=$f();Object.defineProperty(ae,"ConnectionStrategy",{enumerable:!0,get:function(){return pr.ConnectionStrategy}});Object.defineProperty(ae,"ConnectionOptions",{enumerable:!0,get:function(){return pr.ConnectionOptions}});Object.defineProperty(ae,"NullLogger",{enumerable:!0,get:function(){return pr.NullLogger}});Object.defineProperty(ae,"createMessageConnection",{enumerable:!0,get:function(){return pr.createMessageConnection}});Object.defineProperty(ae,"ProgressType",{enumerable:!0,get:function(){return pr.ProgressType}});Object.defineProperty(ae,"Trace",{enumerable:!0,get:function(){return pr.Trace}});Object.defineProperty(ae,"TraceFormat",{enumerable:!0,get:function(){return pr.TraceFormat}});Object.defineProperty(ae,"SetTraceNotification",{enumerable:!0,get:function(){return pr.SetTraceNotification}});Object.defineProperty(ae,"LogTraceNotification",{enumerable:!0,get:function(){return pr.LogTraceNotification}});Object.defineProperty(ae,"ConnectionErrors",{enumerable:!0,get:function(){return pr.ConnectionErrors}});Object.defineProperty(ae,"ConnectionError",{enumerable:!0,get:function(){return pr.ConnectionError}});Object.defineProperty(ae,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return pr.CancellationReceiverStrategy}});Object.defineProperty(ae,"CancellationSenderStrategy",{enumerable:!0,get:function(){return pr.CancellationSenderStrategy}});Object.defineProperty(ae,"CancellationStrategy",{enumerable:!0,get:function(){return pr.CancellationStrategy}});var yT=Xr();ae.RAL=yT.default});var ii=ee(ot=>{"use strict";var ET=ot&&ot.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),bT=ot&&ot.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ET(t,e,r)};Object.defineProperty(ot,"__esModule",{value:!0});ot.createMessageConnection=ot.createServerSocketTransport=ot.createClientSocketTransport=ot.createServerPipeTransport=ot.createClientPipeTransport=ot.generateRandomPipeName=ot.StreamMessageWriter=ot.StreamMessageReader=ot.SocketMessageWriter=ot.SocketMessageReader=ot.IPCMessageWriter=ot.IPCMessageReader=void 0;var ni=Rf();ni.default.install();var Fr=dc(),Vf=require("path"),CT=require("os"),TT=require("crypto"),Uo=require("net");bT(dc(),ot);var pc=class extends Fr.AbstractMessageReader{constructor(t){super(),this.process=t;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(t){return this.process.on("message",t),Fr.Disposable.create(()=>this.process.off("message",t))}};ot.IPCMessageReader=pc;var fc=class extends Fr.AbstractMessageWriter{constructor(t){super(),this.process=t,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,t)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,t),Promise.reject(r)}}handleError(t,r){this.errorCount++,this.fireError(t,r,this.errorCount)}end(){}};ot.IPCMessageWriter=fc;var Ln=class extends Fr.ReadableStreamMessageReader{constructor(t,r="utf-8"){super(ni.default().stream.asReadableStream(t),r)}};ot.SocketMessageReader=Ln;var jn=class extends Fr.WriteableStreamMessageWriter{constructor(t,r){super(ni.default().stream.asWritableStream(t),r),this.socket=t}dispose(){super.dispose(),this.socket.destroy()}};ot.SocketMessageWriter=jn;var Ho=class extends Fr.ReadableStreamMessageReader{constructor(t,r){super(ni.default().stream.asReadableStream(t),r)}};ot.StreamMessageReader=Ho;var $o=class extends Fr.WriteableStreamMessageWriter{constructor(t,r){super(ni.default().stream.asWritableStream(t),r)}};ot.StreamMessageWriter=$o;var Gf=process.env.XDG_RUNTIME_DIR,ST=new Map([["linux",107],["darwin",103]]);function RT(){let e=TT.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;Gf?t=Vf.join(Gf,`vscode-ipc-${e}.sock`):t=Vf.join(CT.tmpdir(),`vscode-${e}.sock`);let r=ST.get(process.platform);return r!==void 0&&t.length>=r&&ni.default().console.warn(`WARNING: IPC handle "${t}" is longer than ${r} characters.`),t}ot.generateRandomPipeName=RT;function wT(e,t="utf-8"){let r,n=new Promise((o,a)=>{r=o});return new Promise((o,a)=>{let i=Uo.createServer(s=>{i.close(),r([new Ln(s,t),new jn(s,t)])});i.on("error",a),i.listen(e,()=>{i.removeListener("error",a),o({onConnected:()=>n})})})}ot.createClientPipeTransport=wT;function PT(e,t="utf-8"){let r=Uo.createConnection(e);return[new Ln(r,t),new jn(r,t)]}ot.createServerPipeTransport=PT;function OT(e,t="utf-8"){let r,n=new Promise((o,a)=>{r=o});return new Promise((o,a)=>{let i=Uo.createServer(s=>{i.close(),r([new Ln(s,t),new jn(s,t)])});i.on("error",a),i.listen(e,"127.0.0.1",()=>{i.removeListener("error",a),o({onConnected:()=>n})})})}ot.createClientSocketTransport=OT;function IT(e,t="utf-8"){let r=Uo.createConnection(e,"127.0.0.1");return[new Ln(r,t),new jn(r,t)]}ot.createServerSocketTransport=IT;function DT(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function AT(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function xT(e,t,r,n){r||(r=Fr.NullLogger);let o=DT(e)?new Ho(e):e,a=AT(t)?new $o(t):t;return Fr.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),Fr.createMessageConnection(o,a,r,n)}ot.createMessageConnection=xT});var hc=ee((GO,Wf)=>{"use strict";Wf.exports=ii()});var zf=ee((Kf,Bo)=>{(function(e){if(typeof Bo=="object"&&typeof Bo.exports=="object"){var t=e(require,Kf);t!==void 0&&(Bo.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionKind=t.DocumentSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=void 0;var r;(function(P){P.MIN_VALUE=-2147483648,P.MAX_VALUE=2147483647})(r=t.integer||(t.integer={}));var n;(function(P){P.MIN_VALUE=0,P.MAX_VALUE=2147483647})(n=t.uinteger||(t.uinteger={}));var o;(function(P){function q(y,b){return y===Number.MAX_VALUE&&(y=n.MAX_VALUE),b===Number.MAX_VALUE&&(b=n.MAX_VALUE),{line:y,character:b}}P.create=q;function F(y){var b=y;return N.objectLiteral(b)&&N.uinteger(b.line)&&N.uinteger(b.character)}P.is=F})(o=t.Position||(t.Position={}));var a;(function(P){function q(y,b,L,G){if(N.uinteger(y)&&N.uinteger(b)&&N.uinteger(L)&&N.uinteger(G))return{start:o.create(y,b),end:o.create(L,G)};if(o.is(y)&&o.is(b))return{start:y,end:b};throw new Error("Range#create called with invalid arguments["+y+", "+b+", "+L+", "+G+"]")}P.create=q;function F(y){var b=y;return N.objectLiteral(b)&&o.is(b.start)&&o.is(b.end)}P.is=F})(a=t.Range||(t.Range={}));var i;(function(P){function q(y,b){return{uri:y,range:b}}P.create=q;function F(y){var b=y;return N.defined(b)&&a.is(b.range)&&(N.string(b.uri)||N.undefined(b.uri))}P.is=F})(i=t.Location||(t.Location={}));var s;(function(P){function q(y,b,L,G){return{targetUri:y,targetRange:b,targetSelectionRange:L,originSelectionRange:G}}P.create=q;function F(y){var b=y;return N.defined(b)&&a.is(b.targetRange)&&N.string(b.targetUri)&&(a.is(b.targetSelectionRange)||N.undefined(b.targetSelectionRange))&&(a.is(b.originSelectionRange)||N.undefined(b.originSelectionRange))}P.is=F})(s=t.LocationLink||(t.LocationLink={}));var c;(function(P){function q(y,b,L,G){return{red:y,green:b,blue:L,alpha:G}}P.create=q;function F(y){var b=y;return N.numberRange(b.red,0,1)&&N.numberRange(b.green,0,1)&&N.numberRange(b.blue,0,1)&&N.numberRange(b.alpha,0,1)}P.is=F})(c=t.Color||(t.Color={}));var l;(function(P){function q(y,b){return{range:y,color:b}}P.create=q;function F(y){var b=y;return a.is(b.range)&&c.is(b.color)}P.is=F})(l=t.ColorInformation||(t.ColorInformation={}));var d;(function(P){function q(y,b,L){return{label:y,textEdit:b,additionalTextEdits:L}}P.create=q;function F(y){var b=y;return N.string(b.label)&&(N.undefined(b.textEdit)||w.is(b))&&(N.undefined(b.additionalTextEdits)||N.typedArray(b.additionalTextEdits,w.is))}P.is=F})(d=t.ColorPresentation||(t.ColorPresentation={}));var u;(function(P){P.Comment="comment",P.Imports="imports",P.Region="region"})(u=t.FoldingRangeKind||(t.FoldingRangeKind={}));var p;(function(P){function q(y,b,L,G,ue){var fe={startLine:y,endLine:b};return N.defined(L)&&(fe.startCharacter=L),N.defined(G)&&(fe.endCharacter=G),N.defined(ue)&&(fe.kind=ue),fe}P.create=q;function F(y){var b=y;return N.uinteger(b.startLine)&&N.uinteger(b.startLine)&&(N.undefined(b.startCharacter)||N.uinteger(b.startCharacter))&&(N.undefined(b.endCharacter)||N.uinteger(b.endCharacter))&&(N.undefined(b.kind)||N.string(b.kind))}P.is=F})(p=t.FoldingRange||(t.FoldingRange={}));var f;(function(P){function q(y,b){return{location:y,message:b}}P.create=q;function F(y){var b=y;return N.defined(b)&&i.is(b.location)&&N.string(b.message)}P.is=F})(f=t.DiagnosticRelatedInformation||(t.DiagnosticRelatedInformation={}));var g;(function(P){P.Error=1,P.Warning=2,P.Information=3,P.Hint=4})(g=t.DiagnosticSeverity||(t.DiagnosticSeverity={}));var m;(function(P){P.Unnecessary=1,P.Deprecated=2})(m=t.DiagnosticTag||(t.DiagnosticTag={}));var _;(function(P){function q(F){var y=F;return y!=null&&N.string(y.href)}P.is=q})(_=t.CodeDescription||(t.CodeDescription={}));var E;(function(P){function q(y,b,L,G,ue,fe){var Re={range:y,message:b};return N.defined(L)&&(Re.severity=L),N.defined(G)&&(Re.code=G),N.defined(ue)&&(Re.source=ue),N.defined(fe)&&(Re.relatedInformation=fe),Re}P.create=q;function F(y){var b,L=y;return N.defined(L)&&a.is(L.range)&&N.string(L.message)&&(N.number(L.severity)||N.undefined(L.severity))&&(N.integer(L.code)||N.string(L.code)||N.undefined(L.code))&&(N.undefined(L.codeDescription)||N.string((b=L.codeDescription)===null||b===void 0?void 0:b.href))&&(N.string(L.source)||N.undefined(L.source))&&(N.undefined(L.relatedInformation)||N.typedArray(L.relatedInformation,f.is))}P.is=F})(E=t.Diagnostic||(t.Diagnostic={}));var T;(function(P){function q(y,b){for(var L=[],G=2;G<arguments.length;G++)L[G-2]=arguments[G];var ue={title:y,command:b};return N.defined(L)&&L.length>0&&(ue.arguments=L),ue}P.create=q;function F(y){var b=y;return N.defined(b)&&N.string(b.title)&&N.string(b.command)}P.is=F})(T=t.Command||(t.Command={}));var w;(function(P){function q(L,G){return{range:L,newText:G}}P.replace=q;function F(L,G){return{range:{start:L,end:L},newText:G}}P.insert=F;function y(L){return{range:L,newText:""}}P.del=y;function b(L){var G=L;return N.objectLiteral(G)&&N.string(G.newText)&&a.is(G.range)}P.is=b})(w=t.TextEdit||(t.TextEdit={}));var R;(function(P){function q(y,b,L){var G={label:y};return b!==void 0&&(G.needsConfirmation=b),L!==void 0&&(G.description=L),G}P.create=q;function F(y){var b=y;return b!==void 0&&N.objectLiteral(b)&&N.string(b.label)&&(N.boolean(b.needsConfirmation)||b.needsConfirmation===void 0)&&(N.string(b.description)||b.description===void 0)}P.is=F})(R=t.ChangeAnnotation||(t.ChangeAnnotation={}));var I;(function(P){function q(F){var y=F;return typeof y=="string"}P.is=q})(I=t.ChangeAnnotationIdentifier||(t.ChangeAnnotationIdentifier={}));var H;(function(P){function q(L,G,ue){return{range:L,newText:G,annotationId:ue}}P.replace=q;function F(L,G,ue){return{range:{start:L,end:L},newText:G,annotationId:ue}}P.insert=F;function y(L,G){return{range:L,newText:"",annotationId:G}}P.del=y;function b(L){var G=L;return w.is(G)&&(R.is(G.annotationId)||I.is(G.annotationId))}P.is=b})(H=t.AnnotatedTextEdit||(t.AnnotatedTextEdit={}));var z;(function(P){function q(y,b){return{textDocument:y,edits:b}}P.create=q;function F(y){var b=y;return N.defined(b)&&X.is(b.textDocument)&&Array.isArray(b.edits)}P.is=F})(z=t.TextDocumentEdit||(t.TextDocumentEdit={}));var K;(function(P){function q(y,b,L){var G={kind:"create",uri:y};return b!==void 0&&(b.overwrite!==void 0||b.ignoreIfExists!==void 0)&&(G.options=b),L!==void 0&&(G.annotationId=L),G}P.create=q;function F(y){var b=y;return b&&b.kind==="create"&&N.string(b.uri)&&(b.options===void 0||(b.options.overwrite===void 0||N.boolean(b.options.overwrite))&&(b.options.ignoreIfExists===void 0||N.boolean(b.options.ignoreIfExists)))&&(b.annotationId===void 0||I.is(b.annotationId))}P.is=F})(K=t.CreateFile||(t.CreateFile={}));var J;(function(P){function q(y,b,L,G){var ue={kind:"rename",oldUri:y,newUri:b};return L!==void 0&&(L.overwrite!==void 0||L.ignoreIfExists!==void 0)&&(ue.options=L),G!==void 0&&(ue.annotationId=G),ue}P.create=q;function F(y){var b=y;return b&&b.kind==="rename"&&N.string(b.oldUri)&&N.string(b.newUri)&&(b.options===void 0||(b.options.overwrite===void 0||N.boolean(b.options.overwrite))&&(b.options.ignoreIfExists===void 0||N.boolean(b.options.ignoreIfExists)))&&(b.annotationId===void 0||I.is(b.annotationId))}P.is=F})(J=t.RenameFile||(t.RenameFile={}));var te;(function(P){function q(y,b,L){var G={kind:"delete",uri:y};return b!==void 0&&(b.recursive!==void 0||b.ignoreIfNotExists!==void 0)&&(G.options=b),L!==void 0&&(G.annotationId=L),G}P.create=q;function F(y){var b=y;return b&&b.kind==="delete"&&N.string(b.uri)&&(b.options===void 0||(b.options.recursive===void 0||N.boolean(b.options.recursive))&&(b.options.ignoreIfNotExists===void 0||N.boolean(b.options.ignoreIfNotExists)))&&(b.annotationId===void 0||I.is(b.annotationId))}P.is=F})(te=t.DeleteFile||(t.DeleteFile={}));var U;(function(P){function q(F){var y=F;return y&&(y.changes!==void 0||y.documentChanges!==void 0)&&(y.documentChanges===void 0||y.documentChanges.every(function(b){return N.string(b.kind)?K.is(b)||J.is(b)||te.is(b):z.is(b)}))}P.is=q})(U=t.WorkspaceEdit||(t.WorkspaceEdit={}));var V=function(){function P(q,F){this.edits=q,this.changeAnnotations=F}return P.prototype.insert=function(q,F,y){var b,L;if(y===void 0?b=w.insert(q,F):I.is(y)?(L=y,b=H.insert(q,F,y)):(this.assertChangeAnnotations(this.changeAnnotations),L=this.changeAnnotations.manage(y),b=H.insert(q,F,L)),this.edits.push(b),L!==void 0)return L},P.prototype.replace=function(q,F,y){var b,L;if(y===void 0?b=w.replace(q,F):I.is(y)?(L=y,b=H.replace(q,F,y)):(this.assertChangeAnnotations(this.changeAnnotations),L=this.changeAnnotations.manage(y),b=H.replace(q,F,L)),this.edits.push(b),L!==void 0)return L},P.prototype.delete=function(q,F){var y,b;if(F===void 0?y=w.del(q):I.is(F)?(b=F,y=H.del(q,F)):(this.assertChangeAnnotations(this.changeAnnotations),b=this.changeAnnotations.manage(F),y=H.del(q,b)),this.edits.push(y),b!==void 0)return b},P.prototype.add=function(q){this.edits.push(q)},P.prototype.all=function(){return this.edits},P.prototype.clear=function(){this.edits.splice(0,this.edits.length)},P.prototype.assertChangeAnnotations=function(q){if(q===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},P}(),Q=function(){function P(q){this._annotations=q===void 0?Object.create(null):q,this._counter=0,this._size=0}return P.prototype.all=function(){return this._annotations},Object.defineProperty(P.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),P.prototype.manage=function(q,F){var y;if(I.is(q)?y=q:(y=this.nextId(),F=q),this._annotations[y]!==void 0)throw new Error("Id "+y+" is already in use.");if(F===void 0)throw new Error("No annotation provided for id "+y);return this._annotations[y]=F,this._size++,y},P.prototype.nextId=function(){return this._counter++,this._counter.toString()},P}(),ne=function(){function P(q){var F=this;this._textEditChanges=Object.create(null),q!==void 0?(this._workspaceEdit=q,q.documentChanges?(this._changeAnnotations=new Q(q.changeAnnotations),q.changeAnnotations=this._changeAnnotations.all(),q.documentChanges.forEach(function(y){if(z.is(y)){var b=new V(y.edits,F._changeAnnotations);F._textEditChanges[y.textDocument.uri]=b}})):q.changes&&Object.keys(q.changes).forEach(function(y){var b=new V(q.changes[y]);F._textEditChanges[y]=b})):this._workspaceEdit={}}return Object.defineProperty(P.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),P.prototype.getTextEditChange=function(q){if(X.is(q)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var F={uri:q.uri,version:q.version},y=this._textEditChanges[F.uri];if(!y){var b=[],L={textDocument:F,edits:b};this._workspaceEdit.documentChanges.push(L),y=new V(b,this._changeAnnotations),this._textEditChanges[F.uri]=y}return y}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var y=this._textEditChanges[q];if(!y){var b=[];this._workspaceEdit.changes[q]=b,y=new V(b),this._textEditChanges[q]=y}return y}},P.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Q,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},P.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},P.prototype.createFile=function(q,F,y){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var b;R.is(F)||I.is(F)?b=F:y=F;var L,G;if(b===void 0?L=K.create(q,y):(G=I.is(b)?b:this._changeAnnotations.manage(b),L=K.create(q,y,G)),this._workspaceEdit.documentChanges.push(L),G!==void 0)return G},P.prototype.renameFile=function(q,F,y,b){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var L;R.is(y)||I.is(y)?L=y:b=y;var G,ue;if(L===void 0?G=J.create(q,F,b):(ue=I.is(L)?L:this._changeAnnotations.manage(L),G=J.create(q,F,b,ue)),this._workspaceEdit.documentChanges.push(G),ue!==void 0)return ue},P.prototype.deleteFile=function(q,F,y){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var b;R.is(F)||I.is(F)?b=F:y=F;var L,G;if(b===void 0?L=te.create(q,y):(G=I.is(b)?b:this._changeAnnotations.manage(b),L=te.create(q,y,G)),this._workspaceEdit.documentChanges.push(L),G!==void 0)return G},P}();t.WorkspaceChange=ne;var ve;(function(P){function q(y){return{uri:y}}P.create=q;function F(y){var b=y;return N.defined(b)&&N.string(b.uri)}P.is=F})(ve=t.TextDocumentIdentifier||(t.TextDocumentIdentifier={}));var de;(function(P){function q(y,b){return{uri:y,version:b}}P.create=q;function F(y){var b=y;return N.defined(b)&&N.string(b.uri)&&N.integer(b.version)}P.is=F})(de=t.VersionedTextDocumentIdentifier||(t.VersionedTextDocumentIdentifier={}));var X;(function(P){function q(y,b){return{uri:y,version:b}}P.create=q;function F(y){var b=y;return N.defined(b)&&N.string(b.uri)&&(b.version===null||N.integer(b.version))}P.is=F})(X=t.OptionalVersionedTextDocumentIdentifier||(t.OptionalVersionedTextDocumentIdentifier={}));var ce;(function(P){function q(y,b,L,G){return{uri:y,languageId:b,version:L,text:G}}P.create=q;function F(y){var b=y;return N.defined(b)&&N.string(b.uri)&&N.string(b.languageId)&&N.integer(b.version)&&N.string(b.text)}P.is=F})(ce=t.TextDocumentItem||(t.TextDocumentItem={}));var ie;(function(P){P.PlainText="plaintext",P.Markdown="markdown"})(ie=t.MarkupKind||(t.MarkupKind={})),function(P){function q(F){var y=F;return y===P.PlainText||y===P.Markdown}P.is=q}(ie=t.MarkupKind||(t.MarkupKind={}));var pe;(function(P){function q(F){var y=F;return N.objectLiteral(F)&&ie.is(y.kind)&&N.string(y.value)}P.is=q})(pe=t.MarkupContent||(t.MarkupContent={}));var he;(function(P){P.Text=1,P.Method=2,P.Function=3,P.Constructor=4,P.Field=5,P.Variable=6,P.Class=7,P.Interface=8,P.Module=9,P.Property=10,P.Unit=11,P.Value=12,P.Enum=13,P.Keyword=14,P.Snippet=15,P.Color=16,P.File=17,P.Reference=18,P.Folder=19,P.EnumMember=20,P.Constant=21,P.Struct=22,P.Event=23,P.Operator=24,P.TypeParameter=25})(he=t.CompletionItemKind||(t.CompletionItemKind={}));var be;(function(P){P.PlainText=1,P.Snippet=2})(be=t.InsertTextFormat||(t.InsertTextFormat={}));var _e;(function(P){P.Deprecated=1})(_e=t.CompletionItemTag||(t.CompletionItemTag={}));var Be;(function(P){function q(y,b,L){return{newText:y,insert:b,replace:L}}P.create=q;function F(y){var b=y;return b&&N.string(b.newText)&&a.is(b.insert)&&a.is(b.replace)}P.is=F})(Be=t.InsertReplaceEdit||(t.InsertReplaceEdit={}));var Je;(function(P){P.asIs=1,P.adjustIndentation=2})(Je=t.InsertTextMode||(t.InsertTextMode={}));var ze;(function(P){function q(F){return{label:F}}P.create=q})(ze=t.CompletionItem||(t.CompletionItem={}));var Fe;(function(P){function q(F,y){return{items:F||[],isIncomplete:!!y}}P.create=q})(Fe=t.CompletionList||(t.CompletionList={}));var xe;(function(P){function q(y){return y.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}P.fromPlainText=q;function F(y){var b=y;return N.string(b)||N.objectLiteral(b)&&N.string(b.language)&&N.string(b.value)}P.is=F})(xe=t.MarkedString||(t.MarkedString={}));var it;(function(P){function q(F){var y=F;return!!y&&N.objectLiteral(y)&&(pe.is(y.contents)||xe.is(y.contents)||N.typedArray(y.contents,xe.is))&&(F.range===void 0||a.is(F.range))}P.is=q})(it=t.Hover||(t.Hover={}));var ut;(function(P){function q(F,y){return y?{label:F,documentation:y}:{label:F}}P.create=q})(ut=t.ParameterInformation||(t.ParameterInformation={}));var Oe;(function(P){function q(F,y){for(var b=[],L=2;L<arguments.length;L++)b[L-2]=arguments[L];var G={label:F};return N.defined(y)&&(G.documentation=y),N.defined(b)?G.parameters=b:G.parameters=[],G}P.create=q})(Oe=t.SignatureInformation||(t.SignatureInformation={}));var me;(function(P){P.Text=1,P.Read=2,P.Write=3})(me=t.DocumentHighlightKind||(t.DocumentHighlightKind={}));var Ae;(function(P){function q(F,y){var b={range:F};return N.number(y)&&(b.kind=y),b}P.create=q})(Ae=t.DocumentHighlight||(t.DocumentHighlight={}));var Me;(function(P){P.File=1,P.Module=2,P.Namespace=3,P.Package=4,P.Class=5,P.Method=6,P.Property=7,P.Field=8,P.Constructor=9,P.Enum=10,P.Interface=11,P.Function=12,P.Variable=13,P.Constant=14,P.String=15,P.Number=16,P.Boolean=17,P.Array=18,P.Object=19,P.Key=20,P.Null=21,P.EnumMember=22,P.Struct=23,P.Event=24,P.Operator=25,P.TypeParameter=26})(Me=t.SymbolKind||(t.SymbolKind={}));var ir;(function(P){P.Deprecated=1})(ir=t.SymbolTag||(t.SymbolTag={}));var at;(function(P){function q(F,y,b,L,G){var ue={name:F,kind:y,location:{uri:L,range:b}};return G&&(ue.containerName=G),ue}P.create=q})(at=t.SymbolInformation||(t.SymbolInformation={}));var re;(function(P){function q(y,b,L,G,ue,fe){var Re={name:y,detail:b,kind:L,range:G,selectionRange:ue};return fe!==void 0&&(Re.children=fe),Re}P.create=q;function F(y){var b=y;return b&&N.string(b.name)&&N.number(b.kind)&&a.is(b.range)&&a.is(b.selectionRange)&&(b.detail===void 0||N.string(b.detail))&&(b.deprecated===void 0||N.boolean(b.deprecated))&&(b.children===void 0||Array.isArray(b.children))&&(b.tags===void 0||Array.isArray(b.tags))}P.is=F})(re=t.DocumentSymbol||(t.DocumentSymbol={}));var er;(function(P){P.Empty="",P.QuickFix="quickfix",P.Refactor="refactor",P.RefactorExtract="refactor.extract",P.RefactorInline="refactor.inline",P.RefactorRewrite="refactor.rewrite",P.Source="source",P.SourceOrganizeImports="source.organizeImports",P.SourceFixAll="source.fixAll"})(er=t.CodeActionKind||(t.CodeActionKind={}));var or;(function(P){function q(y,b){var L={diagnostics:y};return b!=null&&(L.only=b),L}P.create=q;function F(y){var b=y;return N.defined(b)&&N.typedArray(b.diagnostics,E.is)&&(b.only===void 0||N.typedArray(b.only,N.string))}P.is=F})(or=t.CodeActionContext||(t.CodeActionContext={}));var ht;(function(P){function q(y,b,L){var G={title:y},ue=!0;return typeof b=="string"?(ue=!1,G.kind=b):T.is(b)?G.command=b:G.edit=b,ue&&L!==void 0&&(G.kind=L),G}P.create=q;function F(y){var b=y;return b&&N.string(b.title)&&(b.diagnostics===void 0||N.typedArray(b.diagnostics,E.is))&&(b.kind===void 0||N.string(b.kind))&&(b.edit!==void 0||b.command!==void 0)&&(b.command===void 0||T.is(b.command))&&(b.isPreferred===void 0||N.boolean(b.isPreferred))&&(b.edit===void 0||U.is(b.edit))}P.is=F})(ht=t.CodeAction||(t.CodeAction={}));var rt;(function(P){function q(y,b){var L={range:y};return N.defined(b)&&(L.data=b),L}P.create=q;function F(y){var b=y;return N.defined(b)&&a.is(b.range)&&(N.undefined(b.command)||T.is(b.command))}P.is=F})(rt=t.CodeLens||(t.CodeLens={}));var Nt;(function(P){function q(y,b){return{tabSize:y,insertSpaces:b}}P.create=q;function F(y){var b=y;return N.defined(b)&&N.uinteger(b.tabSize)&&N.boolean(b.insertSpaces)}P.is=F})(Nt=t.FormattingOptions||(t.FormattingOptions={}));var lt;(function(P){function q(y,b,L){return{range:y,target:b,data:L}}P.create=q;function F(y){var b=y;return N.defined(b)&&a.is(b.range)&&(N.undefined(b.target)||N.string(b.target))}P.is=F})(lt=t.DocumentLink||(t.DocumentLink={}));var $t;(function(P){function q(y,b){return{range:y,parent:b}}P.create=q;function F(y){var b=y;return b!==void 0&&a.is(b.range)&&(b.parent===void 0||P.is(b.parent))}P.is=F})($t=t.SelectionRange||(t.SelectionRange={})),t.EOL=[`
`,`\r
`,"\r"];var Pt;(function(P){function q(L,G,ue,fe){return new M(L,G,ue,fe)}P.create=q;function F(L){var G=L;return!!(N.defined(G)&&N.string(G.uri)&&(N.undefined(G.languageId)||N.string(G.languageId))&&N.uinteger(G.lineCount)&&N.func(G.getText)&&N.func(G.positionAt)&&N.func(G.offsetAt))}P.is=F;function y(L,G){for(var ue=L.getText(),fe=b(G,function(kt,De){var Ut=kt.range.start.line-De.range.start.line;return Ut===0?kt.range.start.character-De.range.start.character:Ut}),Re=ue.length,ye=fe.length-1;ye>=0;ye--){var He=fe[ye],le=L.offsetAt(He.range.start),qe=L.offsetAt(He.range.end);if(qe<=Re)ue=ue.substring(0,le)+He.newText+ue.substring(qe,ue.length);else throw new Error("Overlapping edit");Re=le}return ue}P.applyEdits=y;function b(L,G){if(L.length<=1)return L;var ue=L.length/2|0,fe=L.slice(0,ue),Re=L.slice(ue);b(fe,G),b(Re,G);for(var ye=0,He=0,le=0;ye<fe.length&&He<Re.length;){var qe=G(fe[ye],Re[He]);qe<=0?L[le++]=fe[ye++]:L[le++]=Re[He++]}for(;ye<fe.length;)L[le++]=fe[ye++];for(;He<Re.length;)L[le++]=Re[He++];return L}})(Pt=t.TextDocument||(t.TextDocument={}));var M=function(){function P(q,F,y,b){this._uri=q,this._languageId=F,this._version=y,this._content=b,this._lineOffsets=void 0}return Object.defineProperty(P.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),P.prototype.getText=function(q){if(q){var F=this.offsetAt(q.start),y=this.offsetAt(q.end);return this._content.substring(F,y)}return this._content},P.prototype.update=function(q,F){this._content=q.text,this._version=F,this._lineOffsets=void 0},P.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var q=[],F=this._content,y=!0,b=0;b<F.length;b++){y&&(q.push(b),y=!1);var L=F.charAt(b);y=L==="\r"||L===`
`,L==="\r"&&b+1<F.length&&F.charAt(b+1)===`
`&&b++}y&&F.length>0&&q.push(F.length),this._lineOffsets=q}return this._lineOffsets},P.prototype.positionAt=function(q){q=Math.max(Math.min(q,this._content.length),0);var F=this.getLineOffsets(),y=0,b=F.length;if(b===0)return o.create(0,q);for(;y<b;){var L=Math.floor((y+b)/2);F[L]>q?b=L:y=L+1}var G=y-1;return o.create(G,q-F[G])},P.prototype.offsetAt=function(q){var F=this.getLineOffsets();if(q.line>=F.length)return this._content.length;if(q.line<0)return 0;var y=F[q.line],b=q.line+1<F.length?F[q.line+1]:this._content.length;return Math.max(Math.min(y+q.character,b),y)},Object.defineProperty(P.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),P}(),N;(function(P){var q=Object.prototype.toString;function F(qe){return typeof qe<"u"}P.defined=F;function y(qe){return typeof qe>"u"}P.undefined=y;function b(qe){return qe===!0||qe===!1}P.boolean=b;function L(qe){return q.call(qe)==="[object String]"}P.string=L;function G(qe){return q.call(qe)==="[object Number]"}P.number=G;function ue(qe,kt,De){return q.call(qe)==="[object Number]"&&kt<=qe&&qe<=De}P.numberRange=ue;function fe(qe){return q.call(qe)==="[object Number]"&&-2147483648<=qe&&qe<=2147483647}P.integer=fe;function Re(qe){return q.call(qe)==="[object Number]"&&0<=qe&&qe<=2147483647}P.uinteger=Re;function ye(qe){return q.call(qe)==="[object Function]"}P.func=ye;function He(qe){return qe!==null&&typeof qe=="object"}P.objectLiteral=He;function le(qe,kt){return Array.isArray(qe)&&qe.every(kt)}P.typedArray=le})(N||(N={}))})});var Wt=ee(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.ProtocolNotificationType=Rr.ProtocolNotificationType0=Rr.ProtocolRequestType=Rr.ProtocolRequestType0=Rr.RegistrationType=void 0;var oi=ii(),gc=class{constructor(t){this.method=t}};Rr.RegistrationType=gc;var mc=class extends oi.RequestType0{constructor(t){super(t)}};Rr.ProtocolRequestType0=mc;var vc=class extends oi.RequestType{constructor(t){super(t,oi.ParameterStructures.byName)}};Rr.ProtocolRequestType=vc;var _c=class extends oi.NotificationType0{constructor(t){super(t)}};Rr.ProtocolNotificationType0=_c;var yc=class extends oi.NotificationType{constructor(t){super(t,oi.ParameterStructures.byName)}};Rr.ProtocolNotificationType=yc});var Qf=ee(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.objectLiteral=Lt.typedArray=Lt.stringArray=Lt.array=Lt.func=Lt.error=Lt.number=Lt.string=Lt.boolean=void 0;function NT(e){return e===!0||e===!1}Lt.boolean=NT;function Xf(e){return typeof e=="string"||e instanceof String}Lt.string=Xf;function kT(e){return typeof e=="number"||e instanceof Number}Lt.number=kT;function MT(e){return e instanceof Error}Lt.error=MT;function qT(e){return typeof e=="function"}Lt.func=qT;function Yf(e){return Array.isArray(e)}Lt.array=Yf;function LT(e){return Yf(e)&&e.every(t=>Xf(t))}Lt.stringArray=LT;function jT(e,t){return Array.isArray(e)&&e.every(t)}Lt.typedArray=jT;function FT(e){return e!==null&&typeof e=="object"}Lt.objectLiteral=FT});var Jf=ee(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.ImplementationRequest=void 0;var HT=Wt(),$T;(function(e){e.method="textDocument/implementation",e.type=new HT.ProtocolRequestType(e.method)})($T=Vi.ImplementationRequest||(Vi.ImplementationRequest={}))});var Zf=ee(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});Gi.TypeDefinitionRequest=void 0;var UT=Wt(),BT;(function(e){e.method="textDocument/typeDefinition",e.type=new UT.ProtocolRequestType(e.method)})(BT=Gi.TypeDefinitionRequest||(Gi.TypeDefinitionRequest={}))});var th=ee(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.DidChangeWorkspaceFoldersNotification=ln.WorkspaceFoldersRequest=void 0;var eh=Wt(),VT;(function(e){e.type=new eh.ProtocolRequestType0("workspace/workspaceFolders")})(VT=ln.WorkspaceFoldersRequest||(ln.WorkspaceFoldersRequest={}));var GT;(function(e){e.type=new eh.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")})(GT=ln.DidChangeWorkspaceFoldersNotification||(ln.DidChangeWorkspaceFoldersNotification={}))});var rh=ee(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.ConfigurationRequest=void 0;var WT=Wt(),KT;(function(e){e.type=new WT.ProtocolRequestType("workspace/configuration")})(KT=Wi.ConfigurationRequest||(Wi.ConfigurationRequest={}))});var ih=ee(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.ColorPresentationRequest=dn.DocumentColorRequest=void 0;var nh=Wt(),zT;(function(e){e.method="textDocument/documentColor",e.type=new nh.ProtocolRequestType(e.method)})(zT=dn.DocumentColorRequest||(dn.DocumentColorRequest={}));var XT;(function(e){e.type=new nh.ProtocolRequestType("textDocument/colorPresentation")})(XT=dn.ColorPresentationRequest||(dn.ColorPresentationRequest={}))});var oh=ee(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.FoldingRangeRequest=pn.FoldingRangeKind=void 0;var YT=Wt(),QT;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(QT=pn.FoldingRangeKind||(pn.FoldingRangeKind={}));var JT;(function(e){e.method="textDocument/foldingRange",e.type=new YT.ProtocolRequestType(e.method)})(JT=pn.FoldingRangeRequest||(pn.FoldingRangeRequest={}))});var sh=ee(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.DeclarationRequest=void 0;var ZT=Wt(),eS;(function(e){e.method="textDocument/declaration",e.type=new ZT.ProtocolRequestType(e.method)})(eS=Ki.DeclarationRequest||(Ki.DeclarationRequest={}))});var ah=ee(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.SelectionRangeRequest=void 0;var tS=Wt(),rS;(function(e){e.method="textDocument/selectionRange",e.type=new tS.ProtocolRequestType(e.method)})(rS=zi.SelectionRangeRequest||(zi.SelectionRangeRequest={}))});var uh=ee(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.WorkDoneProgressCancelNotification=Ar.WorkDoneProgressCreateRequest=Ar.WorkDoneProgress=void 0;var nS=ii(),ch=Wt(),iS;(function(e){e.type=new nS.ProgressType;function t(r){return r===e.type}e.is=t})(iS=Ar.WorkDoneProgress||(Ar.WorkDoneProgress={}));var oS;(function(e){e.type=new ch.ProtocolRequestType("window/workDoneProgress/create")})(oS=Ar.WorkDoneProgressCreateRequest||(Ar.WorkDoneProgressCreateRequest={}));var sS;(function(e){e.type=new ch.ProtocolNotificationType("window/workDoneProgress/cancel")})(sS=Ar.WorkDoneProgressCancelNotification||(Ar.WorkDoneProgressCancelNotification={}))});var lh=ee(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.CallHierarchyOutgoingCallsRequest=xr.CallHierarchyIncomingCallsRequest=xr.CallHierarchyPrepareRequest=void 0;var Ec=Wt(),aS;(function(e){e.method="textDocument/prepareCallHierarchy",e.type=new Ec.ProtocolRequestType(e.method)})(aS=xr.CallHierarchyPrepareRequest||(xr.CallHierarchyPrepareRequest={}));var cS;(function(e){e.method="callHierarchy/incomingCalls",e.type=new Ec.ProtocolRequestType(e.method)})(cS=xr.CallHierarchyIncomingCallsRequest||(xr.CallHierarchyIncomingCallsRequest={}));var uS;(function(e){e.method="callHierarchy/outgoingCalls",e.type=new Ec.ProtocolRequestType(e.method)})(uS=xr.CallHierarchyOutgoingCallsRequest||(xr.CallHierarchyOutgoingCallsRequest={}))});var dh=ee(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.SemanticTokensRefreshRequest=ct.SemanticTokensRangeRequest=ct.SemanticTokensDeltaRequest=ct.SemanticTokensRequest=ct.SemanticTokensRegistrationType=ct.TokenFormat=ct.SemanticTokens=ct.SemanticTokenModifiers=ct.SemanticTokenTypes=void 0;var Xi=Wt(),lS;(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator"})(lS=ct.SemanticTokenTypes||(ct.SemanticTokenTypes={}));var dS;(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"})(dS=ct.SemanticTokenModifiers||(ct.SemanticTokenModifiers={}));var pS;(function(e){function t(r){let n=r;return n!==void 0&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}e.is=t})(pS=ct.SemanticTokens||(ct.SemanticTokens={}));var fS;(function(e){e.Relative="relative"})(fS=ct.TokenFormat||(ct.TokenFormat={}));var hS;(function(e){e.method="textDocument/semanticTokens",e.type=new Xi.RegistrationType(e.method)})(hS=ct.SemanticTokensRegistrationType||(ct.SemanticTokensRegistrationType={}));var gS;(function(e){e.method="textDocument/semanticTokens/full",e.type=new Xi.ProtocolRequestType(e.method)})(gS=ct.SemanticTokensRequest||(ct.SemanticTokensRequest={}));var mS;(function(e){e.method="textDocument/semanticTokens/full/delta",e.type=new Xi.ProtocolRequestType(e.method)})(mS=ct.SemanticTokensDeltaRequest||(ct.SemanticTokensDeltaRequest={}));var vS;(function(e){e.method="textDocument/semanticTokens/range",e.type=new Xi.ProtocolRequestType(e.method)})(vS=ct.SemanticTokensRangeRequest||(ct.SemanticTokensRangeRequest={}));var _S;(function(e){e.method="workspace/semanticTokens/refresh",e.type=new Xi.ProtocolRequestType0(e.method)})(_S=ct.SemanticTokensRefreshRequest||(ct.SemanticTokensRefreshRequest={}))});var ph=ee(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.ShowDocumentRequest=void 0;var yS=Wt(),ES;(function(e){e.method="window/showDocument",e.type=new yS.ProtocolRequestType(e.method)})(ES=Yi.ShowDocumentRequest||(Yi.ShowDocumentRequest={}))});var fh=ee(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.LinkedEditingRangeRequest=void 0;var bS=Wt(),CS;(function(e){e.method="textDocument/linkedEditingRange",e.type=new bS.ProtocolRequestType(e.method)})(CS=Qi.LinkedEditingRangeRequest||(Qi.LinkedEditingRangeRequest={}))});var hh=ee(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.WillDeleteFilesRequest=St.DidDeleteFilesNotification=St.DidRenameFilesNotification=St.WillRenameFilesRequest=St.DidCreateFilesNotification=St.WillCreateFilesRequest=St.FileOperationPatternKind=void 0;var si=Wt(),TS;(function(e){e.file="file",e.folder="folder"})(TS=St.FileOperationPatternKind||(St.FileOperationPatternKind={}));var SS;(function(e){e.method="workspace/willCreateFiles",e.type=new si.ProtocolRequestType(e.method)})(SS=St.WillCreateFilesRequest||(St.WillCreateFilesRequest={}));var RS;(function(e){e.method="workspace/didCreateFiles",e.type=new si.ProtocolNotificationType(e.method)})(RS=St.DidCreateFilesNotification||(St.DidCreateFilesNotification={}));var wS;(function(e){e.method="workspace/willRenameFiles",e.type=new si.ProtocolRequestType(e.method)})(wS=St.WillRenameFilesRequest||(St.WillRenameFilesRequest={}));var PS;(function(e){e.method="workspace/didRenameFiles",e.type=new si.ProtocolNotificationType(e.method)})(PS=St.DidRenameFilesNotification||(St.DidRenameFilesNotification={}));var OS;(function(e){e.method="workspace/didDeleteFiles",e.type=new si.ProtocolNotificationType(e.method)})(OS=St.DidDeleteFilesNotification||(St.DidDeleteFilesNotification={}));var IS;(function(e){e.method="workspace/willDeleteFiles",e.type=new si.ProtocolRequestType(e.method)})(IS=St.WillDeleteFilesRequest||(St.WillDeleteFilesRequest={}))});var gh=ee(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.MonikerRequest=Nr.MonikerKind=Nr.UniquenessLevel=void 0;var DS=Wt(),AS;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"})(AS=Nr.UniquenessLevel||(Nr.UniquenessLevel={}));var xS;(function(e){e.import="import",e.export="export",e.local="local"})(xS=Nr.MonikerKind||(Nr.MonikerKind={}));var NS;(function(e){e.method="textDocument/moniker",e.type=new DS.ProtocolRequestType(e.method)})(NS=Nr.MonikerRequest||(Nr.MonikerRequest={}))});var Eh=ee(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.DocumentLinkRequest=x.CodeLensRefreshRequest=x.CodeLensResolveRequest=x.CodeLensRequest=x.WorkspaceSymbolRequest=x.CodeActionResolveRequest=x.CodeActionRequest=x.DocumentSymbolRequest=x.DocumentHighlightRequest=x.ReferencesRequest=x.DefinitionRequest=x.SignatureHelpRequest=x.SignatureHelpTriggerKind=x.HoverRequest=x.CompletionResolveRequest=x.CompletionRequest=x.CompletionTriggerKind=x.PublishDiagnosticsNotification=x.WatchKind=x.FileChangeType=x.DidChangeWatchedFilesNotification=x.WillSaveTextDocumentWaitUntilRequest=x.WillSaveTextDocumentNotification=x.TextDocumentSaveReason=x.DidSaveTextDocumentNotification=x.DidCloseTextDocumentNotification=x.DidChangeTextDocumentNotification=x.TextDocumentContentChangeEvent=x.DidOpenTextDocumentNotification=x.TextDocumentSyncKind=x.TelemetryEventNotification=x.LogMessageNotification=x.ShowMessageRequest=x.ShowMessageNotification=x.MessageType=x.DidChangeConfigurationNotification=x.ExitNotification=x.ShutdownRequest=x.InitializedNotification=x.InitializeError=x.InitializeRequest=x.WorkDoneProgressOptions=x.TextDocumentRegistrationOptions=x.StaticRegistrationOptions=x.FailureHandlingKind=x.ResourceOperationKind=x.UnregistrationRequest=x.RegistrationRequest=x.DocumentSelector=x.DocumentFilter=void 0;x.MonikerRequest=x.MonikerKind=x.UniquenessLevel=x.WillDeleteFilesRequest=x.DidDeleteFilesNotification=x.WillRenameFilesRequest=x.DidRenameFilesNotification=x.WillCreateFilesRequest=x.DidCreateFilesNotification=x.FileOperationPatternKind=x.LinkedEditingRangeRequest=x.ShowDocumentRequest=x.SemanticTokensRegistrationType=x.SemanticTokensRefreshRequest=x.SemanticTokensRangeRequest=x.SemanticTokensDeltaRequest=x.SemanticTokensRequest=x.TokenFormat=x.SemanticTokens=x.SemanticTokenModifiers=x.SemanticTokenTypes=x.CallHierarchyPrepareRequest=x.CallHierarchyOutgoingCallsRequest=x.CallHierarchyIncomingCallsRequest=x.WorkDoneProgressCancelNotification=x.WorkDoneProgressCreateRequest=x.WorkDoneProgress=x.SelectionRangeRequest=x.DeclarationRequest=x.FoldingRangeRequest=x.ColorPresentationRequest=x.DocumentColorRequest=x.ConfigurationRequest=x.DidChangeWorkspaceFoldersNotification=x.WorkspaceFoldersRequest=x.TypeDefinitionRequest=x.ImplementationRequest=x.ApplyWorkspaceEditRequest=x.ExecuteCommandRequest=x.PrepareRenameRequest=x.RenameRequest=x.PrepareSupportDefaultBehavior=x.DocumentOnTypeFormattingRequest=x.DocumentRangeFormattingRequest=x.DocumentFormattingRequest=x.DocumentLinkResolveRequest=void 0;var fn=Qf(),$e=Wt(),kS=Jf();Object.defineProperty(x,"ImplementationRequest",{enumerable:!0,get:function(){return kS.ImplementationRequest}});var MS=Zf();Object.defineProperty(x,"TypeDefinitionRequest",{enumerable:!0,get:function(){return MS.TypeDefinitionRequest}});var mh=th();Object.defineProperty(x,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return mh.WorkspaceFoldersRequest}});Object.defineProperty(x,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return mh.DidChangeWorkspaceFoldersNotification}});var qS=rh();Object.defineProperty(x,"ConfigurationRequest",{enumerable:!0,get:function(){return qS.ConfigurationRequest}});var vh=ih();Object.defineProperty(x,"DocumentColorRequest",{enumerable:!0,get:function(){return vh.DocumentColorRequest}});Object.defineProperty(x,"ColorPresentationRequest",{enumerable:!0,get:function(){return vh.ColorPresentationRequest}});var LS=oh();Object.defineProperty(x,"FoldingRangeRequest",{enumerable:!0,get:function(){return LS.FoldingRangeRequest}});var jS=sh();Object.defineProperty(x,"DeclarationRequest",{enumerable:!0,get:function(){return jS.DeclarationRequest}});var FS=ah();Object.defineProperty(x,"SelectionRangeRequest",{enumerable:!0,get:function(){return FS.SelectionRangeRequest}});var bc=uh();Object.defineProperty(x,"WorkDoneProgress",{enumerable:!0,get:function(){return bc.WorkDoneProgress}});Object.defineProperty(x,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return bc.WorkDoneProgressCreateRequest}});Object.defineProperty(x,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return bc.WorkDoneProgressCancelNotification}});var Cc=lh();Object.defineProperty(x,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Cc.CallHierarchyIncomingCallsRequest}});Object.defineProperty(x,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Cc.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(x,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Cc.CallHierarchyPrepareRequest}});var Zr=dh();Object.defineProperty(x,"SemanticTokenTypes",{enumerable:!0,get:function(){return Zr.SemanticTokenTypes}});Object.defineProperty(x,"SemanticTokenModifiers",{enumerable:!0,get:function(){return Zr.SemanticTokenModifiers}});Object.defineProperty(x,"SemanticTokens",{enumerable:!0,get:function(){return Zr.SemanticTokens}});Object.defineProperty(x,"TokenFormat",{enumerable:!0,get:function(){return Zr.TokenFormat}});Object.defineProperty(x,"SemanticTokensRequest",{enumerable:!0,get:function(){return Zr.SemanticTokensRequest}});Object.defineProperty(x,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Zr.SemanticTokensDeltaRequest}});Object.defineProperty(x,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Zr.SemanticTokensRangeRequest}});Object.defineProperty(x,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Zr.SemanticTokensRefreshRequest}});Object.defineProperty(x,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Zr.SemanticTokensRegistrationType}});var HS=ph();Object.defineProperty(x,"ShowDocumentRequest",{enumerable:!0,get:function(){return HS.ShowDocumentRequest}});var $S=fh();Object.defineProperty(x,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return $S.LinkedEditingRangeRequest}});var Fn=hh();Object.defineProperty(x,"FileOperationPatternKind",{enumerable:!0,get:function(){return Fn.FileOperationPatternKind}});Object.defineProperty(x,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Fn.DidCreateFilesNotification}});Object.defineProperty(x,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Fn.WillCreateFilesRequest}});Object.defineProperty(x,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Fn.DidRenameFilesNotification}});Object.defineProperty(x,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Fn.WillRenameFilesRequest}});Object.defineProperty(x,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Fn.DidDeleteFilesNotification}});Object.defineProperty(x,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Fn.WillDeleteFilesRequest}});var Tc=gh();Object.defineProperty(x,"UniquenessLevel",{enumerable:!0,get:function(){return Tc.UniquenessLevel}});Object.defineProperty(x,"MonikerKind",{enumerable:!0,get:function(){return Tc.MonikerKind}});Object.defineProperty(x,"MonikerRequest",{enumerable:!0,get:function(){return Tc.MonikerRequest}});var _h;(function(e){function t(r){let n=r;return fn.string(n.language)||fn.string(n.scheme)||fn.string(n.pattern)}e.is=t})(_h=x.DocumentFilter||(x.DocumentFilter={}));var yh;(function(e){function t(r){if(!Array.isArray(r))return!1;for(let n of r)if(!fn.string(n)&&!_h.is(n))return!1;return!0}e.is=t})(yh=x.DocumentSelector||(x.DocumentSelector={}));var US;(function(e){e.type=new $e.ProtocolRequestType("client/registerCapability")})(US=x.RegistrationRequest||(x.RegistrationRequest={}));var BS;(function(e){e.type=new $e.ProtocolRequestType("client/unregisterCapability")})(BS=x.UnregistrationRequest||(x.UnregistrationRequest={}));var VS;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete"})(VS=x.ResourceOperationKind||(x.ResourceOperationKind={}));var GS;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"})(GS=x.FailureHandlingKind||(x.FailureHandlingKind={}));var WS;(function(e){function t(r){let n=r;return n&&fn.string(n.id)&&n.id.length>0}e.hasId=t})(WS=x.StaticRegistrationOptions||(x.StaticRegistrationOptions={}));var KS;(function(e){function t(r){let n=r;return n&&(n.documentSelector===null||yh.is(n.documentSelector))}e.is=t})(KS=x.TextDocumentRegistrationOptions||(x.TextDocumentRegistrationOptions={}));var zS;(function(e){function t(n){let o=n;return fn.objectLiteral(o)&&(o.workDoneProgress===void 0||fn.boolean(o.workDoneProgress))}e.is=t;function r(n){let o=n;return o&&fn.boolean(o.workDoneProgress)}e.hasWorkDoneProgress=r})(zS=x.WorkDoneProgressOptions||(x.WorkDoneProgressOptions={}));var XS;(function(e){e.type=new $e.ProtocolRequestType("initialize")})(XS=x.InitializeRequest||(x.InitializeRequest={}));var YS;(function(e){e.unknownProtocolVersion=1})(YS=x.InitializeError||(x.InitializeError={}));var QS;(function(e){e.type=new $e.ProtocolNotificationType("initialized")})(QS=x.InitializedNotification||(x.InitializedNotification={}));var JS;(function(e){e.type=new $e.ProtocolRequestType0("shutdown")})(JS=x.ShutdownRequest||(x.ShutdownRequest={}));var ZS;(function(e){e.type=new $e.ProtocolNotificationType0("exit")})(ZS=x.ExitNotification||(x.ExitNotification={}));var e0;(function(e){e.type=new $e.ProtocolNotificationType("workspace/didChangeConfiguration")})(e0=x.DidChangeConfigurationNotification||(x.DidChangeConfigurationNotification={}));var t0;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4})(t0=x.MessageType||(x.MessageType={}));var r0;(function(e){e.type=new $e.ProtocolNotificationType("window/showMessage")})(r0=x.ShowMessageNotification||(x.ShowMessageNotification={}));var n0;(function(e){e.type=new $e.ProtocolRequestType("window/showMessageRequest")})(n0=x.ShowMessageRequest||(x.ShowMessageRequest={}));var i0;(function(e){e.type=new $e.ProtocolNotificationType("window/logMessage")})(i0=x.LogMessageNotification||(x.LogMessageNotification={}));var o0;(function(e){e.type=new $e.ProtocolNotificationType("telemetry/event")})(o0=x.TelemetryEventNotification||(x.TelemetryEventNotification={}));var s0;(function(e){e.None=0,e.Full=1,e.Incremental=2})(s0=x.TextDocumentSyncKind||(x.TextDocumentSyncKind={}));var a0;(function(e){e.method="textDocument/didOpen",e.type=new $e.ProtocolNotificationType(e.method)})(a0=x.DidOpenTextDocumentNotification||(x.DidOpenTextDocumentNotification={}));var c0;(function(e){function t(n){let o=n;return o!=null&&typeof o.text=="string"&&o.range!==void 0&&(o.rangeLength===void 0||typeof o.rangeLength=="number")}e.isIncremental=t;function r(n){let o=n;return o!=null&&typeof o.text=="string"&&o.range===void 0&&o.rangeLength===void 0}e.isFull=r})(c0=x.TextDocumentContentChangeEvent||(x.TextDocumentContentChangeEvent={}));var u0;(function(e){e.method="textDocument/didChange",e.type=new $e.ProtocolNotificationType(e.method)})(u0=x.DidChangeTextDocumentNotification||(x.DidChangeTextDocumentNotification={}));var l0;(function(e){e.method="textDocument/didClose",e.type=new $e.ProtocolNotificationType(e.method)})(l0=x.DidCloseTextDocumentNotification||(x.DidCloseTextDocumentNotification={}));var d0;(function(e){e.method="textDocument/didSave",e.type=new $e.ProtocolNotificationType(e.method)})(d0=x.DidSaveTextDocumentNotification||(x.DidSaveTextDocumentNotification={}));var p0;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(p0=x.TextDocumentSaveReason||(x.TextDocumentSaveReason={}));var f0;(function(e){e.method="textDocument/willSave",e.type=new $e.ProtocolNotificationType(e.method)})(f0=x.WillSaveTextDocumentNotification||(x.WillSaveTextDocumentNotification={}));var h0;(function(e){e.method="textDocument/willSaveWaitUntil",e.type=new $e.ProtocolRequestType(e.method)})(h0=x.WillSaveTextDocumentWaitUntilRequest||(x.WillSaveTextDocumentWaitUntilRequest={}));var g0;(function(e){e.type=new $e.ProtocolNotificationType("workspace/didChangeWatchedFiles")})(g0=x.DidChangeWatchedFilesNotification||(x.DidChangeWatchedFilesNotification={}));var m0;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(m0=x.FileChangeType||(x.FileChangeType={}));var v0;(function(e){e.Create=1,e.Change=2,e.Delete=4})(v0=x.WatchKind||(x.WatchKind={}));var _0;(function(e){e.type=new $e.ProtocolNotificationType("textDocument/publishDiagnostics")})(_0=x.PublishDiagnosticsNotification||(x.PublishDiagnosticsNotification={}));var y0;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(y0=x.CompletionTriggerKind||(x.CompletionTriggerKind={}));var E0;(function(e){e.method="textDocument/completion",e.type=new $e.ProtocolRequestType(e.method)})(E0=x.CompletionRequest||(x.CompletionRequest={}));var b0;(function(e){e.method="completionItem/resolve",e.type=new $e.ProtocolRequestType(e.method)})(b0=x.CompletionResolveRequest||(x.CompletionResolveRequest={}));var C0;(function(e){e.method="textDocument/hover",e.type=new $e.ProtocolRequestType(e.method)})(C0=x.HoverRequest||(x.HoverRequest={}));var T0;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(T0=x.SignatureHelpTriggerKind||(x.SignatureHelpTriggerKind={}));var S0;(function(e){e.method="textDocument/signatureHelp",e.type=new $e.ProtocolRequestType(e.method)})(S0=x.SignatureHelpRequest||(x.SignatureHelpRequest={}));var R0;(function(e){e.method="textDocument/definition",e.type=new $e.ProtocolRequestType(e.method)})(R0=x.DefinitionRequest||(x.DefinitionRequest={}));var w0;(function(e){e.method="textDocument/references",e.type=new $e.ProtocolRequestType(e.method)})(w0=x.ReferencesRequest||(x.ReferencesRequest={}));var P0;(function(e){e.method="textDocument/documentHighlight",e.type=new $e.ProtocolRequestType(e.method)})(P0=x.DocumentHighlightRequest||(x.DocumentHighlightRequest={}));var O0;(function(e){e.method="textDocument/documentSymbol",e.type=new $e.ProtocolRequestType(e.method)})(O0=x.DocumentSymbolRequest||(x.DocumentSymbolRequest={}));var I0;(function(e){e.method="textDocument/codeAction",e.type=new $e.ProtocolRequestType(e.method)})(I0=x.CodeActionRequest||(x.CodeActionRequest={}));var D0;(function(e){e.method="codeAction/resolve",e.type=new $e.ProtocolRequestType(e.method)})(D0=x.CodeActionResolveRequest||(x.CodeActionResolveRequest={}));var A0;(function(e){e.method="workspace/symbol",e.type=new $e.ProtocolRequestType(e.method)})(A0=x.WorkspaceSymbolRequest||(x.WorkspaceSymbolRequest={}));var x0;(function(e){e.method="textDocument/codeLens",e.type=new $e.ProtocolRequestType(e.method)})(x0=x.CodeLensRequest||(x.CodeLensRequest={}));var N0;(function(e){e.method="codeLens/resolve",e.type=new $e.ProtocolRequestType(e.method)})(N0=x.CodeLensResolveRequest||(x.CodeLensResolveRequest={}));var k0;(function(e){e.method="workspace/codeLens/refresh",e.type=new $e.ProtocolRequestType0(e.method)})(k0=x.CodeLensRefreshRequest||(x.CodeLensRefreshRequest={}));var M0;(function(e){e.method="textDocument/documentLink",e.type=new $e.ProtocolRequestType(e.method)})(M0=x.DocumentLinkRequest||(x.DocumentLinkRequest={}));var q0;(function(e){e.method="documentLink/resolve",e.type=new $e.ProtocolRequestType(e.method)})(q0=x.DocumentLinkResolveRequest||(x.DocumentLinkResolveRequest={}));var L0;(function(e){e.method="textDocument/formatting",e.type=new $e.ProtocolRequestType(e.method)})(L0=x.DocumentFormattingRequest||(x.DocumentFormattingRequest={}));var j0;(function(e){e.method="textDocument/rangeFormatting",e.type=new $e.ProtocolRequestType(e.method)})(j0=x.DocumentRangeFormattingRequest||(x.DocumentRangeFormattingRequest={}));var F0;(function(e){e.method="textDocument/onTypeFormatting",e.type=new $e.ProtocolRequestType(e.method)})(F0=x.DocumentOnTypeFormattingRequest||(x.DocumentOnTypeFormattingRequest={}));var H0;(function(e){e.Identifier=1})(H0=x.PrepareSupportDefaultBehavior||(x.PrepareSupportDefaultBehavior={}));var $0;(function(e){e.method="textDocument/rename",e.type=new $e.ProtocolRequestType(e.method)})($0=x.RenameRequest||(x.RenameRequest={}));var U0;(function(e){e.method="textDocument/prepareRename",e.type=new $e.ProtocolRequestType(e.method)})(U0=x.PrepareRenameRequest||(x.PrepareRenameRequest={}));var B0;(function(e){e.type=new $e.ProtocolRequestType("workspace/executeCommand")})(B0=x.ExecuteCommandRequest||(x.ExecuteCommandRequest={}));var V0;(function(e){e.type=new $e.ProtocolRequestType("workspace/applyEdit")})(V0=x.ApplyWorkspaceEditRequest||(x.ApplyWorkspaceEditRequest={}))});var Ch=ee(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.createProtocolConnection=void 0;var bh=ii();function G0(e,t,r,n){return bh.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),bh.createMessageConnection(e,t,r,n)}Vo.createProtocolConnection=G0});var Th=ee(cr=>{"use strict";var W0=cr&&cr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Go=cr&&cr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&W0(t,e,r)};Object.defineProperty(cr,"__esModule",{value:!0});cr.LSPErrorCodes=cr.createProtocolConnection=void 0;Go(ii(),cr);Go(zf(),cr);Go(Wt(),cr);Go(Eh(),cr);var K0=Ch();Object.defineProperty(cr,"createProtocolConnection",{enumerable:!0,get:function(){return K0.createProtocolConnection}});var z0;(function(e){e.lspReservedErrorRangeStart=-32899,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(z0=cr.LSPErrorCodes||(cr.LSPErrorCodes={}))});var Rt=ee(Hr=>{"use strict";var X0=Hr&&Hr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Sh=Hr&&Hr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&X0(t,e,r)};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.createProtocolConnection=void 0;var Y0=hc();Sh(hc(),Hr);Sh(Th(),Hr);function Q0(e,t,r,n){return Y0.createMessageConnection(e,t,r,n)}Hr.createProtocolConnection=Q0});var wc=ee(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.toJSONObject=ci.ConfigurationFeature=void 0;var Sc=require("vscode"),J0=Rt(),Rc=class{constructor(t){this._client=t}fillClientCapabilities(t){t.workspace=t.workspace||{},t.workspace.configuration=!0}initialize(){let t=this._client;t.onRequest(J0.ConfigurationRequest.type,(r,n)=>{let o=i=>{let s=[];for(let c of i.items){let l=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;s.push(this.getConfiguration(l,c.section!==null?c.section:void 0))}return s},a=t.clientOptions.middleware.workspace;return a&&a.configuration?a.configuration(r,n,o):o(r,n)})}getConfiguration(t,r){let n=null;if(r){let o=r.lastIndexOf(".");if(o===-1)n=ai(Sc.workspace.getConfiguration(void 0,t).get(r));else{let a=Sc.workspace.getConfiguration(r.substr(0,o),t);a&&(n=ai(a.get(r.substr(o+1))))}}else{let o=Sc.workspace.getConfiguration(void 0,t);n={};for(let a of Object.keys(o))o.has(a)&&(n[a]=ai(o.get(a)))}return n===void 0&&(n=null),n}dispose(){}};ci.ConfigurationFeature=Rc;function ai(e){if(e){if(Array.isArray(e))return e.map(ai);if(typeof e=="object"){let t=Object.create(null);for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=ai(e[r]));return t}}return e}ci.toJSONObject=ai});var Ic=ee(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});var Z0=require("vscode"),Pc=class extends Z0.CompletionItem{constructor(t){super(t)}};Oc.default=Pc});var xc=ee(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});var eR=require("vscode"),Dc=class extends eR.CodeLens{constructor(t){super(t)}};Ac.default=Dc});var Mc=ee(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});var tR=require("vscode"),Nc=class extends tR.DocumentLink{constructor(t,r){super(t,r)}};kc.default=Nc});var jc=ee(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});var rR=require("vscode"),qc=class extends rR.CodeAction{constructor(t,r){super(t),this.data=r}};Lc.default=qc});var $c=ee(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.ProtocolDiagnostic=Hn.DiagnosticCode=void 0;var nR=require("vscode"),Fc=cn(),iR;(function(e){function t(r){let n=r;return n!=null&&(Fc.number(n.value)||Fc.string(n.value))&&Fc.string(n.target)}e.is=t})(iR=Hn.DiagnosticCode||(Hn.DiagnosticCode={}));var Hc=class extends nR.Diagnostic{constructor(t,r,n,o){super(t,r,n),this.data=o,this.hasDiagnosticCode=!1}};Hn.ProtocolDiagnostic=Hc});var Vc=ee(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});var oR=require("vscode"),Uc=class extends oR.CallHierarchyItem{constructor(t,r,n,o,a,i,s){super(t,r,n,o,a,i),s!==void 0&&(this.data=s)}};Bc.default=Uc});var wh=ee(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.createConverter=void 0;var Kt=require("vscode"),st=Rt(),Ji=cn(),sR=Ic(),aR=xc(),cR=Mc(),uR=jc(),Rh=$c(),lR=Vc(),dR=Rt(),Gc;(function(e){function t(r){let n=r;return n&&!!n.inserting&&!!n.replacing}e.is=t})(Gc||(Gc={}));function pR(e){let r=e||(y=>y.toString());function n(y){return r(y)}function o(y){return{uri:r(y.uri)}}function a(y){return{uri:r(y.uri),version:y.version}}function i(y){return{textDocument:{uri:r(y.uri),languageId:y.languageId,version:y.version,text:y.getText()}}}function s(y){let b=y;return!!b.document&&!!b.contentChanges}function c(y){let b=y;return!!b.uri&&!!b.version}function l(y){if(c(y))return{textDocument:{uri:r(y.uri),version:y.version},contentChanges:[{text:y.getText()}]};if(s(y)){let b=y.document;return{textDocument:{uri:r(b.uri),version:b.version},contentChanges:y.contentChanges.map(G=>{let ue=G.range;return{range:{start:{line:ue.start.line,character:ue.start.character},end:{line:ue.end.line,character:ue.end.character}},rangeLength:G.rangeLength,text:G.text}})}}else throw Error("Unsupported text document change parameter")}function d(y){return{textDocument:o(y)}}function u(y,b=!1){let L={textDocument:o(y)};return b&&(L.text=y.getText()),L}function p(y){switch(y){case Kt.TextDocumentSaveReason.Manual:return st.TextDocumentSaveReason.Manual;case Kt.TextDocumentSaveReason.AfterDelay:return st.TextDocumentSaveReason.AfterDelay;case Kt.TextDocumentSaveReason.FocusOut:return st.TextDocumentSaveReason.FocusOut}return st.TextDocumentSaveReason.Manual}function f(y){return{textDocument:o(y.document),reason:p(y.reason)}}function g(y){return{files:y.files.map(b=>({uri:r(b)}))}}function m(y){return{files:y.files.map(b=>({oldUri:r(b.oldUri),newUri:r(b.newUri)}))}}function _(y){return{files:y.files.map(b=>({uri:r(b)}))}}function E(y){return{files:y.files.map(b=>({uri:r(b)}))}}function T(y){return{files:y.files.map(b=>({oldUri:r(b.oldUri),newUri:r(b.newUri)}))}}function w(y){return{files:y.files.map(b=>({uri:r(b)}))}}function R(y,b){return{textDocument:o(y),position:ne(b)}}function I(y){switch(y){case Kt.CompletionTriggerKind.TriggerCharacter:return st.CompletionTriggerKind.TriggerCharacter;case Kt.CompletionTriggerKind.TriggerForIncompleteCompletions:return st.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return st.CompletionTriggerKind.Invoked}}function H(y,b,L){return{textDocument:o(y),position:ne(b),context:{triggerKind:I(L.triggerKind),triggerCharacter:L.triggerCharacter}}}function z(y){switch(y){case Kt.SignatureHelpTriggerKind.Invoke:return st.SignatureHelpTriggerKind.Invoked;case Kt.SignatureHelpTriggerKind.TriggerCharacter:return st.SignatureHelpTriggerKind.TriggerCharacter;case Kt.SignatureHelpTriggerKind.ContentChange:return st.SignatureHelpTriggerKind.ContentChange}}function K(y){return{label:y.label}}function J(y){return y.map(K)}function te(y){return{label:y.label,parameters:J(y.parameters)}}function U(y){return y.map(te)}function V(y){return y===void 0?y:{signatures:U(y.signatures),activeSignature:y.activeSignature,activeParameter:y.activeParameter}}function Q(y,b,L){return{textDocument:o(y),position:ne(b),context:{isRetrigger:L.isRetrigger,triggerCharacter:L.triggerCharacter,triggerKind:z(L.triggerKind),activeSignatureHelp:V(L.activeSignatureHelp)}}}function ne(y){return{line:y.line,character:y.character}}function ve(y){return y==null?y:{line:y.line,character:y.character}}function de(y){let b=[];for(let L of y)b.push(ve(L));return b}function X(y){return y==null?y:{start:ve(y.start),end:ve(y.end)}}function ce(y){return y==null?y:st.Location.create(n(y.uri),X(y.range))}function ie(y){switch(y){case Kt.DiagnosticSeverity.Error:return st.DiagnosticSeverity.Error;case Kt.DiagnosticSeverity.Warning:return st.DiagnosticSeverity.Warning;case Kt.DiagnosticSeverity.Information:return st.DiagnosticSeverity.Information;case Kt.DiagnosticSeverity.Hint:return st.DiagnosticSeverity.Hint}}function pe(y){if(!y)return;let b=[];for(let L of y){let G=he(L);G!==void 0&&b.push(G)}return b.length>0?b:void 0}function he(y){switch(y){case Kt.DiagnosticTag.Unnecessary:return st.DiagnosticTag.Unnecessary;case Kt.DiagnosticTag.Deprecated:return st.DiagnosticTag.Deprecated;default:return}}function be(y){return{message:y.message,location:ce(y.location)}}function _e(y){return y.map(be)}function Be(y){if(y!=null)return Ji.number(y)||Ji.string(y)?y:{value:y.value,target:n(y.target)}}function Je(y){let b=st.Diagnostic.create(X(y.range),y.message),L=y instanceof Rh.ProtocolDiagnostic?y:void 0;L!==void 0&&L.data!==void 0&&(b.data=L.data);let G=Be(y.code);return Rh.DiagnosticCode.is(G)?L!==void 0&&L.hasDiagnosticCode?b.code=G:(b.code=G.value,b.codeDescription={href:G.target}):b.code=G,Ji.number(y.severity)&&(b.severity=ie(y.severity)),Array.isArray(y.tags)&&(b.tags=pe(y.tags)),y.relatedInformation&&(b.relatedInformation=_e(y.relatedInformation)),y.source&&(b.source=y.source),b}function ze(y){return y==null?y:y.map(Je)}function Fe(y,b){switch(y){case"$string":return b;case st.MarkupKind.PlainText:return{kind:y,value:b};case st.MarkupKind.Markdown:return{kind:y,value:b.value};default:return`Unsupported Markup content received. Kind is: ${y}`}}function xe(y){switch(y){case Kt.CompletionItemTag.Deprecated:return st.CompletionItemTag.Deprecated}}function it(y){if(y===void 0)return y;let b=[];for(let L of y){let G=xe(L);G!==void 0&&b.push(G)}return b}function ut(y,b){return b!==void 0?b:y+1}function Oe(y){let b={label:y.label},L=y instanceof sR.default?y:void 0;y.detail&&(b.detail=y.detail),y.documentation&&(!L||L.documentationFormat==="$string"?b.documentation=y.documentation:b.documentation=Fe(L.documentationFormat,y.documentation)),y.filterText&&(b.filterText=y.filterText),me(b,y),Ji.number(y.kind)&&(b.kind=ut(y.kind,L&&L.originalItemKind)),y.sortText&&(b.sortText=y.sortText),y.additionalTextEdits&&(b.additionalTextEdits=ir(y.additionalTextEdits)),y.commitCharacters&&(b.commitCharacters=y.commitCharacters.slice()),y.command&&(b.command=lt(y.command)),(y.preselect===!0||y.preselect===!1)&&(b.preselect=y.preselect);let G=it(y.tags);if(L){if(L.data!==void 0&&(b.data=L.data),L.deprecated===!0||L.deprecated===!1){if(L.deprecated===!0&&G!==void 0&&G.length>0){let ue=G.indexOf(Kt.CompletionItemTag.Deprecated);ue!==-1&&G.splice(ue,1)}b.deprecated=L.deprecated}L.insertTextMode!==void 0&&(b.insertTextMode=L.insertTextMode)}return G!==void 0&&G.length>0&&(b.tags=G),b.insertTextMode===void 0&&y.keepWhitespace===!0&&(b.insertTextMode=dR.InsertTextMode.adjustIndentation),b}function me(y,b){let L=st.InsertTextFormat.PlainText,G,ue;b.textEdit?(G=b.textEdit.newText,ue=b.textEdit.range):b.insertText instanceof Kt.SnippetString?(L=st.InsertTextFormat.Snippet,G=b.insertText.value):G=b.insertText,b.range&&(ue=b.range),y.insertTextFormat=L,b.fromEdit&&G!==void 0&&ue!==void 0?y.textEdit=Ae(G,ue):y.insertText=G}function Ae(y,b){return Gc.is(b)?st.InsertReplaceEdit.create(y,X(b.inserting),X(b.replacing)):{newText:y,range:X(b)}}function Me(y){return{range:X(y.range),newText:y.newText}}function ir(y){return y==null?y:y.map(Me)}function at(y){return y<=Kt.SymbolKind.TypeParameter?y+1:st.SymbolKind.Property}function re(y){return y}function er(y){return y.map(re)}function or(y,b,L){return{textDocument:o(y),position:ne(b),context:{includeDeclaration:L.includeDeclaration}}}function ht(y){let b=st.CodeAction.create(y.title);if(y instanceof uR.default&&y.data!==void 0&&(b.data=y.data),y.kind!==void 0&&(b.kind=Nt(y.kind)),y.diagnostics!==void 0&&(b.diagnostics=ze(y.diagnostics)),y.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return y.command!==void 0&&(b.command=lt(y.command)),y.isPreferred!==void 0&&(b.isPreferred=y.isPreferred),y.disabled!==void 0&&(b.disabled={reason:y.disabled.reason}),b}function rt(y){if(y==null)return y;let b;return y.only&&Ji.string(y.only.value)&&(b=[y.only.value]),st.CodeActionContext.create(ze(y.diagnostics),b)}function Nt(y){if(y!=null)return y.value}function lt(y){let b=st.Command.create(y.title,y.command);return y.arguments&&(b.arguments=y.arguments),b}function $t(y){let b=st.CodeLens.create(X(y.range));return y.command&&(b.command=lt(y.command)),y instanceof aR.default&&y.data&&(b.data=y.data),b}function Pt(y,b){let L={tabSize:y.tabSize,insertSpaces:y.insertSpaces};return b.trimTrailingWhitespace&&(L.trimTrailingWhitespace=!0),b.trimFinalNewlines&&(L.trimFinalNewlines=!0),b.insertFinalNewline&&(L.insertFinalNewline=!0),L}function M(y){return{textDocument:o(y)}}function N(y){return{textDocument:o(y)}}function P(y){let b=st.DocumentLink.create(X(y.range));y.target&&(b.target=n(y.target)),y.tooltip!==void 0&&(b.tooltip=y.tooltip);let L=y instanceof cR.default?y:void 0;return L&&L.data&&(b.data=L.data),b}function q(y){return{textDocument:o(y)}}function F(y){let b={name:y.name,kind:at(y.kind),uri:n(y.uri),range:X(y.range),selectionRange:X(y.selectionRange)};return y.detail!==void 0&&y.detail.length>0&&(b.detail=y.detail),y.tags!==void 0&&(b.tags=er(y.tags)),y instanceof lR.default&&y.data!==void 0&&(b.data=y.data),b}return{asUri:n,asTextDocumentIdentifier:o,asVersionedTextDocumentIdentifier:a,asOpenTextDocumentParams:i,asChangeTextDocumentParams:l,asCloseTextDocumentParams:d,asSaveTextDocumentParams:u,asWillSaveTextDocumentParams:f,asDidCreateFilesParams:g,asDidRenameFilesParams:m,asDidDeleteFilesParams:_,asWillCreateFilesParams:E,asWillRenameFilesParams:T,asWillDeleteFilesParams:w,asTextDocumentPositionParams:R,asCompletionParams:H,asSignatureHelpParams:Q,asWorkerPosition:ne,asRange:X,asPosition:ve,asPositions:de,asLocation:ce,asDiagnosticSeverity:ie,asDiagnosticTag:he,asDiagnostic:Je,asDiagnostics:ze,asCompletionItem:Oe,asTextEdit:Me,asSymbolKind:at,asSymbolTag:re,asSymbolTags:er,asReferenceParams:or,asCodeAction:ht,asCodeActionContext:rt,asCommand:lt,asCodeLens:$t,asFormattingOptions:Pt,asDocumentSymbolParams:M,asCodeLensParams:N,asDocumentLink:P,asDocumentLinkParams:q,asCallHierarchyItem:F}}Wo.createConverter=pR});var Ih=ee(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.createConverter=void 0;var Pe=require("vscode"),Xe=Rt(),kr=cn(),fR=Ic(),hR=xc(),gR=Mc(),mR=jc(),Ph=$c(),vR=Vc(),Oh=Rt(),Ko;(function(e){function t(r){let n=r;return n&&kr.string(n.language)&&kr.string(n.value)}e.is=t})(Ko||(Ko={}));function _R(e,t){let n=e||(S=>Pe.Uri.parse(S));function o(S){return n(S)}function a(S){return S.map(i)}function i(S){let Z=new Ph.ProtocolDiagnostic(p(S.range),S.message,g(S.severity),S.data);return S.code!==void 0&&(Xe.CodeDescription.is(S.codeDescription)?Z.code={value:S.code,target:o(S.codeDescription.href)}:Ph.DiagnosticCode.is(S.code)?(Z.hasDiagnosticCode=!0,Z.code={value:S.code.value,target:o(S.code.target)}):Z.code=S.code),S.source&&(Z.source=S.source),S.relatedInformation&&(Z.relatedInformation=s(S.relatedInformation)),Array.isArray(S.tags)&&(Z.tags=l(S.tags)),Z}function s(S){return S.map(c)}function c(S){return new Pe.DiagnosticRelatedInformation(X(S.location),S.message)}function l(S){if(!S)return;let Z=[];for(let ge of S){let Ve=d(ge);Ve!==void 0&&Z.push(Ve)}return Z.length>0?Z:void 0}function d(S){switch(S){case Xe.DiagnosticTag.Unnecessary:return Pe.DiagnosticTag.Unnecessary;case Xe.DiagnosticTag.Deprecated:return Pe.DiagnosticTag.Deprecated;default:return}}function u(S){if(!!S)return new Pe.Position(S.line,S.character)}function p(S){if(!!S)return new Pe.Range(u(S.start),u(S.end))}function f(S){return S.map(Z=>p(Z))}function g(S){if(S==null)return Pe.DiagnosticSeverity.Error;switch(S){case Xe.DiagnosticSeverity.Error:return Pe.DiagnosticSeverity.Error;case Xe.DiagnosticSeverity.Warning:return Pe.DiagnosticSeverity.Warning;case Xe.DiagnosticSeverity.Information:return Pe.DiagnosticSeverity.Information;case Xe.DiagnosticSeverity.Hint:return Pe.DiagnosticSeverity.Hint}return Pe.DiagnosticSeverity.Error}function m(S){if(kr.string(S))return E(S);if(Ko.is(S))return E().appendCodeblock(S.value,S.language);if(Array.isArray(S)){let Z=[];for(let ge of S){let Ve=E();Ko.is(ge)?Ve.appendCodeblock(ge.value,ge.language):Ve.appendMarkdown(ge),Z.push(Ve)}return Z}else{let Z;switch(S.kind){case Xe.MarkupKind.Markdown:return E(S.value);case Xe.MarkupKind.PlainText:return Z=E(),Z.appendText(S.value),Z;default:return Z=E(),Z.appendText(`Unsupported Markup content received. Kind is: ${S.kind}`),Z}}}function _(S){if(kr.string(S))return S;switch(S.kind){case Xe.MarkupKind.Markdown:return E(S.value);case Xe.MarkupKind.PlainText:return S.value;default:return`Unsupported Markup content received. Kind is: ${S.kind}`}}function E(S){let Z=new Pe.MarkdownString(S);return t===!0&&(Z.isTrusted=t),Z}function T(S){if(!!S)return new Pe.Hover(m(S.contents),p(S.range))}function w(S){if(!S)return;if(Array.isArray(S))return S.map(z);let Z=S;return new Pe.CompletionList(Z.items.map(z),Z.isIncomplete)}function R(S){return Xe.CompletionItemKind.Text<=S&&S<=Xe.CompletionItemKind.TypeParameter?[S-1,void 0]:[Pe.CompletionItemKind.Text,S]}function I(S){switch(S){case Xe.CompletionItemTag.Deprecated:return Pe.CompletionItemTag.Deprecated}}function H(S){if(S==null)return[];let Z=[];for(let ge of S){let Ve=I(ge);Ve!==void 0&&Z.push(Ve)}return Z}function z(S){let Z=H(S.tags),ge=new fR.default(S.label);S.detail&&(ge.detail=S.detail),S.documentation&&(ge.documentation=_(S.documentation),ge.documentationFormat=kr.string(S.documentation)?"$string":S.documentation.kind),S.filterText&&(ge.filterText=S.filterText);let Ve=K(S);if(Ve&&(ge.insertText=Ve.text,ge.range=Ve.range,ge.fromEdit=Ve.fromEdit),kr.number(S.kind)){let[Qe,_t]=R(S.kind);ge.kind=Qe,_t&&(ge.originalItemKind=_t)}return S.sortText&&(ge.sortText=S.sortText),S.additionalTextEdits&&(ge.additionalTextEdits=U(S.additionalTextEdits)),kr.stringArray(S.commitCharacters)&&(ge.commitCharacters=S.commitCharacters.slice()),S.command&&(ge.command=Me(S.command)),(S.deprecated===!0||S.deprecated===!1)&&(ge.deprecated=S.deprecated,S.deprecated===!0&&Z.push(Pe.CompletionItemTag.Deprecated)),(S.preselect===!0||S.preselect===!1)&&(ge.preselect=S.preselect),S.data!==void 0&&(ge.data=S.data),Z.length>0&&(ge.tags=Z),S.insertTextMode!==void 0&&(ge.insertTextMode=S.insertTextMode,S.insertTextMode===Oh.InsertTextMode.asIs&&(ge.keepWhitespace=!0)),ge}function K(S){return S.textEdit?S.insertTextFormat===Xe.InsertTextFormat.Snippet?{text:new Pe.SnippetString(S.textEdit.newText),range:J(S.textEdit),fromEdit:!0}:{text:S.textEdit.newText,range:J(S.textEdit),fromEdit:!0}:S.insertText?S.insertTextFormat===Xe.InsertTextFormat.Snippet?{text:new Pe.SnippetString(S.insertText),fromEdit:!1}:{text:S.insertText,fromEdit:!1}:void 0}function J(S){return Xe.InsertReplaceEdit.is(S)?{inserting:p(S.insert),replacing:p(S.replace)}:p(S.range)}function te(S){if(!!S)return new Pe.TextEdit(p(S.range),S.newText)}function U(S){if(!!S)return S.map(te)}function V(S){if(!S)return;let Z=new Pe.SignatureHelp;return kr.number(S.activeSignature)?Z.activeSignature=S.activeSignature:Z.activeSignature=0,kr.number(S.activeParameter)?Z.activeParameter=S.activeParameter:Z.activeParameter=0,S.signatures&&(Z.signatures=Q(S.signatures)),Z}function Q(S){return S.map(ne)}function ne(S){let Z=new Pe.SignatureInformation(S.label);return S.documentation!==void 0&&(Z.documentation=_(S.documentation)),S.parameters!==void 0&&(Z.parameters=ve(S.parameters)),S.activeParameter!==void 0&&(Z.activeParameter=S.activeParameter),Z}function ve(S){return S.map(de)}function de(S){let Z=new Pe.ParameterInformation(S.label);return S.documentation&&(Z.documentation=_(S.documentation)),Z}function X(S){if(!!S)return new Pe.Location(n(S.uri),p(S.range))}function ce(S){if(!!S)return he(S)}function ie(S){if(!!S)return he(S)}function pe(S){if(!S)return;let Z={targetUri:n(S.targetUri),targetRange:p(S.targetRange),originSelectionRange:p(S.originSelectionRange),targetSelectionRange:p(S.targetSelectionRange)};if(!Z.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return Z}function he(S){if(!!S)return kr.array(S)?S.length===0?[]:Xe.LocationLink.is(S[0])?S.map(ge=>pe(ge)):S.map(ge=>X(ge)):Xe.LocationLink.is(S)?[pe(S)]:X(S)}function be(S){if(!!S)return S.map(Z=>X(Z))}function _e(S){if(!!S)return S.map(Be)}function Be(S){let Z=new Pe.DocumentHighlight(p(S.range));return kr.number(S.kind)&&(Z.kind=Je(S.kind)),Z}function Je(S){switch(S){case Xe.DocumentHighlightKind.Text:return Pe.DocumentHighlightKind.Text;case Xe.DocumentHighlightKind.Read:return Pe.DocumentHighlightKind.Read;case Xe.DocumentHighlightKind.Write:return Pe.DocumentHighlightKind.Write}return Pe.DocumentHighlightKind.Text}function ze(S,Z){if(!!S)return S.map(ge=>ut(ge,Z))}function Fe(S){return S<=Xe.SymbolKind.TypeParameter?S-1:Pe.SymbolKind.Property}function xe(S){switch(S){case Xe.SymbolTag.Deprecated:return Pe.SymbolTag.Deprecated;default:return}}function it(S){if(S==null)return;let Z=[];for(let ge of S){let Ve=xe(ge);Ve!==void 0&&Z.push(Ve)}return Z.length===0?void 0:Z}function ut(S,Z){let ge=new Pe.SymbolInformation(S.name,Fe(S.kind),p(S.location.range),S.location.uri?n(S.location.uri):Z);return Ae(ge,S),S.containerName&&(ge.containerName=S.containerName),ge}function Oe(S){if(S!=null)return S.map(me)}function me(S){let Z=new Pe.DocumentSymbol(S.name,S.detail||"",Fe(S.kind),p(S.range),p(S.selectionRange));if(Ae(Z,S),S.children!==void 0&&S.children.length>0){let ge=[];for(let Ve of S.children)ge.push(me(Ve));Z.children=ge}return Z}function Ae(S,Z){S.tags=it(Z.tags),Z.deprecated&&(S.tags?S.tags.includes(Pe.SymbolTag.Deprecated)||(S.tags=S.tags.concat(Pe.SymbolTag.Deprecated)):S.tags=[Pe.SymbolTag.Deprecated])}function Me(S){let Z={title:S.title,command:S.command};return S.arguments&&(Z.arguments=S.arguments),Z}function ir(S){if(!!S)return S.map(Me)}let at=new Map;at.set(Xe.CodeActionKind.Empty,Pe.CodeActionKind.Empty),at.set(Xe.CodeActionKind.QuickFix,Pe.CodeActionKind.QuickFix),at.set(Xe.CodeActionKind.Refactor,Pe.CodeActionKind.Refactor),at.set(Xe.CodeActionKind.RefactorExtract,Pe.CodeActionKind.RefactorExtract),at.set(Xe.CodeActionKind.RefactorInline,Pe.CodeActionKind.RefactorInline),at.set(Xe.CodeActionKind.RefactorRewrite,Pe.CodeActionKind.RefactorRewrite),at.set(Xe.CodeActionKind.Source,Pe.CodeActionKind.Source),at.set(Xe.CodeActionKind.SourceOrganizeImports,Pe.CodeActionKind.SourceOrganizeImports);function re(S){if(S==null)return;let Z=at.get(S);if(Z)return Z;let ge=S.split(".");Z=Pe.CodeActionKind.Empty;for(let Ve of ge)Z=Z.append(Ve);return Z}function er(S){if(S!=null)return S.map(Z=>re(Z))}function or(S){if(S==null)return;let Z=new mR.default(S.title,S.data);return S.kind!==void 0&&(Z.kind=re(S.kind)),S.diagnostics!==void 0&&(Z.diagnostics=a(S.diagnostics)),S.edit!==void 0&&(Z.edit=Nt(S.edit)),S.command!==void 0&&(Z.command=Me(S.command)),S.isPreferred!==void 0&&(Z.isPreferred=S.isPreferred),S.disabled!==void 0&&(Z.disabled={reason:S.disabled.reason}),Z}function ht(S){if(!S)return;let Z=new hR.default(p(S.range));return S.command&&(Z.command=Me(S.command)),S.data!==void 0&&S.data!==null&&(Z.data=S.data),Z}function rt(S){if(!!S)return S.map(Z=>ht(Z))}function Nt(S){if(!S)return;let Z=new Map;if(S.changeAnnotations!==void 0)for(let Qe of Object.keys(S.changeAnnotations)){let _t=lt(S.changeAnnotations[Qe]);Z.set(Qe,_t)}let ge=Qe=>{if(Qe!==void 0)return Z.get(Qe)},Ve=new Pe.WorkspaceEdit;if(S.documentChanges)for(let Qe of S.documentChanges)if(Xe.CreateFile.is(Qe))Ve.createFile(n(Qe.uri),Qe.options,ge(Qe.annotationId));else if(Xe.RenameFile.is(Qe))Ve.renameFile(n(Qe.oldUri),n(Qe.newUri),Qe.options,ge(Qe.annotationId));else if(Xe.DeleteFile.is(Qe))Ve.deleteFile(n(Qe.uri),Qe.options,ge(Qe.annotationId));else if(Xe.TextDocumentEdit.is(Qe)){let _t=n(Qe.textDocument.uri);for(let lr of Qe.edits)Oh.AnnotatedTextEdit.is(lr)?Ve.replace(_t,p(lr.range),lr.newText,ge(lr.annotationId)):Ve.replace(_t,p(lr.range),lr.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Qe,void 0,4)}`);else S.changes&&Object.keys(S.changes).forEach(Qe=>{Ve.set(n(Qe),U(S.changes[Qe]))});return Ve}function lt(S){if(S!==void 0)return{label:S.label,needsConfirmation:!!S.needsConfirmation,description:S.description}}function $t(S){let Z=p(S.range),ge=S.target?o(S.target):void 0,Ve=new gR.default(Z,ge);return S.tooltip!==void 0&&(Ve.tooltip=S.tooltip),S.data!==void 0&&S.data!==null&&(Ve.data=S.data),Ve}function Pt(S){if(!!S)return S.map($t)}function M(S){return new Pe.Color(S.red,S.green,S.blue,S.alpha)}function N(S){return new Pe.ColorInformation(p(S.range),M(S.color))}function P(S){if(Array.isArray(S))return S.map(N)}function q(S){let Z=new Pe.ColorPresentation(S.label);return Z.additionalTextEdits=U(S.additionalTextEdits),S.textEdit&&(Z.textEdit=te(S.textEdit)),Z}function F(S){if(Array.isArray(S))return S.map(q)}function y(S){if(S)switch(S){case Xe.FoldingRangeKind.Comment:return Pe.FoldingRangeKind.Comment;case Xe.FoldingRangeKind.Imports:return Pe.FoldingRangeKind.Imports;case Xe.FoldingRangeKind.Region:return Pe.FoldingRangeKind.Region}}function b(S){return new Pe.FoldingRange(S.startLine,S.endLine,y(S.kind))}function L(S){if(Array.isArray(S))return S.map(b)}function G(S){return new Pe.SelectionRange(p(S.range),S.parent?G(S.parent):void 0)}function ue(S){if(!Array.isArray(S))return[];let Z=[];for(let ge of S)Z.push(G(ge));return Z}function fe(S){if(S===null)return;let Z=new vR.default(Fe(S.kind),S.name,S.detail||"",o(S.uri),p(S.range),p(S.selectionRange),S.data);return S.tags!==void 0&&(Z.tags=it(S.tags)),Z}function Re(S){if(S!==null)return S.map(Z=>fe(Z))}function ye(S){return new Pe.CallHierarchyIncomingCall(fe(S.from),f(S.fromRanges))}function He(S){if(S!==null)return S.map(Z=>ye(Z))}function le(S){return new Pe.CallHierarchyOutgoingCall(fe(S.to),f(S.fromRanges))}function qe(S){if(S!==null)return S.map(Z=>le(Z))}function kt(S){if(S!=null)return new Pe.SemanticTokens(new Uint32Array(S.data),S.resultId)}function De(S){return new Pe.SemanticTokensEdit(S.start,S.deleteCount,S.data!==void 0?new Uint32Array(S.data):void 0)}function Ut(S){if(S!=null)return new Pe.SemanticTokensEdits(S.edits.map(De),S.resultId)}function Vr(S){return S}function Gr(S){if(S!=null)return new Pe.LinkedEditingRanges(f(S.ranges),Wr(S.wordPattern))}function Wr(S){if(S!=null)return new RegExp(S)}return{asUri:o,asDiagnostics:a,asDiagnostic:i,asRange:p,asRanges:f,asPosition:u,asDiagnosticSeverity:g,asDiagnosticTag:d,asHover:T,asCompletionResult:w,asCompletionItem:z,asTextEdit:te,asTextEdits:U,asSignatureHelp:V,asSignatureInformations:Q,asSignatureInformation:ne,asParameterInformations:ve,asParameterInformation:de,asDeclarationResult:ce,asDefinitionResult:ie,asLocation:X,asReferences:be,asDocumentHighlights:_e,asDocumentHighlight:Be,asDocumentHighlightKind:Je,asSymbolKind:Fe,asSymbolTag:xe,asSymbolTags:it,asSymbolInformations:ze,asSymbolInformation:ut,asDocumentSymbols:Oe,asDocumentSymbol:me,asCommand:Me,asCommands:ir,asCodeAction:or,asCodeActionKind:re,asCodeActionKinds:er,asCodeLens:ht,asCodeLenses:rt,asWorkspaceEdit:Nt,asDocumentLink:$t,asDocumentLinks:Pt,asFoldingRangeKind:y,asFoldingRange:b,asFoldingRanges:L,asColor:M,asColorInformation:N,asColorInformations:P,asColorPresentation:q,asColorPresentations:F,asSelectionRange:G,asSelectionRanges:ue,asSemanticTokensLegend:Vr,asSemanticTokens:kt,asSemanticTokensEdit:De,asSemanticTokensEdits:Ut,asCallHierarchyItem:fe,asCallHierarchyItems:Re,asCallHierarchyIncomingCall:ye,asCallHierarchyIncomingCalls:He,asCallHierarchyOutgoingCall:le,asCallHierarchyOutgoingCalls:qe,asLinkedEditingRanges:Gr}}zo.createConverter=_R});var Ah=ee(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.Delayer=void 0;var Dh=Rt(),Wc=class{constructor(t){this.defaultDelay=t,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(t,r=this.defaultDelay){return this.task=t,r>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(r>=0||this.timeout===void 0)&&(this.timeout=Dh.RAL().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},r>=0?r:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let t=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,t}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(Dh.RAL().timer.clearTimeout(this.timeout),this.timeout=void 0)}};Xo.Delayer=Wc});var Yo=ee(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.generateUuid=wr.parse=wr.isUUID=wr.v4=wr.empty=void 0;var Zi=class{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},Ke=class extends Zi{constructor(){super([Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),"-",Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),"-","4",Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),"-",Ke._oneOf(Ke._timeHighBits),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),"-",Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex(),Ke._randomHex()].join(""))}static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return Ke._oneOf(Ke._chars)}};Ke._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Ke._timeHighBits=["8","9","a","b"];wr.empty=new Zi("00000000-0000-0000-0000-000000000000");function xh(){return new Ke}wr.v4=xh;var yR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Nh(e){return yR.test(e)}wr.isUUID=Nh;function ER(e){if(!Nh(e))throw new Error("invalid uuid");return new Zi(e)}wr.parse=ER;function bR(){return xh().asHex()}wr.generateUuid=bR});var zc=ee(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.ProgressPart=void 0;var kh=require("vscode"),Mh=Rt(),qh=cn(),Kc=class{constructor(t,r,n){this._client=t,this._token=r,this._reported=0,this._disposable=this._client.onProgress(Mh.WorkDoneProgress.type,this._token,o=>{switch(o.kind){case"begin":this.begin(o);break;case"report":this.report(o);break;case"end":this.done(),n&&n(this);break}})}begin(t){kh.window.withProgress({location:kh.ProgressLocation.Window,cancellable:t.cancellable,title:t.title},async(r,n)=>(this._progress=r,this._infinite=t.percentage===void 0,this._cancellationToken=n,this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(Mh.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(t),new Promise((o,a)=>{this._resolve=o,this._reject=a})))}report(t){if(this._infinite&&qh.string(t.message))this._progress.report({message:t.message});else if(qh.number(t.percentage)){let r=Math.max(0,Math.min(t.percentage,100)),n=Math.max(0,r-this._reported);this._progress.report({message:t.message,increment:n}),this._reported+=n}}cancel(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._reject&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0),this._resolve&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}};Qo.ProgressPart=Kc});var vr=ee(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.BaseLanguageClient=Dt.MessageTransports=Dt.TextDocumentFeature=Dt.State=Dt.RevealOutputChannelOn=Dt.CloseAction=Dt.ErrorAction=void 0;var Ce=require("vscode"),j=Rt(),CR=wc(),TR=wh(),SR=Ih(),pt=cn(),Lh=Ah(),ft=Yo(),RR=zc(),Xc=class{error(t){j.RAL().console.error(t)}warn(t){j.RAL().console.warn(t)}info(t){j.RAL().console.info(t)}log(t){j.RAL().console.log(t)}};function wR(e,t,r,n,o){let a=new Xc,i=j.createProtocolConnection(e,t,a,o);return i.onError(c=>{r(c[0],c[1],c[2])}),i.onClose(n),{listen:()=>i.listen(),sendRequest:(c,...l)=>i.sendRequest(pt.string(c)?c:c.method,...l),onRequest:(c,l)=>i.onRequest(pt.string(c)?c:c.method,l),sendNotification:(c,l)=>i.sendNotification(pt.string(c)?c:c.method,l),onNotification:(c,l)=>i.onNotification(pt.string(c)?c:c.method,l),onProgress:i.onProgress,sendProgress:i.sendProgress,trace:(c,l,d)=>{let u={sendNotification:!1,traceFormat:j.TraceFormat.Text};d===void 0?i.trace(c,l,u):(pt.boolean(d),i.trace(c,l,d))},initialize:c=>i.sendRequest(j.InitializeRequest.type,c),shutdown:()=>i.sendRequest(j.ShutdownRequest.type,void 0),exit:()=>i.sendNotification(j.ExitNotification.type),onLogMessage:c=>i.onNotification(j.LogMessageNotification.type,c),onShowMessage:c=>i.onNotification(j.ShowMessageNotification.type,c),onTelemetry:c=>i.onNotification(j.TelemetryEventNotification.type,c),didChangeConfiguration:c=>i.sendNotification(j.DidChangeConfigurationNotification.type,c),didChangeWatchedFiles:c=>i.sendNotification(j.DidChangeWatchedFilesNotification.type,c),didOpenTextDocument:c=>i.sendNotification(j.DidOpenTextDocumentNotification.type,c),didChangeTextDocument:c=>i.sendNotification(j.DidChangeTextDocumentNotification.type,c),didCloseTextDocument:c=>i.sendNotification(j.DidCloseTextDocumentNotification.type,c),didSaveTextDocument:c=>i.sendNotification(j.DidSaveTextDocumentNotification.type,c),onDiagnostics:c=>i.onNotification(j.PublishDiagnosticsNotification.type,c),end:()=>i.end(),dispose:()=>i.dispose()}}var Zo;(function(e){e[e.Continue=1]="Continue",e[e.Shutdown=2]="Shutdown"})(Zo=Dt.ErrorAction||(Dt.ErrorAction={}));var $n;(function(e){e[e.DoNotRestart=1]="DoNotRestart",e[e.Restart=2]="Restart"})($n=Dt.CloseAction||(Dt.CloseAction={}));var Yc=class{constructor(t,r){this.name=t,this.maxRestartCount=r,this.restarts=[]}error(t,r,n){return n&&n<=3?Zo.Continue:Zo.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?$n.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(Ce.window.showErrorMessage(`The ${this.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted.`),$n.DoNotRestart):(this.restarts.shift(),$n.Restart)}},eo;(function(e){e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Never=4]="Never"})(eo=Dt.RevealOutputChannelOn||(Dt.RevealOutputChannelOn={}));var Jo;(function(e){e[e.Stopped=1]="Stopped",e[e.Starting=3]="Starting",e[e.Running=2]="Running"})(Jo=Dt.State||(Dt.State={}));var Ct;(function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.StartFailed=2]="StartFailed",e[e.Running=3]="Running",e[e.Stopping=4]="Stopping",e[e.Stopped=5]="Stopped"})(Ct||(Ct={}));var jh=[j.SymbolKind.File,j.SymbolKind.Module,j.SymbolKind.Namespace,j.SymbolKind.Package,j.SymbolKind.Class,j.SymbolKind.Method,j.SymbolKind.Property,j.SymbolKind.Field,j.SymbolKind.Constructor,j.SymbolKind.Enum,j.SymbolKind.Interface,j.SymbolKind.Function,j.SymbolKind.Variable,j.SymbolKind.Constant,j.SymbolKind.String,j.SymbolKind.Number,j.SymbolKind.Boolean,j.SymbolKind.Array,j.SymbolKind.Object,j.SymbolKind.Key,j.SymbolKind.Null,j.SymbolKind.EnumMember,j.SymbolKind.Struct,j.SymbolKind.Event,j.SymbolKind.Operator,j.SymbolKind.TypeParameter],PR=[j.CompletionItemKind.Text,j.CompletionItemKind.Method,j.CompletionItemKind.Function,j.CompletionItemKind.Constructor,j.CompletionItemKind.Field,j.CompletionItemKind.Variable,j.CompletionItemKind.Class,j.CompletionItemKind.Interface,j.CompletionItemKind.Module,j.CompletionItemKind.Property,j.CompletionItemKind.Unit,j.CompletionItemKind.Value,j.CompletionItemKind.Enum,j.CompletionItemKind.Keyword,j.CompletionItemKind.Snippet,j.CompletionItemKind.Color,j.CompletionItemKind.File,j.CompletionItemKind.Reference,j.CompletionItemKind.Folder,j.CompletionItemKind.EnumMember,j.CompletionItemKind.Constant,j.CompletionItemKind.Struct,j.CompletionItemKind.Event,j.CompletionItemKind.Operator,j.CompletionItemKind.TypeParameter],Fh=[j.SymbolTag.Deprecated];function Ie(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var to;(function(e){function t(r){let n=Ce.workspace.getConfiguration("files",r);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}}e.fromConfiguration=t})(to||(to={}));var Qc;(function(e){function t(r){let n=r;return n&&pt.func(n.register)&&pt.func(n.unregister)&&pt.func(n.dispose)&&n.registrationType!==void 0}e.is=t})(Qc||(Qc={}));var Mr=class{constructor(t,r,n,o,a,i){this._client=t,this._event=r,this._type=n,this._middleware=o,this._createParams=a,this._selectorFilter=i,this._selectors=new Map}static textDocumentFilter(t,r){for(let n of t)if(Ce.languages.match(n,r))return!0;return!1}register(t){!t.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(t){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),t))&&(this._middleware?this._middleware(t,r=>this._client.sendNotification(this._type,this._createParams(r))):this._client.sendNotification(this._type,this._createParams(t)),this.notificationSent(t))}notificationSent(t){}unregister(t){this._selectors.delete(t),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(t){for(let r of this._selectors.values())if(Ce.languages.match(r,t))return{send:n=>{this.callback(n)}}}},Jc=class extends Mr{constructor(t,r){super(t,Ce.workspace.onDidOpenTextDocument,j.DidOpenTextDocumentNotification.type,t.clientOptions.middleware.didOpen,n=>t.code2ProtocolConverter.asOpenTextDocumentParams(n),Mr.textDocumentFilter),this._syncedDocuments=r}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:ft.generateUuid(),registerOptions:{documentSelector:r}})}get registrationType(){return j.DidOpenTextDocumentNotification.type}register(t){if(super.register(t),!t.registerOptions.documentSelector)return;let r=t.registerOptions.documentSelector;Ce.workspace.textDocuments.forEach(n=>{let o=n.uri.toString();if(!this._syncedDocuments.has(o)&&Ce.languages.match(r,n)){let a=this._client.clientOptions.middleware,i=s=>{this._client.sendNotification(this._type,this._createParams(s))};a.didOpen?a.didOpen(n,i):i(n),this._syncedDocuments.set(o,n)}})}notificationSent(t){super.notificationSent(t),this._syncedDocuments.set(t.uri.toString(),t)}},Zc=class extends Mr{constructor(t,r){super(t,Ce.workspace.onDidCloseTextDocument,j.DidCloseTextDocumentNotification.type,t.clientOptions.middleware.didClose,n=>t.code2ProtocolConverter.asCloseTextDocumentParams(n),Mr.textDocumentFilter),this._syncedDocuments=r}get registrationType(){return j.DidCloseTextDocumentNotification.type}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:ft.generateUuid(),registerOptions:{documentSelector:r}})}notificationSent(t){super.notificationSent(t),this._syncedDocuments.delete(t.uri.toString())}unregister(t){let r=this._selectors.get(t);super.unregister(t);let n=this._selectors.values();this._syncedDocuments.forEach(o=>{if(Ce.languages.match(r,o)&&!this._selectorFilter(n,o)){let a=this._client.clientOptions.middleware,i=s=>{this._client.sendNotification(this._type,this._createParams(s))};this._syncedDocuments.delete(o.uri.toString()),a.didClose?a.didClose(o,i):i(o)}})}},eu=class{constructor(t){this._client=t,this._changeData=new Map,this._forcingDelivery=!1}get registrationType(){return j.DidChangeTextDocumentNotification.type}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.change!==void 0&&n.change!==j.TextDocumentSyncKind.None&&this.register({id:ft.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},{syncKind:n.change})})}register(t){!t.registerOptions.documentSelector||(this._listener||(this._listener=Ce.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind}))}callback(t){if(t.contentChanges.length!==0){for(let r of this._changeData.values())if(Ce.languages.match(r.documentSelector,t.document)){let n=this._client.clientOptions.middleware;if(r.syncKind===j.TextDocumentSyncKind.Incremental){let o=this._client.code2ProtocolConverter.asChangeTextDocumentParams(t);n.didChange?n.didChange(t,()=>this._client.sendNotification(j.DidChangeTextDocumentNotification.type,o)):this._client.sendNotification(j.DidChangeTextDocumentNotification.type,o)}else if(r.syncKind===j.TextDocumentSyncKind.Full){let o=a=>{this._changeDelayer?(this._changeDelayer.uri!==a.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=a.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(j.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(a.document))})):(this._changeDelayer={uri:a.document.uri.toString(),delayer:new Lh.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(j.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(a.document))},-1))};n.didChange?n.didChange(t,o):o(t)}}}}unregister(t){this._changeData.delete(t),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(t){for(let r of this._changeData.values())if(Ce.languages.match(r.documentSelector,t))return{send:n=>{this.callback(n)}}}},tu=class extends Mr{constructor(t){super(t,Ce.workspace.onWillSaveTextDocument,j.WillSaveTextDocumentNotification.type,t.clientOptions.middleware.willSave,r=>t.code2ProtocolConverter.asWillSaveTextDocumentParams(r),(r,n)=>Mr.textDocumentFilter(r,n.document))}get registrationType(){return j.WillSaveTextDocumentNotification.type}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"synchronization");r.willSave=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.willSave&&this.register({id:ft.generateUuid(),registerOptions:{documentSelector:r}})}},ru=class{constructor(t){this._client=t,this._selectors=new Map}get registrationType(){return j.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"synchronization");r.willSaveWaitUntil=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;r&&n&&n.willSaveWaitUntil&&this.register({id:ft.generateUuid(),registerOptions:{documentSelector:r}})}register(t){!t.registerOptions.documentSelector||(this._listener||(this._listener=Ce.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(t){if(Mr.textDocumentFilter(this._selectors.values(),t.document)){let r=this._client.clientOptions.middleware,n=o=>this._client.sendRequest(j.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(o)).then(a=>{let i=this._client.protocol2CodeConverter.asTextEdits(a);return i===void 0?[]:i});t.waitUntil(r.willSaveWaitUntil?r.willSaveWaitUntil(t,n):n(t))}}unregister(t){this._selectors.delete(t),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}},nu=class extends Mr{constructor(t){super(t,Ce.workspace.onDidSaveTextDocument,j.DidSaveTextDocumentNotification.type,t.clientOptions.middleware.didSave,r=>t.code2ProtocolConverter.asSaveTextDocumentParams(r,this._includeText),Mr.textDocumentFilter),this._includeText=!1}get registrationType(){return j.DidSaveTextDocumentNotification.type}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"synchronization").didSave=!0}initialize(t,r){let n=t.resolvedTextDocumentSync;if(r&&n&&n.save){let o=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:ft.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},o)})}}register(t){this._includeText=!!t.registerOptions.includeText,super.register(t)}},iu=class{constructor(t,r){this._client=t,this._notifyFileEvent=r,this._watchers=new Map}get registrationType(){return j.DidChangeWatchedFilesNotification.type}fillClientCapabilities(t){Ie(Ie(t,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(t,r){}register(t){if(!Array.isArray(t.registerOptions.watchers))return;let r=[];for(let n of t.registerOptions.watchers){if(!pt.string(n.globPattern))continue;let o=!0,a=!0,i=!0;n.kind!==void 0&&n.kind!==null&&(o=(n.kind&j.WatchKind.Create)!==0,a=(n.kind&j.WatchKind.Change)!==0,i=(n.kind&j.WatchKind.Delete)!==0);let s=Ce.workspace.createFileSystemWatcher(n.globPattern,!o,!a,!i);this.hookListeners(s,o,a,i),r.push(s)}this._watchers.set(t.id,r)}registerRaw(t,r){let n=[];for(let o of r)this.hookListeners(o,!0,!0,!0,n);this._watchers.set(t,n)}hookListeners(t,r,n,o,a){r&&t.onDidCreate(i=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(i),type:j.FileChangeType.Created}),null,a),n&&t.onDidChange(i=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(i),type:j.FileChangeType.Changed}),null,a),o&&t.onDidDelete(i=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(i),type:j.FileChangeType.Deleted}),null,a)}unregister(t){let r=this._watchers.get(t);if(r)for(let n of r)n.dispose()}dispose(){this._watchers.forEach(t=>{for(let r of t)r.dispose()}),this._watchers.clear()}},Yt=class{constructor(t,r){this._client=t,this._registrationType=r,this._registrations=new Map}get registrationType(){return this._registrationType}register(t){if(!t.registerOptions.documentSelector)return;let r=this.registerLanguageProvider(t.registerOptions);this._registrations.set(t.id,{disposable:r[0],data:t,provider:r[1]})}unregister(t){let r=this._registrations.get(t);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(t=>{t.disposable.dispose()}),this._registrations.clear()}getRegistration(t,r){if(r){if(j.TextDocumentRegistrationOptions.is(r)){let n=j.StaticRegistrationOptions.hasId(r)?r.id:ft.generateUuid(),o=r.documentSelector||t;if(o)return[n,Object.assign({},r,{documentSelector:o})]}else if(pt.boolean(r)&&r===!0||j.WorkDoneProgressOptions.is(r)){if(!t)return[void 0,void 0];let n=pt.boolean(r)&&r===!0?{documentSelector:t}:Object.assign({},r,{documentSelector:t});return[ft.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(t,r){if(!(!t||!r))return pt.boolean(r)&&r===!0?{documentSelector:t}:Object.assign({},r,{documentSelector:t})}getProvider(t){for(let r of this._registrations.values()){let n=r.data.registerOptions.documentSelector;if(n!==null&&Ce.languages.match(n,t))return r.provider}}getAllProviders(){let t=[];for(let r of this._registrations.values())t.push(r.provider);return t}};Dt.TextDocumentFeature=Yt;var ou=class{constructor(t,r){this._client=t,this._registrationType=r,this._registrations=new Map}get registrationType(){return this._registrationType}register(t){let r=this.registerLanguageProvider(t.registerOptions);this._registrations.set(t.id,{disposable:r[0],provider:r[1]})}unregister(t){let r=this._registrations.get(t);r!==void 0&&r.disposable.dispose()}dispose(){this._registrations.forEach(t=>{t.disposable.dispose()}),this._registrations.clear()}getProviders(){let t=[];for(let r of this._registrations.values())t.push(r.provider);return t}},su=class extends Yt{constructor(t){super(t,j.CompletionRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"completion");r.dynamicRegistration=!0,r.contextSupport=!0,r.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[j.MarkupKind.Markdown,j.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[j.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[j.InsertTextMode.asIs,j.InsertTextMode.adjustIndentation]}},r.completionItemKind={valueSet:PR}}initialize(t,r){let n=this.getRegistrationOptions(r,t.completionProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r=t.triggerCharacters||[],n={provideCompletionItems:(o,a,i,s)=>{let c=this._client,l=this._client.clientOptions.middleware,d=(u,p,f,g)=>c.sendRequest(j.CompletionRequest.type,c.code2ProtocolConverter.asCompletionParams(u,p,f),g).then(c.protocol2CodeConverter.asCompletionResult,m=>c.handleFailedRequest(j.CompletionRequest.type,m,null));return l.provideCompletionItem?l.provideCompletionItem(o,a,s,i,d):d(o,a,s,i)},resolveCompletionItem:t.resolveProvider?(o,a)=>{let i=this._client,s=this._client.clientOptions.middleware,c=(l,d)=>i.sendRequest(j.CompletionResolveRequest.type,i.code2ProtocolConverter.asCompletionItem(l),d).then(i.protocol2CodeConverter.asCompletionItem,u=>i.handleFailedRequest(j.CompletionResolveRequest.type,u,l));return s.resolveCompletionItem?s.resolveCompletionItem(o,a,c):c(o,a)}:void 0};return[Ce.languages.registerCompletionItemProvider(t.documentSelector,n,...r),n]}},au=class extends Yt{constructor(t){super(t,j.HoverRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"hover");r.dynamicRegistration=!0,r.contentFormat=[j.MarkupKind.Markdown,j.MarkupKind.PlainText]}initialize(t,r){let n=this.getRegistrationOptions(r,t.hoverProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideHover:(n,o,a)=>{let i=this._client,s=(l,d,u)=>i.sendRequest(j.HoverRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(l,d),u).then(i.protocol2CodeConverter.asHover,p=>i.handleFailedRequest(j.HoverRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideHover?c.provideHover(n,o,a,s):s(n,o,a)}};return[Ce.languages.registerHoverProvider(t.documentSelector,r),r]}},cu=class extends Yt{constructor(t){super(t,j.SignatureHelpRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"signatureHelp");r.dynamicRegistration=!0,r.signatureInformation={documentationFormat:[j.MarkupKind.Markdown,j.MarkupKind.PlainText]},r.signatureInformation.parameterInformation={labelOffsetSupport:!0},r.signatureInformation.activeParameterSupport=!0,r.contextSupport=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.signatureHelpProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideSignatureHelp:(o,a,i,s)=>{let c=this._client,l=(u,p,f,g)=>c.sendRequest(j.SignatureHelpRequest.type,c.code2ProtocolConverter.asSignatureHelpParams(u,p,f),g).then(c.protocol2CodeConverter.asSignatureHelp,m=>c.handleFailedRequest(j.SignatureHelpRequest.type,m,null)),d=c.clientOptions.middleware;return d.provideSignatureHelp?d.provideSignatureHelp(o,a,s,i,l):l(o,a,s,i)}},n;if(t.retriggerCharacters===void 0){let o=t.triggerCharacters||[];n=Ce.languages.registerSignatureHelpProvider(t.documentSelector,r,...o)}else{let o={triggerCharacters:t.triggerCharacters||[],retriggerCharacters:t.retriggerCharacters||[]};n=Ce.languages.registerSignatureHelpProvider(t.documentSelector,r,o)}return[n,r]}},uu=class extends Yt{constructor(t){super(t,j.DefinitionRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"definition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.definitionProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDefinition:(n,o,a)=>{let i=this._client,s=(l,d,u)=>i.sendRequest(j.DefinitionRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(l,d),u).then(i.protocol2CodeConverter.asDefinitionResult,p=>i.handleFailedRequest(j.DefinitionRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideDefinition?c.provideDefinition(n,o,a,s):s(n,o,a)}};return[Ce.languages.registerDefinitionProvider(t.documentSelector,r),r]}},lu=class extends Yt{constructor(t){super(t,j.ReferencesRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"references").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.referencesProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideReferences:(n,o,a,i)=>{let s=this._client,c=(d,u,p,f)=>s.sendRequest(j.ReferencesRequest.type,s.code2ProtocolConverter.asReferenceParams(d,u,p),f).then(s.protocol2CodeConverter.asReferences,g=>s.handleFailedRequest(j.ReferencesRequest.type,g,null)),l=s.clientOptions.middleware;return l.provideReferences?l.provideReferences(n,o,a,i,c):c(n,o,a,i)}};return[Ce.languages.registerReferenceProvider(t.documentSelector,r),r]}},du=class extends Yt{constructor(t){super(t,j.DocumentHighlightRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentHighlightProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentHighlights:(n,o,a)=>{let i=this._client,s=(l,d,u)=>i.sendRequest(j.DocumentHighlightRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(l,d),u).then(i.protocol2CodeConverter.asDocumentHighlights,p=>i.handleFailedRequest(j.DocumentHighlightRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideDocumentHighlights?c.provideDocumentHighlights(n,o,a,s):s(n,o,a)}};return[Ce.languages.registerDocumentHighlightProvider(t.documentSelector,r),r]}},pu=class extends Yt{constructor(t){super(t,j.DocumentSymbolRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"documentSymbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:jh},r.hierarchicalDocumentSymbolSupport=!0,r.tagSupport={valueSet:Fh},r.labelSupport=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentSymbolProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentSymbols:(o,a)=>{let i=this._client,s=(l,d)=>i.sendRequest(j.DocumentSymbolRequest.type,i.code2ProtocolConverter.asDocumentSymbolParams(l),d).then(u=>{if(u!==null){if(u.length===0)return[];{let p=u[0];return j.DocumentSymbol.is(p)?i.protocol2CodeConverter.asDocumentSymbols(u):i.protocol2CodeConverter.asSymbolInformations(u)}}},u=>i.handleFailedRequest(j.DocumentSymbolRequest.type,u,null)),c=i.clientOptions.middleware;return c.provideDocumentSymbols?c.provideDocumentSymbols(o,a,s):s(o,a)}},n=t.label!==void 0?{label:t.label}:void 0;return[Ce.languages.registerDocumentSymbolProvider(t.documentSelector,r,n),r]}},fu=class extends ou{constructor(t){super(t,j.WorkspaceSymbolRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"workspace"),"symbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:jh},r.tagSupport={valueSet:Fh}}initialize(t){!t.workspaceSymbolProvider||this.register({id:ft.generateUuid(),registerOptions:t.workspaceSymbolProvider===!0?{workDoneProgress:!1}:t.workspaceSymbolProvider})}registerLanguageProvider(t){let r={provideWorkspaceSymbols:(n,o)=>{let a=this._client,i=(c,l)=>a.sendRequest(j.WorkspaceSymbolRequest.type,{query:c},l).then(a.protocol2CodeConverter.asSymbolInformations,d=>a.handleFailedRequest(j.WorkspaceSymbolRequest.type,d,null)),s=a.clientOptions.middleware;return s.provideWorkspaceSymbols?s.provideWorkspaceSymbols(n,o,i):i(n,o)}};return[Ce.languages.registerWorkspaceSymbolProvider(r),r]}},hu=class extends Yt{constructor(t){super(t,j.CodeActionRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"codeAction");r.dynamicRegistration=!0,r.isPreferredSupport=!0,r.disabledSupport=!0,r.dataSupport=!0,r.resolveSupport={properties:["edit"]},r.codeActionLiteralSupport={codeActionKind:{valueSet:[j.CodeActionKind.Empty,j.CodeActionKind.QuickFix,j.CodeActionKind.Refactor,j.CodeActionKind.RefactorExtract,j.CodeActionKind.RefactorInline,j.CodeActionKind.RefactorRewrite,j.CodeActionKind.Source,j.CodeActionKind.SourceOrganizeImports]}},r.honorsChangeAnnotations=!1}initialize(t,r){let n=this.getRegistrationOptions(r,t.codeActionProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideCodeActions:(n,o,a,i)=>{let s=this._client,c=(d,u,p,f)=>{let g={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(d),range:s.code2ProtocolConverter.asRange(u),context:s.code2ProtocolConverter.asCodeActionContext(p)};return s.sendRequest(j.CodeActionRequest.type,g,f).then(m=>{if(m===null)return;let _=[];for(let E of m)j.Command.is(E)?_.push(s.protocol2CodeConverter.asCommand(E)):_.push(s.protocol2CodeConverter.asCodeAction(E));return _},m=>s.handleFailedRequest(j.CodeActionRequest.type,m,null))},l=s.clientOptions.middleware;return l.provideCodeActions?l.provideCodeActions(n,o,a,i,c):c(n,o,a,i)},resolveCodeAction:t.resolveProvider?(n,o)=>{let a=this._client,i=this._client.clientOptions.middleware,s=(c,l)=>a.sendRequest(j.CodeActionResolveRequest.type,a.code2ProtocolConverter.asCodeAction(c),l).then(a.protocol2CodeConverter.asCodeAction,d=>a.handleFailedRequest(j.CodeActionResolveRequest.type,d,c));return i.resolveCodeAction?i.resolveCodeAction(n,o,s):s(n,o)}:void 0};return[Ce.languages.registerCodeActionsProvider(t.documentSelector,r,t.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(t.codeActionKinds)}:void 0),r]}},gu=class extends Yt{constructor(t){super(t,j.CodeLensRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"codeLens").dynamicRegistration=!0,Ie(Ie(t,"workspace"),"codeLens").refreshSupport=!0}initialize(t,r){this._client.onRequest(j.CodeLensRefreshRequest.type,async()=>{for(let a of this.getAllProviders())a.onDidChangeCodeLensEmitter.fire()});let o=this.getRegistrationOptions(r,t.codeLensProvider);!o||this.register({id:ft.generateUuid(),registerOptions:o})}registerLanguageProvider(t){let r=new Ce.EventEmitter,n={onDidChangeCodeLenses:r.event,provideCodeLenses:(o,a)=>{let i=this._client,s=(l,d)=>i.sendRequest(j.CodeLensRequest.type,i.code2ProtocolConverter.asCodeLensParams(l),d).then(i.protocol2CodeConverter.asCodeLenses,u=>i.handleFailedRequest(j.CodeLensRequest.type,u,null)),c=i.clientOptions.middleware;return c.provideCodeLenses?c.provideCodeLenses(o,a,s):s(o,a)},resolveCodeLens:t.resolveProvider?(o,a)=>{let i=this._client,s=(l,d)=>i.sendRequest(j.CodeLensResolveRequest.type,i.code2ProtocolConverter.asCodeLens(l),d).then(i.protocol2CodeConverter.asCodeLens,u=>i.handleFailedRequest(j.CodeLensResolveRequest.type,u,l)),c=i.clientOptions.middleware;return c.resolveCodeLens?c.resolveCodeLens(o,a,s):s(o,a)}:void 0};return[Ce.languages.registerCodeLensProvider(t.documentSelector,n),{provider:n,onDidChangeCodeLensEmitter:r}]}},mu=class extends Yt{constructor(t){super(t,j.DocumentFormattingRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"formatting").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentFormattingProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentFormattingEdits:(n,o,a)=>{let i=this._client,s=(l,d,u)=>{let p={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(l),options:i.code2ProtocolConverter.asFormattingOptions(d,to.fromConfiguration(l))};return i.sendRequest(j.DocumentFormattingRequest.type,p,u).then(i.protocol2CodeConverter.asTextEdits,f=>i.handleFailedRequest(j.DocumentFormattingRequest.type,f,null))},c=i.clientOptions.middleware;return c.provideDocumentFormattingEdits?c.provideDocumentFormattingEdits(n,o,a,s):s(n,o,a)}};return[Ce.languages.registerDocumentFormattingEditProvider(t.documentSelector,r),r]}},vu=class extends Yt{constructor(t){super(t,j.DocumentRangeFormattingRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentRangeFormattingProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentRangeFormattingEdits:(n,o,a,i)=>{let s=this._client,c=(d,u,p,f)=>{let g={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(d),range:s.code2ProtocolConverter.asRange(u),options:s.code2ProtocolConverter.asFormattingOptions(p,to.fromConfiguration(d))};return s.sendRequest(j.DocumentRangeFormattingRequest.type,g,f).then(s.protocol2CodeConverter.asTextEdits,m=>s.handleFailedRequest(j.DocumentRangeFormattingRequest.type,m,null))},l=s.clientOptions.middleware;return l.provideDocumentRangeFormattingEdits?l.provideDocumentRangeFormattingEdits(n,o,a,i,c):c(n,o,a,i)}};return[Ce.languages.registerDocumentRangeFormattingEditProvider(t.documentSelector,r),r]}},_u=class extends Yt{constructor(t){super(t,j.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(t){Ie(Ie(t,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentOnTypeFormattingProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideOnTypeFormattingEdits:(o,a,i,s,c)=>{let l=this._client,d=(p,f,g,m,_)=>{let E={textDocument:l.code2ProtocolConverter.asTextDocumentIdentifier(p),position:l.code2ProtocolConverter.asPosition(f),ch:g,options:l.code2ProtocolConverter.asFormattingOptions(m,to.fromConfiguration(p))};return l.sendRequest(j.DocumentOnTypeFormattingRequest.type,E,_).then(l.protocol2CodeConverter.asTextEdits,T=>l.handleFailedRequest(j.DocumentOnTypeFormattingRequest.type,T,null))},u=l.clientOptions.middleware;return u.provideOnTypeFormattingEdits?u.provideOnTypeFormattingEdits(o,a,i,s,c,d):d(o,a,i,s,c)}},n=t.moreTriggerCharacter||[];return[Ce.languages.registerOnTypeFormattingEditProvider(t.documentSelector,r,t.firstTriggerCharacter,...n),r]}},yu=class extends Yt{constructor(t){super(t,j.RenameRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"rename");r.dynamicRegistration=!0,r.prepareSupport=!0,r.prepareSupportDefaultBehavior=j.PrepareSupportDefaultBehavior.Identifier,r.honorsChangeAnnotations=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.renameProvider);!n||(pt.boolean(t.renameProvider)&&(n.prepareProvider=!1),this.register({id:ft.generateUuid(),registerOptions:n}))}registerLanguageProvider(t){let r={provideRenameEdits:(n,o,a,i)=>{let s=this._client,c=(d,u,p,f)=>{let g={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(d),position:s.code2ProtocolConverter.asPosition(u),newName:p};return s.sendRequest(j.RenameRequest.type,g,f).then(s.protocol2CodeConverter.asWorkspaceEdit,m=>s.handleFailedRequest(j.RenameRequest.type,m,null))},l=s.clientOptions.middleware;return l.provideRenameEdits?l.provideRenameEdits(n,o,a,i,c):c(n,o,a,i)},prepareRename:t.prepareProvider?(n,o,a)=>{let i=this._client,s=(l,d,u)=>{let p={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(l),position:i.code2ProtocolConverter.asPosition(d)};return i.sendRequest(j.PrepareRenameRequest.type,p,u).then(f=>j.Range.is(f)?i.protocol2CodeConverter.asRange(f):this.isDefaultBehavior(f)?f.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):f&&j.Range.is(f.range)?{range:i.protocol2CodeConverter.asRange(f.range),placeholder:f.placeholder}:Promise.reject(new Error("The element can't be renamed.")),f=>i.handleFailedRequest(j.PrepareRenameRequest.type,f,void 0))},c=i.clientOptions.middleware;return c.prepareRename?c.prepareRename(n,o,a,s):s(n,o,a)}:void 0};return[Ce.languages.registerRenameProvider(t.documentSelector,r),r]}isDefaultBehavior(t){let r=t;return r&&pt.boolean(r.defaultBehavior)}},Eu=class extends Yt{constructor(t){super(t,j.DocumentLinkRequest.type)}fillClientCapabilities(t){let r=Ie(Ie(t,"textDocument"),"documentLink");r.dynamicRegistration=!0,r.tooltipSupport=!0}initialize(t,r){let n=this.getRegistrationOptions(r,t.documentLinkProvider);!n||this.register({id:ft.generateUuid(),registerOptions:n})}registerLanguageProvider(t){let r={provideDocumentLinks:(n,o)=>{let a=this._client,i=(c,l)=>a.sendRequest(j.DocumentLinkRequest.type,a.code2ProtocolConverter.asDocumentLinkParams(c),l).then(a.protocol2CodeConverter.asDocumentLinks,d=>a.handleFailedRequest(j.DocumentLinkRequest.type,d,null)),s=a.clientOptions.middleware;return s.provideDocumentLinks?s.provideDocumentLinks(n,o,i):i(n,o)},resolveDocumentLink:t.resolveProvider?(n,o)=>{let a=this._client,i=(c,l)=>a.sendRequest(j.DocumentLinkResolveRequest.type,a.code2ProtocolConverter.asDocumentLink(c),l).then(a.protocol2CodeConverter.asDocumentLink,d=>a.handleFailedRequest(j.DocumentLinkResolveRequest.type,d,c)),s=a.clientOptions.middleware;return s.resolveDocumentLink?s.resolveDocumentLink(n,o,i):i(n,o)}:void 0};return[Ce.languages.registerDocumentLinkProvider(t.documentSelector,r),r]}},bu=class{constructor(t){this._client=t,this._listeners=new Map}get registrationType(){return j.DidChangeConfigurationNotification.type}fillClientCapabilities(t){Ie(Ie(t,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let t=this._client.clientOptions.synchronize.configurationSection;t!==void 0&&this.register({id:ft.generateUuid(),registerOptions:{section:t}})}register(t){let r=Ce.workspace.onDidChangeConfiguration(n=>{this.onDidChangeConfiguration(t.registerOptions.section,n)});this._listeners.set(t.id,r),t.registerOptions.section!==void 0&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(t){let r=this._listeners.get(t);r&&(this._listeners.delete(t),r.dispose())}dispose(){for(let t of this._listeners.values())t.dispose();this._listeners.clear()}onDidChangeConfiguration(t,r){let n;if(pt.string(t)?n=[t]:n=t,n!==void 0&&r!==void 0&&!n.some(s=>r.affectsConfiguration(s)))return;let o=i=>{if(i===void 0){this._client.sendNotification(j.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(j.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(i)})},a=this.getMiddleware();a?a(n,o):o(n)}extractSettingsInformation(t){function r(a,i){let s=a;for(let c=0;c<i.length-1;c++){let l=s[i[c]];l||(l=Object.create(null),s[i[c]]=l),s=l}return s}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,o=Object.create(null);for(let a=0;a<t.length;a++){let i=t[a],s=i.indexOf("."),c=null;if(s>=0?c=Ce.workspace.getConfiguration(i.substr(0,s),n).get(i.substr(s+1)):c=Ce.workspace.getConfiguration(void 0,n).get(i),c){let l=t[a].split(".");r(o,l)[l[l.length-1]]=CR.toJSONObject(c)}}return o}getMiddleware(){let t=this._client.clientOptions.middleware;if(t.workspace&&t.workspace.didChangeConfiguration)return t.workspace.didChangeConfiguration}},Cu=class{constructor(t){this._client=t,this._commands=new Map}get registrationType(){return j.ExecuteCommandRequest.type}fillClientCapabilities(t){Ie(Ie(t,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(t){!t.executeCommandProvider||this.register({id:ft.generateUuid(),registerOptions:Object.assign({},t.executeCommandProvider)})}register(t){let r=this._client,n=r.clientOptions.middleware,o=(a,i)=>{let s={command:a,arguments:i};return r.sendRequest(j.ExecuteCommandRequest.type,s).then(void 0,c=>r.handleFailedRequest(j.ExecuteCommandRequest.type,c,void 0))};if(t.registerOptions.commands){let a=[];for(let i of t.registerOptions.commands)a.push(Ce.commands.registerCommand(i,(...s)=>n.executeCommand?n.executeCommand(i,s,o):o(i,s)));this._commands.set(t.id,a)}}unregister(t){let r=this._commands.get(t);r&&r.forEach(n=>n.dispose())}dispose(){this._commands.forEach(t=>{t.forEach(r=>r.dispose())}),this._commands.clear()}},OR;(function(e){function t(r){return r&&j.MessageReader.is(r.reader)&&j.MessageWriter.is(r.writer)}e.is=t})(OR=Dt.MessageTransports||(Dt.MessageTransports={}));var es=class{constructor(t,r){this._resolve=t,this._reject=r,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(t){this._used=!0,this._reject(t)}},Un=class{constructor(t,r,n){var o;this._traceFormat=j.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=t,this._name=r,n=n||{};let a={isTrusted:!1};n.markdown!==void 0&&n.markdown.isTrusted===!0&&(a.isTrusted=!0),this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||eo.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler||this.createDefaultErrorHandler((o=n.connectionOptions)===null||o===void 0?void 0:o.maxRestartCount),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:a},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Ct.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new Lh.Delayer(250),this._onReady=new Promise((i,s)=>{this._onReadyCallbacks=new es(i,s)}),this._onStop=void 0,this._telemetryEmitter=new j.Emitter,this._stateChangeEmitter=new j.Emitter,this._trace=j.Trace.Off,this._tracer={log:(i,s)=>{pt.string(i)?this.logTrace(i,s):this.logObjectTrace(i)}},this._c2p=TR.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=SR.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(t){let r=this.getPublicState();this._state=t;let n=this.getPublicState();n!==r&&this._stateChangeEmitter.fire({oldState:r,newState:n})}getPublicState(){return this.state===Ct.Running?Jo.Running:this.state===Ct.Starting?Jo.Starting:Jo.Stopped}get initializeResult(){return this._initializeResult}sendRequest(t,...r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(t,...r)}catch(n){throw this.error(`Sending request ${pt.string(t)?t:t.method} failed.`,n),n}}onRequest(t,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onRequest(t,r)}catch(n){throw this.error(`Registering request handler ${pt.string(t)?t:t.method} failed.`,n),n}}sendNotification(t,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(t,r)}catch(n){throw this.error(`Sending notification ${pt.string(t)?t:t.method} failed.`,n),n}}onNotification(t,r){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{return this._resolvedConnection.onNotification(t,r)}catch(n){throw this.error(`Registering notification handler ${pt.string(t)?t:t.method} failed.`,n),n}}onProgress(t,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{if(j.WorkDoneProgress.is(t)){let o=this._clientOptions.middleware.handleWorkDoneProgress;if(o!==void 0)return this._resolvedConnection.onProgress(t,r,a=>{o(r,a,()=>n(a))})}return this._resolvedConnection.onProgress(t,r,n)}catch(o){throw this.error(`Registering progress handler for token ${r} failed.`,o),o}}sendProgress(t,r,n){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendProgress(t,r,n)}catch(o){throw this.error(`Sending progress for token ${r} failed.`,o),o}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=Ce.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(t){if(t!==void 0&&t<0)throw new Error(`Invalid maxRestartCount: ${t}`);return new Yc(this._name,t??4)}set trace(t){this._trace=t,this.onReady().then(()=>{this.resolveConnection().then(r=>{r.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})})},()=>{})}data2String(t){if(t instanceof j.ResponseError){let r=t;return`  Message: ${r.message}
  Code: ${r.code} ${r.data?`
`+r.data.toString():""}`}return t instanceof Error?pt.string(t.stack)?t.stack:t.message:pt.string(t)?t:t.toString()}info(t,r,n=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${t}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=eo.Info&&this.showNotificationMessage()}warn(t,r,n=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${t}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=eo.Warn&&this.showNotificationMessage()}error(t,r,n=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${t}`),r&&this.outputChannel.appendLine(this.data2String(r)),n&&this._clientOptions.revealOutputChannelOn<=eo.Error&&this.showNotificationMessage()}showNotificationMessage(){Ce.window.showInformationMessage("A request has failed. See the output for more information.","Go to output").then(()=>{this.outputChannel.show(!0)})}logTrace(t,r){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${t}`),r&&this.traceOutputChannel.appendLine(this.data2String(r))}logObjectTrace(t){t.isLSPMessage&&t.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),t&&this.traceOutputChannel.appendLine(`${JSON.stringify(t)}`)}needsStart(){return this.state===Ct.Initial||this.state===Ct.Stopping||this.state===Ct.Stopped}needsStop(){return this.state===Ct.Starting||this.state===Ct.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===Ct.Running&&!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&&(this._onReady=new Promise((t,r)=>{this._onReadyCallbacks=new es(t,r)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?Ce.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):Ce.languages.createDiagnosticCollection()),this.state=Ct.Starting,this.resolveConnection().then(t=>(t.onLogMessage(r=>{switch(r.type){case j.MessageType.Error:this.error(r.message,void 0,!1);break;case j.MessageType.Warning:this.warn(r.message,void 0,!1);break;case j.MessageType.Info:this.info(r.message,void 0,!1);break;default:this.outputChannel.appendLine(r.message)}}),t.onShowMessage(r=>{switch(r.type){case j.MessageType.Error:Ce.window.showErrorMessage(r.message);break;case j.MessageType.Warning:Ce.window.showWarningMessage(r.message);break;case j.MessageType.Info:Ce.window.showInformationMessage(r.message);break;default:Ce.window.showInformationMessage(r.message)}}),t.onRequest(j.ShowMessageRequest.type,r=>{let n;switch(r.type){case j.MessageType.Error:n=Ce.window.showErrorMessage;break;case j.MessageType.Warning:n=Ce.window.showWarningMessage;break;case j.MessageType.Info:n=Ce.window.showInformationMessage;break;default:n=Ce.window.showInformationMessage}let o=r.actions||[];return n(r.message,...o)}),t.onTelemetry(r=>{this._telemetryEmitter.fire(r)}),t.onRequest(j.ShowDocumentRequest.type,async r=>{var n;let o=async i=>{let s=this.protocol2CodeConverter.asUri(i.uri);try{if(i.external===!0)return{success:await Ce.env.openExternal(s)};{let c={};return i.selection!==void 0&&(c.selection=this.protocol2CodeConverter.asRange(i.selection)),i.takeFocus===void 0||i.takeFocus===!1?c.preserveFocus=!0:i.takeFocus===!0&&(c.preserveFocus=!1),await Ce.window.showTextDocument(s,c),{success:!0}}}catch{return{success:!0}}},a=(n=this._clientOptions.middleware.window)===null||n===void 0?void 0:n.showDocument;return a!==void 0?a(r,o):o(r)}),t.listen(),this.initialize(t))).then(void 0,t=>{this.state=Ct.StartFailed,this._onReadyCallbacks.reject(t),this.error("Starting client failed",t),Ce.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new Ce.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(t){this.refreshTrace(t,!1);let r=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:this._clientGetRootPath(),o={processId:null,clientInfo:{name:Ce.env.appName,version:Ce.version},locale:this.getLocale(),rootPath:n||null,rootUri:n?this._c2p.asUri(Ce.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:pt.func(r)?r():r,trace:j.Trace.toString(this._trace),workspaceFolders:null};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let a=ft.generateUuid(),i=new RR.ProgressPart(t,a);return o.workDoneToken=a,this.doInitialize(t,o).then(s=>(i.done(),s),s=>{throw i.cancel(),s})}else return this.doInitialize(t,o)}doInitialize(t,r){return t.initialize(r).then(n=>{this._resolvedConnection=t,this._initializeResult=n,this.state=Ct.Running;let o;return pt.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===j.TextDocumentSyncKind.None?o={openClose:!1,change:j.TextDocumentSyncKind.None,save:void 0}:o={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(o=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:o}),t.onDiagnostics(a=>this.handleDiagnostics(a)),t.onRequest(j.RegistrationRequest.type,a=>this.handleRegistrationRequest(a)),t.onRequest("client/registerFeature",a=>this.handleRegistrationRequest(a)),t.onRequest(j.UnregistrationRequest.type,a=>this.handleUnregistrationRequest(a)),t.onRequest("client/unregisterFeature",a=>this.handleUnregistrationRequest(a)),t.onRequest(j.ApplyWorkspaceEditRequest.type,a=>this.handleApplyWorkspaceEdit(a)),t.sendNotification(j.InitializedNotification.type,{}),this.hookFileEvents(t),this.hookConfigurationChanged(t),this.initializeFeatures(t),this._onReadyCallbacks.resolve(),n}).then(void 0,n=>{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(t):(this.stop(),this._onReadyCallbacks.reject(n)):n instanceof j.ResponseError&&n.data&&n.data.retry?Ce.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(o=>{o&&o.id==="retry"?this.initialize(t):(this.stop(),this._onReadyCallbacks.reject(n))}):(n&&n.message&&Ce.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop(),this._onReadyCallbacks.reject(n)),n})}_clientGetRootPath(){let t=Ce.workspace.workspaceFolders;if(!t||t.length===0)return;let r=t[0];if(r.uri.scheme==="file")return r.uri.fsPath}stop(){return this._initializeResult=void 0,this._connectionPromise?this.state===Ct.Stopping&&this._onStop?this._onStop:(this.state=Ct.Stopping,this.cleanUp(!1),this._onStop=this.resolveConnection().then(t=>t.shutdown().then(()=>{t.exit(),t.end(),t.dispose(),this.state=Ct.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0}))):(this.state=Ct.Stopped,Promise.resolve())}cleanUp(t=!0,r=!0){this._listeners&&(this._listeners.forEach(n=>n.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(n=>n.dispose()),this._providers=void 0),this._syncedDocuments&&this._syncedDocuments.clear();for(let n of this._features.values())n.dispose();t&&this.cleanUpChannel(),r&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(t){var r;let n=this;function o(i){n._fileEvents.push(i),n._fileEventDelayer.trigger(()=>{n.onReady().then(()=>{n.resolveConnection().then(s=>{n.isConnectionActive()&&(n.forceDocumentSync(),s.didChangeWatchedFiles({changes:n._fileEvents})),n._fileEvents=[]})},s=>{n.error("Notify file events failed.",s)})})}let a=(r=this.clientOptions.middleware)===null||r===void 0?void 0:r.workspace;a?.didChangeWatchedFile?a.didChangeWatchedFile(t,o):o(t)}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&&(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(j.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(t){if(!this._diagnostics)return;let r=this._p2c.asUri(t.uri),n=this._p2c.asDiagnostics(t.diagnostics),o=this.clientOptions.middleware;o.handleDiagnostics?o.handleDiagnostics(r,n,(a,i)=>this.setDiagnostics(a,i)):this.setDiagnostics(r,n)}setDiagnostics(t,r){!this._diagnostics||this._diagnostics.set(t,r)}createConnection(){let t=(n,o,a)=>{this.handleConnectionError(n,o,a)},r=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>wR(n.reader,n.writer,t,r,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===Ct.Stopping||this.state===Ct.Stopped)return;try{this._resolvedConnection&&this._resolvedConnection.dispose()}catch{}let t=$n.DoNotRestart;try{t=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,t===$n.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state===Ct.Starting?(this._onReadyCallbacks.reject(new Error("Connection to server got closed. Server will not be restarted.")),this.state=Ct.StartFailed):this.state=Ct.Stopped,this.cleanUp(!1,!0)):t===$n.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!1,!1),this.state=Ct.Initial,this.start())}handleConnectionError(t,r,n){this._clientOptions.errorHandler.error(t,r,n)===Zo.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(t){Ce.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(t,!0)})}refreshTrace(t,r=!1){let n=Ce.workspace.getConfiguration(this._id),o=j.Trace.Off,a=j.TraceFormat.Text;if(n){let i=n.get("trace.server","off");typeof i=="string"?o=j.Trace.fromString(i):(o=j.Trace.fromString(n.get("trace.server.verbosity","off")),a=j.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=o,this._traceFormat=a,t.trace(this._trace,this._tracer,{sendNotification:r,traceFormat:this._traceFormat})}hookFileEvents(t){let r=this._clientOptions.synchronize.fileEvents;if(!r)return;let n;pt.array(r)?n=r:n=[r],n&&this._dynamicFeatures.get(j.DidChangeWatchedFilesNotification.type.method).registerRaw(ft.generateUuid(),n)}registerFeatures(t){for(let r of t)this.registerFeature(r)}registerFeature(t){if(this._features.push(t),Qc.is(t)){let r=t.registrationType;this._dynamicFeatures.set(r.method,t)}}getFeature(t){return this._dynamicFeatures.get(t)}registerBuiltinFeatures(){this.registerFeature(new bu(this)),this.registerFeature(new Jc(this,this._syncedDocuments)),this.registerFeature(new eu(this)),this.registerFeature(new tu(this)),this.registerFeature(new ru(this)),this.registerFeature(new nu(this)),this.registerFeature(new Zc(this,this._syncedDocuments)),this.registerFeature(new iu(this,t=>this.notifyFileEvent(t))),this.registerFeature(new su(this)),this.registerFeature(new au(this)),this.registerFeature(new cu(this)),this.registerFeature(new uu(this)),this.registerFeature(new lu(this)),this.registerFeature(new du(this)),this.registerFeature(new pu(this)),this.registerFeature(new fu(this)),this.registerFeature(new hu(this)),this.registerFeature(new gu(this)),this.registerFeature(new mu(this)),this.registerFeature(new vu(this)),this.registerFeature(new _u(this)),this.registerFeature(new yu(this)),this.registerFeature(new Eu(this)),this.registerFeature(new Cu(this))}fillInitializeParams(t){for(let r of this._features)pt.func(r.fillInitializeParams)&&r.fillInitializeParams(t)}computeClientCapabilities(){let t={};Ie(t,"workspace").applyEdit=!0;let r=Ie(Ie(t,"workspace"),"workspaceEdit");r.documentChanges=!0,r.resourceOperations=[j.ResourceOperationKind.Create,j.ResourceOperationKind.Rename,j.ResourceOperationKind.Delete],r.failureHandling=j.FailureHandlingKind.TextOnlyTransactional,r.normalizesLineEndings=!0,r.changeAnnotationSupport={groupsOnLabel:!0};let n=Ie(Ie(t,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[j.DiagnosticTag.Unnecessary,j.DiagnosticTag.Deprecated]},n.codeDescriptionSupport=!0,n.dataSupport=!0;let o=Ie(t,"window"),a=Ie(o,"showMessage");a.messageActionItem={additionalPropertiesSupport:!0};let i=Ie(o,"showDocument");i.support=!0;let s=Ie(t,"general");s.regularExpressions={engine:"ECMAScript",version:"ES2020"},s.markdown={parser:"marked",version:"1.1.0"};for(let c of this._features)c.fillClientCapabilities(t);return t}initializeFeatures(t){let r=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,r)}handleRegistrationRequest(t){return new Promise((r,n)=>{for(let o of t.registrations){let a=this._dynamicFeatures.get(o.method);if(a===void 0){n(new Error(`No feature implementation for ${o.method} found. Registration failed.`));return}let i=o.registerOptions||{};i.documentSelector=i.documentSelector||this._clientOptions.documentSelector;let s={id:o.id,registerOptions:i};try{a.register(s)}catch(c){n(c);return}}r()})}handleUnregistrationRequest(t){return new Promise((r,n)=>{for(let o of t.unregisterations){let a=this._dynamicFeatures.get(o.method);if(!a){n(new Error(`No feature implementation for ${o.method} found. Unregistration failed.`));return}a.unregister(o.id)}r()})}handleApplyWorkspaceEdit(t){let r=t.edit,n=new Map;Ce.workspace.textDocuments.forEach(a=>n.set(a.uri.toString(),a));let o=!1;if(r.documentChanges){for(let a of r.documentChanges)if(j.TextDocumentEdit.is(a)&&a.textDocument.version&&a.textDocument.version>=0){let i=n.get(a.textDocument.uri);if(i&&i.version!==a.textDocument.version){o=!0;break}}}return o?Promise.resolve({applied:!1}):pt.asPromise(Ce.workspace.applyEdit(this._p2c.asWorkspaceEdit(t.edit)).then(a=>({applied:a})))}handleFailedRequest(t,r,n){if(r instanceof j.ResponseError){if(r.code===j.LSPErrorCodes.RequestCancelled)throw this.makeCancelError();if(r.code===j.LSPErrorCodes.ContentModified)return n}throw this.error(`Request ${t.method} failed.`,r),r}makeCancelError(){let t=new Error(Un.Canceled);return t.name=Un.Canceled,t}};Dt.BaseLanguageClient=Un;Un.Canceled="Canceled"});var $h=ee(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.ColorProviderFeature=void 0;var ts=require("vscode"),ro=Rt(),IR=vr();function Hh(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Tu=class extends IR.TextDocumentFeature{constructor(t){super(t,ro.DocumentColorRequest.type)}fillClientCapabilities(t){Hh(Hh(t,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.colorProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideColorPresentations:(n,o,a)=>{let i=this._client,s=(l,d,u)=>{let p={color:l,textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(d.document),range:i.code2ProtocolConverter.asRange(d.range)};return i.sendRequest(ro.ColorPresentationRequest.type,p,u).then(this.asColorPresentations.bind(this),f=>i.handleFailedRequest(ro.ColorPresentationRequest.type,f,null))},c=i.clientOptions.middleware;return c.provideColorPresentations?c.provideColorPresentations(n,o,a,s):s(n,o,a)},provideDocumentColors:(n,o)=>{let a=this._client,i=(c,l)=>{let d={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(c)};return a.sendRequest(ro.DocumentColorRequest.type,d,l).then(this.asColorInformations.bind(this),u=>a.handleFailedRequest(ro.ColorPresentationRequest.type,u,null))},s=a.clientOptions.middleware;return s.provideDocumentColors?s.provideDocumentColors(n,o,i):i(n,o)}};return[ts.languages.registerColorProvider(t.documentSelector,r),r]}asColor(t){return new ts.Color(t.red,t.green,t.blue,t.alpha)}asColorInformations(t){return Array.isArray(t)?t.map(r=>new ts.ColorInformation(this._client.protocol2CodeConverter.asRange(r.range),this.asColor(r.color))):[]}asColorPresentations(t){return Array.isArray(t)?t.map(r=>{let n=new ts.ColorPresentation(r.label);return n.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(r.additionalTextEdits),n.textEdit=this._client.protocol2CodeConverter.asTextEdit(r.textEdit),n}):[]}};rs.ColorProviderFeature=Tu});var Bh=ee(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.ImplementationFeature=void 0;var DR=require("vscode"),Su=Rt(),AR=vr();function Uh(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Ru=class extends AR.TextDocumentFeature{constructor(t){super(t,Su.ImplementationRequest.type)}fillClientCapabilities(t){let r=Uh(Uh(t,"textDocument"),"implementation");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.implementationProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideImplementation:(n,o,a)=>{let i=this._client,s=(l,d,u)=>i.sendRequest(Su.ImplementationRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(l,d),u).then(i.protocol2CodeConverter.asDefinitionResult,p=>i.handleFailedRequest(Su.ImplementationRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideImplementation?c.provideImplementation(n,o,a,s):s(n,o,a)}};return[DR.languages.registerImplementationProvider(t.documentSelector,r),r]}};ns.ImplementationFeature=Ru});var Vh=ee(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.TypeDefinitionFeature=void 0;var xR=require("vscode"),wu=Rt(),NR=vr();function is(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Pu=class extends NR.TextDocumentFeature{constructor(t){super(t,wu.TypeDefinitionRequest.type)}fillClientCapabilities(t){is(is(t,"textDocument"),"typeDefinition").dynamicRegistration=!0;let r=is(is(t,"textDocument"),"typeDefinition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.typeDefinitionProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideTypeDefinition:(n,o,a)=>{let i=this._client,s=(l,d,u)=>i.sendRequest(wu.TypeDefinitionRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(l,d),u).then(i.protocol2CodeConverter.asDefinitionResult,p=>i.handleFailedRequest(wu.TypeDefinitionRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideTypeDefinition?c.provideTypeDefinition(n,o,a,s):s(n,o,a)}};return[xR.languages.registerTypeDefinitionProvider(t.documentSelector,r),r]}};os.TypeDefinitionFeature=Pu});var Gh=ee(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.WorkspaceFoldersFeature=ui.arrayDiff=void 0;var kR=Yo(),ss=require("vscode"),Ou=Rt();function Iu(e,t){if(e!==void 0)return e[t]}function Du(e,t){return e.filter(r=>t.indexOf(r)<0)}ui.arrayDiff=Du;var Au=class{constructor(t){this._client=t,this._listeners=new Map}get registrationType(){return Ou.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(t){let r=ss.workspace.workspaceFolders;this.initializeWithFolders(r),r===void 0?t.workspaceFolders=null:t.workspaceFolders=r.map(n=>this.asProtocol(n))}initializeWithFolders(t){this._initialFolders=t}fillClientCapabilities(t){t.workspace=t.workspace||{},t.workspace.workspaceFolders=!0}initialize(t){let r=this._client;r.onRequest(Ou.WorkspaceFoldersRequest.type,a=>{let i=()=>{let c=ss.workspace.workspaceFolders;return c===void 0?null:c.map(d=>this.asProtocol(d))},s=r.clientOptions.middleware.workspace;return s&&s.workspaceFolders?s.workspaceFolders(a,i):i(a)});let n=Iu(Iu(Iu(t,"workspace"),"workspaceFolders"),"changeNotifications"),o;typeof n=="string"?o=n:n===!0&&(o=kR.generateUuid()),o&&this.register({id:o,registerOptions:void 0})}sendInitialEvent(t){if(this._initialFolders&&t){let r=Du(this._initialFolders,t),n=Du(t,this._initialFolders);(n.length>0||r.length>0)&&this.doSendEvent(n,r)}else this._initialFolders?this.doSendEvent([],this._initialFolders):t&&this.doSendEvent(t,[])}doSendEvent(t,r){let n={event:{added:t.map(o=>this.asProtocol(o)),removed:r.map(o=>this.asProtocol(o))}};this._client.sendNotification(Ou.DidChangeWorkspaceFoldersNotification.type,n)}register(t){let r=t.id,n=this._client,o=ss.workspace.onDidChangeWorkspaceFolders(a=>{let i=c=>{this.doSendEvent(c.added,c.removed)},s=n.clientOptions.middleware.workspace;s&&s.didChangeWorkspaceFolders?s.didChangeWorkspaceFolders(a,i):i(a)});this._listeners.set(r,o),this.sendInitialEvent(ss.workspace.workspaceFolders)}unregister(t){let r=this._listeners.get(t);r!==void 0&&(this._listeners.delete(t),r.dispose())}dispose(){for(let t of this._listeners.values())t.dispose();this._listeners.clear()}asProtocol(t){return t===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(t.uri),name:t.name}}};ui.WorkspaceFoldersFeature=Au});var Kh=ee(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.FoldingRangeFeature=void 0;var no=require("vscode"),li=Rt(),MR=vr();function Wh(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var di=class extends MR.TextDocumentFeature{constructor(t){super(t,li.FoldingRangeRequest.type)}fillClientCapabilities(t){let r=Wh(Wh(t,"textDocument"),"foldingRange");r.dynamicRegistration=!0,r.rangeLimit=5e3,r.lineFoldingOnly=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.foldingRangeProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideFoldingRanges:(n,o,a)=>{let i=this._client,s=(l,d,u)=>{let p={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(l)};return i.sendRequest(li.FoldingRangeRequest.type,p,u).then(di.asFoldingRanges,f=>i.handleFailedRequest(li.FoldingRangeRequest.type,f,null))},c=i.clientOptions.middleware;return c.provideFoldingRanges?c.provideFoldingRanges(n,o,a,s):s(n,o,a)}};return[no.languages.registerFoldingRangeProvider(t.documentSelector,r),r]}static asFoldingRangeKind(t){if(t)switch(t){case li.FoldingRangeKind.Comment:return no.FoldingRangeKind.Comment;case li.FoldingRangeKind.Imports:return no.FoldingRangeKind.Imports;case li.FoldingRangeKind.Region:return no.FoldingRangeKind.Region}}static asFoldingRanges(t){return Array.isArray(t)?t.map(r=>new no.FoldingRange(r.startLine,r.endLine,di.asFoldingRangeKind(r.kind))):[]}};as.FoldingRangeFeature=di});var Xh=ee(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.DeclarationFeature=void 0;var qR=require("vscode"),xu=Rt(),LR=vr();function zh(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Nu=class extends LR.TextDocumentFeature{constructor(t){super(t,xu.DeclarationRequest.type)}fillClientCapabilities(t){let r=zh(zh(t,"textDocument"),"declaration");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.declarationProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideDeclaration:(n,o,a)=>{let i=this._client,s=(l,d,u)=>i.sendRequest(xu.DeclarationRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(l,d),u).then(i.protocol2CodeConverter.asDeclarationResult,p=>i.handleFailedRequest(xu.DeclarationRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideDeclaration?c.provideDeclaration(n,o,a,s):s(n,o,a)}};return[qR.languages.registerDeclarationProvider(t.documentSelector,r),r]}};cs.DeclarationFeature=Nu});var Qh=ee(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.SelectionRangeFeature=void 0;var jR=require("vscode"),ku=Rt(),FR=vr();function Yh(e,t){return e[t]===void 0&&(e[t]=Object.create(null)),e[t]}var Mu=class extends FR.TextDocumentFeature{constructor(t){super(t,ku.SelectionRangeRequest.type)}fillClientCapabilities(t){let r=Yh(Yh(t,"textDocument"),"selectionRange");r.dynamicRegistration=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.selectionRangeProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideSelectionRanges:(n,o,a)=>{let i=this._client,s=(l,d,u)=>{let p={textDocument:i.code2ProtocolConverter.asTextDocumentIdentifier(l),positions:i.code2ProtocolConverter.asPositions(d)};return i.sendRequest(ku.SelectionRangeRequest.type,p,u).then(f=>i.protocol2CodeConverter.asSelectionRanges(f),f=>i.handleFailedRequest(ku.SelectionRangeRequest.type,f,null))},c=i.clientOptions.middleware;return c.provideSelectionRanges?c.provideSelectionRanges(n,o,a,s):s(n,o,a)}};return[jR.languages.registerSelectionRangeProvider(t.documentSelector,r),r]}};us.SelectionRangeFeature=Mu});var Jh=ee(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.ProgressFeature=void 0;var HR=Rt(),$R=zc();function UR(e,t){return e[t]===void 0&&(e[t]=Object.create(null)),e[t]}var qu=class{constructor(t){this._client=t,this.activeParts=new Set}fillClientCapabilities(t){UR(t,"window").workDoneProgress=!0}initialize(){let t=this._client,r=o=>{this.activeParts.delete(o)},n=o=>{this.activeParts.add(new $R.ProgressPart(this._client,o.token,r))};t.onRequest(HR.WorkDoneProgressCreateRequest.type,n)}dispose(){for(let t of this.activeParts)t.done();this.activeParts.clear()}};ls.ProgressFeature=qu});var eg=ee(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.CallHierarchyFeature=void 0;var BR=require("vscode"),Bn=Rt(),VR=vr();function Zh(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Lu=class{constructor(t){this.client=t,this.middleware=t.clientOptions.middleware}prepareCallHierarchy(t,r,n){let o=this.client,a=this.middleware,i=(s,c,l)=>{let d=o.code2ProtocolConverter.asTextDocumentPositionParams(s,c);return o.sendRequest(Bn.CallHierarchyPrepareRequest.type,d,l).then(u=>o.protocol2CodeConverter.asCallHierarchyItems(u),u=>o.handleFailedRequest(Bn.CallHierarchyPrepareRequest.type,u,null))};return a.prepareCallHierarchy?a.prepareCallHierarchy(t,r,n,i):i(t,r,n)}provideCallHierarchyIncomingCalls(t,r){let n=this.client,o=this.middleware,a=(i,s)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(i)};return n.sendRequest(Bn.CallHierarchyIncomingCallsRequest.type,c,s).then(l=>n.protocol2CodeConverter.asCallHierarchyIncomingCalls(l),l=>n.handleFailedRequest(Bn.CallHierarchyIncomingCallsRequest.type,l,null))};return o.provideCallHierarchyIncomingCalls?o.provideCallHierarchyIncomingCalls(t,r,a):a(t,r)}provideCallHierarchyOutgoingCalls(t,r){let n=this.client,o=this.middleware,a=(i,s)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(i)};return n.sendRequest(Bn.CallHierarchyOutgoingCallsRequest.type,c,s).then(l=>n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(l),l=>n.handleFailedRequest(Bn.CallHierarchyOutgoingCallsRequest.type,l,null))};return o.provideCallHierarchyOutgoingCalls?o.provideCallHierarchyOutgoingCalls(t,r,a):a(t,r)}},ju=class extends VR.TextDocumentFeature{constructor(t){super(t,Bn.CallHierarchyPrepareRequest.type)}fillClientCapabilities(t){let n=Zh(Zh(t,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.callHierarchyProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r=this._client,n=new Lu(r);return[BR.languages.registerCallHierarchyProvider(t.documentSelector,n),n]}};ds.CallHierarchyFeature=ju});var tg=ee(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.SemanticTokensFeature=void 0;var ps=require("vscode"),GR=vr(),Ue=Rt(),WR=cn();function fs(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Fu=class extends GR.TextDocumentFeature{constructor(t){super(t,Ue.SemanticTokensRegistrationType.type)}fillClientCapabilities(t){let r=fs(fs(t,"textDocument"),"semanticTokens");r.dynamicRegistration=!0,r.tokenTypes=[Ue.SemanticTokenTypes.namespace,Ue.SemanticTokenTypes.type,Ue.SemanticTokenTypes.class,Ue.SemanticTokenTypes.enum,Ue.SemanticTokenTypes.interface,Ue.SemanticTokenTypes.struct,Ue.SemanticTokenTypes.typeParameter,Ue.SemanticTokenTypes.parameter,Ue.SemanticTokenTypes.variable,Ue.SemanticTokenTypes.property,Ue.SemanticTokenTypes.enumMember,Ue.SemanticTokenTypes.event,Ue.SemanticTokenTypes.function,Ue.SemanticTokenTypes.method,Ue.SemanticTokenTypes.macro,Ue.SemanticTokenTypes.keyword,Ue.SemanticTokenTypes.modifier,Ue.SemanticTokenTypes.comment,Ue.SemanticTokenTypes.string,Ue.SemanticTokenTypes.number,Ue.SemanticTokenTypes.regexp,Ue.SemanticTokenTypes.operator],r.tokenModifiers=[Ue.SemanticTokenModifiers.declaration,Ue.SemanticTokenModifiers.definition,Ue.SemanticTokenModifiers.readonly,Ue.SemanticTokenModifiers.static,Ue.SemanticTokenModifiers.deprecated,Ue.SemanticTokenModifiers.abstract,Ue.SemanticTokenModifiers.async,Ue.SemanticTokenModifiers.modification,Ue.SemanticTokenModifiers.documentation,Ue.SemanticTokenModifiers.defaultLibrary],r.formats=[Ue.TokenFormat.Relative],r.requests={range:!0,full:{delta:!0}},r.multilineTokenSupport=!1,r.overlappingTokenSupport=!1,fs(fs(t,"workspace"),"semanticTokens").refreshSupport=!0}initialize(t,r){this._client.onRequest(Ue.SemanticTokensRefreshRequest.type,async()=>{for(let i of this.getAllProviders())i.onDidChangeSemanticTokensEmitter.fire()});let[o,a]=this.getRegistration(r,t.semanticTokensProvider);!o||!a||this.register({id:o,registerOptions:a})}registerLanguageProvider(t){let r=WR.boolean(t.full)?t.full:t.full!==void 0,n=t.full!==void 0&&typeof t.full!="boolean"&&t.full.delta===!0,o=new ps.EventEmitter,a=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(u,p)=>{let f=this._client,g=f.clientOptions.middleware,m=(_,E)=>{let T={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(_)};return f.sendRequest(Ue.SemanticTokensRequest.type,T,E).then(w=>f.protocol2CodeConverter.asSemanticTokens(w),w=>f.handleFailedRequest(Ue.SemanticTokensRequest.type,w,null))};return g.provideDocumentSemanticTokens?g.provideDocumentSemanticTokens(u,p,m):m(u,p)},provideDocumentSemanticTokensEdits:n?(u,p,f)=>{let g=this._client,m=g.clientOptions.middleware,_=(E,T,w)=>{let R={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(E),previousResultId:T};return g.sendRequest(Ue.SemanticTokensDeltaRequest.type,R,w).then(I=>Ue.SemanticTokens.is(I)?g.protocol2CodeConverter.asSemanticTokens(I):g.protocol2CodeConverter.asSemanticTokensEdits(I),I=>g.handleFailedRequest(Ue.SemanticTokensDeltaRequest.type,I,null))};return m.provideDocumentSemanticTokensEdits?m.provideDocumentSemanticTokensEdits(u,p,f,_):_(u,p,f)}:void 0}:void 0,s=t.range===!0?{provideDocumentRangeSemanticTokens:(u,p,f)=>{let g=this._client,m=g.clientOptions.middleware,_=(E,T,w)=>{let R={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(E),range:g.code2ProtocolConverter.asRange(T)};return g.sendRequest(Ue.SemanticTokensRangeRequest.type,R,w).then(I=>g.protocol2CodeConverter.asSemanticTokens(I),I=>g.handleFailedRequest(Ue.SemanticTokensRangeRequest.type,I,null))};return m.provideDocumentRangeSemanticTokens?m.provideDocumentRangeSemanticTokens(u,p,f,_):_(u,p,f)}}:void 0,c=[],d=this._client.protocol2CodeConverter.asSemanticTokensLegend(t.legend);return a!==void 0&&c.push(ps.languages.registerDocumentSemanticTokensProvider(t.documentSelector,a,d)),s!==void 0&&c.push(ps.languages.registerDocumentRangeSemanticTokensProvider(t.documentSelector,s,d)),[new ps.Disposable(()=>c.forEach(u=>u.dispose())),{range:s,full:a,onDidChangeSemanticTokensEmitter:o}]}};hs.SemanticTokensFeature=Fu});var ng=ee((qI,rg)=>{rg.exports=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=t(e[n],n);KR(o)?r.push.apply(r,o):r.push(o)}return r};var KR=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var cg=ee((LI,ag)=>{"use strict";ag.exports=og;function og(e,t,r){e instanceof RegExp&&(e=ig(e,r)),t instanceof RegExp&&(t=ig(t,r));var n=sg(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function ig(e,t){var r=t.match(e);return r?r[0]:null}og.range=sg;function sg(e,t,r){var n,o,a,i,s,c=r.indexOf(e),l=r.indexOf(t,c+1),d=c;if(c>=0&&l>0){if(e===t)return[c,l];for(n=[],a=r.length;d>=0&&!s;)d==c?(n.push(d),c=r.indexOf(e,d+1)):n.length==1?s=[n.pop(),l]:(o=n.pop(),o<a&&(a=o,i=l),l=r.indexOf(t,d+1)),d=c<l&&c>=0?c:l;n.length&&(s=[a,i])}return s}});var mg=ee((jI,gg)=>{var zR=ng(),ug=cg();gg.exports=QR;var lg="\0SLASH"+Math.random()+"\0",dg="\0OPEN"+Math.random()+"\0",$u="\0CLOSE"+Math.random()+"\0",pg="\0COMMA"+Math.random()+"\0",fg="\0PERIOD"+Math.random()+"\0";function Hu(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function XR(e){return e.split("\\\\").join(lg).split("\\{").join(dg).split("\\}").join($u).split("\\,").join(pg).split("\\.").join(fg)}function YR(e){return e.split(lg).join("\\").split(dg).join("{").split($u).join("}").split(pg).join(",").split(fg).join(".")}function hg(e){if(!e)return[""];var t=[],r=ug("{","}",e);if(!r)return e.split(",");var n=r.pre,o=r.body,a=r.post,i=n.split(",");i[i.length-1]+="{"+o+"}";var s=hg(a);return a.length&&(i[i.length-1]+=s.shift(),i.push.apply(i,s)),t.push.apply(t,i),t}function QR(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),pi(XR(e),!0).map(YR)):[]}function JR(e){return"{"+e+"}"}function ZR(e){return/^-?0\d/.test(e)}function ew(e,t){return e<=t}function tw(e,t){return e>=t}function pi(e,t){var r=[],n=ug("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),i=o||a,s=n.body.indexOf(",")>=0;if(!i&&!s)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+$u+n.post,pi(e)):[e];var c;if(i)c=n.body.split(/\.\./);else if(c=hg(n.body),c.length===1&&(c=pi(c[0],!1).map(JR),c.length===1)){var d=n.post.length?pi(n.post,!1):[""];return d.map(function(U){return n.pre+c[0]+U})}var l=n.pre,d=n.post.length?pi(n.post,!1):[""],u;if(i){var p=Hu(c[0]),f=Hu(c[1]),g=Math.max(c[0].length,c[1].length),m=c.length==3?Math.abs(Hu(c[2])):1,_=ew,E=f<p;E&&(m*=-1,_=tw);var T=c.some(ZR);u=[];for(var w=p;_(w,f);w+=m){var R;if(a)R=String.fromCharCode(w),R==="\\"&&(R="");else if(R=String(w),T){var I=g-R.length;if(I>0){var H=new Array(I+1).join("0");w<0?R="-"+H+R.slice(1):R=H+R}}u.push(R)}}else u=zR(c,function(te){return pi(te,!1)});for(var z=0;z<u.length;z++)for(var K=0;K<d.length;K++){var J=l+u[z]+d[K];(!t||i||J)&&r.push(J)}return r}});var Cg=ee((FI,bg)=>{bg.exports=_r;_r.Minimatch=Qt;var io=function(){try{return require("path")}catch{}}()||{sep:"/"};_r.sep=io.sep;var Vu=_r.GLOBSTAR=Qt.GLOBSTAR={},rw=mg(),vg={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Uu="[^/]",Bu=Uu+"*?",nw="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",iw="(?:(?!(?:\\/|^)\\.).)*?",_g=ow("().*{}+?[]^$\\!");function ow(e){return e.split("").reduce(function(t,r){return t[r]=!0,t},{})}var yg=/\/+/;_r.filter=sw;function sw(e,t){return t=t||{},function(r,n,o){return _r(r,e,t)}}function hn(e,t){t=t||{};var r={};return Object.keys(e).forEach(function(n){r[n]=e[n]}),Object.keys(t).forEach(function(n){r[n]=t[n]}),r}_r.defaults=function(e){if(!e||typeof e!="object"||!Object.keys(e).length)return _r;var t=_r,r=function(o,a,i){return t(o,a,hn(e,i))};return r.Minimatch=function(o,a){return new t.Minimatch(o,hn(e,a))},r.Minimatch.defaults=function(o){return t.defaults(hn(e,o)).Minimatch},r.filter=function(o,a){return t.filter(o,hn(e,a))},r.defaults=function(o){return t.defaults(hn(e,o))},r.makeRe=function(o,a){return t.makeRe(o,hn(e,a))},r.braceExpand=function(o,a){return t.braceExpand(o,hn(e,a))},r.match=function(n,o,a){return t.match(n,o,hn(e,a))},r};Qt.defaults=function(e){return _r.defaults(e).Minimatch};function _r(e,t,r){return ms(t),r||(r={}),!r.nocomment&&t.charAt(0)==="#"?!1:new Qt(t,r).match(e)}function Qt(e,t){if(!(this instanceof Qt))return new Qt(e,t);ms(e),t||(t={}),e=e.trim(),!t.allowWindowsEscape&&io.sep!=="/"&&(e=e.split(io.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}Qt.prototype.debug=function(){};Qt.prototype.make=aw;function aw(){var e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(yg)}),this.debug(this.pattern,r),r=r.map(function(n,o,a){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}Qt.prototype.parseNegate=cw;function cw(){var e=this.pattern,t=!1,r=this.options,n=0;if(!r.nonegate){for(var o=0,a=e.length;o<a&&e.charAt(o)==="!";o++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}}_r.braceExpand=function(e,t){return Eg(e,t)};Qt.prototype.braceExpand=Eg;function Eg(e,t){return t||(this instanceof Qt?t=this.options:t={}),e=typeof e>"u"?this.pattern:e,ms(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:rw(e)}var uw=1024*64,ms=function(e){if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>uw)throw new TypeError("pattern is too long")};Qt.prototype.parse=lw;var gs={};function lw(e,t){ms(e);var r=this.options;if(e==="**")if(r.noglobstar)e="*";else return Vu;if(e==="")return"";var n="",o=!!r.nocase,a=!1,i=[],s=[],c,l=!1,d=-1,u=-1,p=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",f=this;function g(){if(c){switch(c){case"*":n+=Bu,o=!0;break;case"?":n+=Uu,o=!0;break;default:n+="\\"+c;break}f.debug("clearStateChar %j %j",c,n),c=!1}}for(var m=0,_=e.length,E;m<_&&(E=e.charAt(m));m++){if(this.debug("%s	%s %s %j",e,m,n,E),a&&_g[E]){n+="\\"+E,a=!1;continue}switch(E){case"/":return!1;case"\\":g(),a=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,m,n,E),l){this.debug("  in class"),E==="!"&&m===u+1&&(E="^"),n+=E;continue}f.debug("call clearStateChar %j",c),g(),c=E,r.noext&&g();continue;case"(":if(l){n+="(";continue}if(!c){n+="\\(";continue}i.push({type:c,start:m-1,reStart:n.length,open:vg[c].open,close:vg[c].close}),n+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,n),c=!1;continue;case")":if(l||!i.length){n+="\\)";continue}g(),o=!0;var T=i.pop();n+=T.close,T.type==="!"&&s.push(T),T.reEnd=n.length;continue;case"|":if(l||!i.length||a){n+="\\|",a=!1;continue}g(),n+="|";continue;case"[":if(g(),l){n+="\\"+E;continue}l=!0,u=m,d=n.length,n+=E;continue;case"]":if(m===u+1||!l){n+="\\"+E,a=!1;continue}var w=e.substring(u+1,m);try{RegExp("["+w+"]")}catch{var R=this.parse(w,gs);n=n.substr(0,d)+"\\["+R[0]+"\\]",o=o||R[1],l=!1;continue}o=!0,l=!1,n+=E;continue;default:g(),a?a=!1:_g[E]&&!(E==="^"&&l)&&(n+="\\"),n+=E}}for(l&&(w=e.substr(u+1),R=this.parse(w,gs),n=n.substr(0,d)+"\\["+R[0],o=o||R[1]),T=i.pop();T;T=i.pop()){var I=n.slice(T.reStart+T.open.length);this.debug("setting tail",n,T),I=I.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(pe,he,be){return be||(be="\\"),he+he+be+"|"}),this.debug(`tail=%j
   %s`,I,I,T,n);var H=T.type==="*"?Bu:T.type==="?"?Uu:"\\"+T.type;o=!0,n=n.slice(0,T.reStart)+H+"\\("+I}g(),a&&(n+="\\\\");var z=!1;switch(n.charAt(0)){case"[":case".":case"(":z=!0}for(var K=s.length-1;K>-1;K--){var J=s[K],te=n.slice(0,J.reStart),U=n.slice(J.reStart,J.reEnd-8),V=n.slice(J.reEnd-8,J.reEnd),Q=n.slice(J.reEnd);V+=Q;var ne=te.split("(").length-1,ve=Q;for(m=0;m<ne;m++)ve=ve.replace(/\)[+*?]?/,"");Q=ve;var de="";Q===""&&t!==gs&&(de="$");var X=te+U+Q+de+V;n=X}if(n!==""&&o&&(n="(?=.)"+n),z&&(n=p+n),t===gs)return[n,o];if(!o)return pw(e);var ce=r.nocase?"i":"";try{var ie=new RegExp("^"+n+"$",ce)}catch{return new RegExp("$.")}return ie._glob=e,ie._src=n,ie}_r.makeRe=function(e,t){return new Qt(e,t||{}).makeRe()};Qt.prototype.makeRe=dw;function dw(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?Bu:t.dot?nw:iw,n=t.nocase?"i":"",o=e.map(function(a){return a.map(function(i){return i===Vu?r:typeof i=="string"?fw(i):i._src}).join("\\/")}).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,n)}catch{this.regexp=!1}return this.regexp}_r.match=function(e,t,r){r=r||{};var n=new Qt(t,r);return e=e.filter(function(o){return n.match(o)}),n.options.nonull&&!e.length&&e.push(t),e};Qt.prototype.match=function(t,r){if(typeof r>"u"&&(r=this.partial),this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&r)return!0;var n=this.options;io.sep!=="/"&&(t=t.split(io.sep).join("/")),t=t.split(yg),this.debug(this.pattern,"split",t);var o=this.set;this.debug(this.pattern,"set",o);var a,i;for(i=t.length-1;i>=0&&(a=t[i],!a);i--);for(i=0;i<o.length;i++){var s=o[i],c=t;n.matchBase&&s.length===1&&(c=[a]);var l=this.matchOne(c,s,r);if(l)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};Qt.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,a=0,i=e.length,s=t.length;o<i&&a<s;o++,a++){this.debug("matchOne loop");var c=t[a],l=e[o];if(this.debug(t,c,l),c===!1)return!1;if(c===Vu){this.debug("GLOBSTAR",[t,c,l]);var d=o,u=a+1;if(u===s){for(this.debug("** at the end");o<i;o++)if(e[o]==="."||e[o]===".."||!n.dot&&e[o].charAt(0)===".")return!1;return!0}for(;d<i;){var p=e[d];if(this.debug(`
globstar while`,e,d,t,u,p),this.matchOne(e.slice(d),t.slice(u),r))return this.debug("globstar found match!",d,i,p),!0;if(p==="."||p===".."||!n.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,d,t,u);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,d,t,u),d===i))}var f;if(typeof c=="string"?(f=l===c,this.debug("string match",c,l,f)):(f=l.match(c),this.debug("pattern match",c,l,f)),!f)return!1}if(o===i&&a===s)return!0;if(o===i)return r;if(a===s)return o===i-1&&e[o]==="";throw new Error("wtf?")};function pw(e){return e.replace(/\\(.)/g,"$1")}function fw(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var Rg=ee(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.WillDeleteFilesFeature=fr.WillRenameFilesFeature=fr.WillCreateFilesFeature=fr.DidDeleteFilesFeature=fr.DidRenameFilesFeature=fr.DidCreateFilesFeature=void 0;var $r=require("vscode"),hw=Cg(),en=Rt(),gw=Yo();function Tg(e,t){return e[t]===void 0&&(e[t]={}),e[t]}function mw(e,t){return e[t]}function Sg(e,t,r){e[t]=r}var gn=class{constructor(t,r,n,o,a){this._filters=new Map,this._client=t,this._event=r,this._registrationType=n,this._clientCapability=o,this._serverCapability=a}get registrationType(){return this._registrationType}fillClientCapabilities(t){let r=Tg(Tg(t,"workspace"),"fileOperations");Sg(r,"dynamicRegistration",!0),Sg(r,this._clientCapability,!0)}initialize(t){var r;let n=(r=t.workspace)===null||r===void 0?void 0:r.fileOperations,o=n!==void 0?mw(n,this._serverCapability):void 0;if(o?.filters!==void 0)try{this.register({id:gw.generateUuid(),registerOptions:{filters:o.filters}})}catch(a){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${a}`)}}register(t){this._listener||(this._listener=this._event(this.send,this));let r=t.registerOptions.filters.map(n=>{let o=new hw.Minimatch(n.pattern.glob,gn.asMinimatchOptions(n.pattern.options));if(!o.makeRe())throw new Error(`Invalid pattern ${n.pattern.glob}!`);return{scheme:n.scheme,matcher:o,kind:n.pattern.matches}});this._filters.set(t.id,r)}unregister(t){this._filters.delete(t),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}async filter(t,r){let n=await Promise.all(t.files.map(async a=>{let i=r(a),s=i.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let l of c)if(!(l.scheme!==void 0&&l.scheme!==i.scheme)){if(l.matcher.match(s)){if(l.kind===void 0)return!0;let d=await gn.getFileType(i);if(d===void 0)return this._client.error(`Failed to determine file type for ${i.toString()}.`),!0;if(d===$r.FileType.File&&l.kind===en.FileOperationPatternKind.file||d===$r.FileType.Directory&&l.kind===en.FileOperationPatternKind.folder)return!0}else if(l.kind===en.FileOperationPatternKind.folder&&await gn.getFileType(i)===$r.FileType.Directory&&l.matcher.match(`${s}/`))return!0}return!1})),o=t.files.filter((a,i)=>n[i]);return Object.assign(Object.assign({},t),{files:o})}static async getFileType(t){try{return(await $r.workspace.fs.stat(t)).type}catch{return}}static asMinimatchOptions(t){if(t!==void 0&&t.ignoreCase===!0)return{nocase:!0}}},oo=class extends gn{constructor(t,r,n,o,a,i,s){super(t,r,n,o,a),this._notificationType=n,this._accessUri=i,this._createParams=s}async send(t){let r=await this.filter(t,this._accessUri);if(r.files.length){let n=async o=>{this._client.sendNotification(this._notificationType,this._createParams(o))};this.doSend(r,n)}}},Gu=class extends oo{constructor(t){super(t,$r.workspace.onDidCreateFiles,en.DidCreateFilesNotification.type,"didCreate","didCreate",r=>r,t.code2ProtocolConverter.asDidCreateFilesParams)}doSend(t,r){var n;let o=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return o?.didCreateFiles?o.didCreateFiles(t,r):r(t)}};fr.DidCreateFilesFeature=Gu;var Wu=class extends oo{constructor(t){super(t,$r.workspace.onDidRenameFiles,en.DidRenameFilesNotification.type,"didRename","didRename",r=>r.oldUri,t.code2ProtocolConverter.asDidRenameFilesParams)}doSend(t,r){var n;let o=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return o?.didRenameFiles?o.didRenameFiles(t,r):r(t)}};fr.DidRenameFilesFeature=Wu;var Ku=class extends oo{constructor(t){super(t,$r.workspace.onDidDeleteFiles,en.DidDeleteFilesNotification.type,"didDelete","didDelete",r=>r,t.code2ProtocolConverter.asDidDeleteFilesParams)}doSend(t,r){var n;let o=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return o?.didDeleteFiles?o.didDeleteFiles(t,r):r(t)}};fr.DidDeleteFilesFeature=Ku;var so=class extends gn{constructor(t,r,n,o,a,i,s){super(t,r,n,o,a),this._requestType=n,this._accessUri=i,this._createParams=s}async send(t){let r=this.waitUntil(t);t.waitUntil(r)}async waitUntil(t){let r=await this.filter(t,this._accessUri);if(r.files.length){let n=o=>this._client.sendRequest(this._requestType,this._createParams(o)).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(r,n)}else return}},zu=class extends so{constructor(t){super(t,$r.workspace.onWillCreateFiles,en.WillCreateFilesRequest.type,"willCreate","willCreate",r=>r,t.code2ProtocolConverter.asWillCreateFilesParams)}doSend(t,r){var n;let o=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return o?.willCreateFiles?o.willCreateFiles(t,r):r(t)}};fr.WillCreateFilesFeature=zu;var Xu=class extends so{constructor(t){super(t,$r.workspace.onWillRenameFiles,en.WillRenameFilesRequest.type,"willRename","willRename",r=>r.oldUri,t.code2ProtocolConverter.asWillRenameFilesParams)}doSend(t,r){var n;let o=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return o?.willRenameFiles?o.willRenameFiles(t,r):r(t)}};fr.WillRenameFilesFeature=Xu;var Yu=class extends so{constructor(t){super(t,$r.workspace.onWillDeleteFiles,en.WillDeleteFilesRequest.type,"willDelete","willDelete",r=>r,t.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(t,r){var n;let o=(n=this._client.clientOptions.middleware)===null||n===void 0?void 0:n.workspace;return o?.willDeleteFiles?o.willDeleteFiles(t,r):r(t)}};fr.WillDeleteFilesFeature=Yu});var Pg=ee(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.LinkedEditingFeature=void 0;var vw=require("vscode"),Qu=Rt(),_w=vr();function wg(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Ju=class extends _w.TextDocumentFeature{constructor(t){super(t,Qu.LinkedEditingRangeRequest.type)}fillClientCapabilities(t){let r=wg(wg(t,"textDocument"),"linkedEditingRange");r.dynamicRegistration=!0}initialize(t,r){let[n,o]=this.getRegistration(r,t.linkedEditingRangeProvider);!n||!o||this.register({id:n,registerOptions:o})}registerLanguageProvider(t){let r={provideLinkedEditingRanges:(n,o,a)=>{let i=this._client,s=(l,d,u)=>i.sendRequest(Qu.LinkedEditingRangeRequest.type,i.code2ProtocolConverter.asTextDocumentPositionParams(l,d),u).then(i.protocol2CodeConverter.asLinkedEditingRanges,p=>i.handleFailedRequest(Qu.LinkedEditingRangeRequest.type,p,null)),c=i.clientOptions.middleware;return c.provideLinkedEditingRange?c.provideLinkedEditingRange(n,o,a,s):s(n,o,a)}};return[vw.languages.registerLinkedEditingRangeProvider(t.documentSelector,r),r]}};vs.LinkedEditingFeature=Ju});var el=ee(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.ProposedFeatures=Vn.CommonLanguageClient=void 0;var yw=vr(),Ew=$h(),bw=wc(),Cw=Bh(),Tw=Vh(),Sw=Gh(),Rw=Kh(),ww=Xh(),Pw=Qh(),Ow=Jh(),Iw=eg(),Dw=tg(),fi=Rg(),Aw=Pg(),Zu=class extends yw.BaseLanguageClient{constructor(t,r,n){super(t,r,n)}registerProposedFeatures(){this.registerFeatures(Og.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new bw.ConfigurationFeature(this)),this.registerFeature(new Tw.TypeDefinitionFeature(this)),this.registerFeature(new Cw.ImplementationFeature(this)),this.registerFeature(new Ew.ColorProviderFeature(this)),this.registerFeature(new Sw.WorkspaceFoldersFeature(this)),this.registerFeature(new Rw.FoldingRangeFeature(this)),this.registerFeature(new ww.DeclarationFeature(this)),this.registerFeature(new Pw.SelectionRangeFeature(this)),this.registerFeature(new Ow.ProgressFeature(this)),this.registerFeature(new Iw.CallHierarchyFeature(this)),this.registerFeature(new Dw.SemanticTokensFeature(this)),this.registerFeature(new Aw.LinkedEditingFeature(this)),this.registerFeature(new fi.DidCreateFilesFeature(this)),this.registerFeature(new fi.DidRenameFilesFeature(this)),this.registerFeature(new fi.DidDeleteFilesFeature(this)),this.registerFeature(new fi.WillCreateFilesFeature(this)),this.registerFeature(new fi.WillRenameFilesFeature(this)),this.registerFeature(new fi.WillDeleteFilesFeature(this))}};Vn.CommonLanguageClient=Zu;var Og;(function(e){function t(r){return[]}e.createAll=t})(Og=Vn.ProposedFeatures||(Vn.ProposedFeatures={}))});var Dg=ee(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.terminate=void 0;var Ig=require("child_process"),xw=require("path"),Nw=process.platform==="win32",kw=process.platform==="darwin",Mw=process.platform==="linux";function qw(e,t){if(Nw)try{let o={stdio:["pipe","pipe","ignore"]};return t&&(o.cwd=t),Ig.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],o),!0}catch{return!1}else if(Mw||kw)try{var r=xw.join(__dirname,"terminateProcess.sh"),n=Ig.spawnSync(r,[e.pid.toString()]);return!n.error}catch{return!1}else return e.kill("SIGKILL"),!0}_s.terminate=qw});var tl=ee((VI,Ag)=>{"use strict";Ag.exports=Rt()});var xg=ee(tn=>{"use strict";var Lw=tn&&tn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),rl=tn&&tn.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Lw(t,e,r)};Object.defineProperty(tn,"__esModule",{value:!0});rl(Rt(),tn);rl(vr(),tn);rl(el(),tn)});var ao=ee(ur=>{"use strict";var jw=ur&&ur.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Mg=ur&&ur.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&jw(t,e,r)};Object.defineProperty(ur,"__esModule",{value:!0});ur.SettingMonitor=ur.LanguageClient=ur.TransportKind=void 0;var Gn=require("child_process"),nl=require("fs"),il=require("path"),Ng=vf(),mn=require("vscode"),Ft=cn(),Fw=el(),Hw=vr(),$w=Dg(),jt=tl();Mg(tl(),ur);Mg(xg(),ur);var kg="^1.52.0",ol;(function(e){function t(r){return Ft.string(r.command)}e.is=t})(ol||(ol={}));var Jt;(function(e){e[e.stdio=0]="stdio",e[e.ipc=1]="ipc",e[e.pipe=2]="pipe",e[e.socket=3]="socket"})(Jt=ur.TransportKind||(ur.TransportKind={}));var hi;(function(e){function t(r){let n=r;return n&&n.kind===Jt.socket&&Ft.number(n.port)}e.isSocket=t})(hi||(hi={}));var sl;(function(e){function t(r){return Ft.string(r.module)}e.is=t})(sl||(sl={}));var al;(function(e){function t(r){let n=r;return n&&n.writer!==void 0&&n.reader!==void 0}e.is=t})(al||(al={}));var cl;(function(e){function t(r){let n=r;return n&&n.process!==void 0&&typeof n.detached=="boolean"}e.is=t})(cl||(cl={}));var ul=class extends Fw.CommonLanguageClient{constructor(t,r,n,o,a){let i,s,c,l,d;Ft.string(r)?(i=t,s=r,c=n,l=o,d=!!a):(i=t.toLowerCase(),s=t,c=r,l=n,d=o),d===void 0&&(d=!1),super(i,s,l),this._serverOptions=c,this._forceDebug=d;try{this.checkVersion()}catch(u){throw Ft.string(u.message)&&this.outputChannel.appendLine(u.message),u}}checkVersion(){let t=Ng.parse(mn.version);if(!t)throw new Error(`No valid VS Code version detected. Version string is: ${mn.version}`);if(t.prerelease&&t.prerelease.length>0&&(t.prerelease=[]),!Ng.satisfies(t,kg))throw new Error(`The language client requires VS Code version ${kg} but received version ${mn.version}`)}stop(){return super.stop().then(()=>{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(t){!t||setTimeout(()=>{try{process.kill(t.pid,0),$w.terminate(t)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(t){super.fillInitializeParams(t),t.processId===null&&(t.processId=process.pid)}createMessageTransports(t){function r(d,u){if(!d&&!u)return;let p=Object.create(null);return Object.keys(process.env).forEach(f=>p[f]=process.env[f]),u&&(p.ELECTRON_RUN_AS_NODE="1",p.ELECTRON_NO_ASAR="1"),d&&Object.keys(d).forEach(f=>p[f]=d[f]),p}let n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],o=["--debug","--debug-brk","--inspect","--inspect-brk"];function a(){let d=process.execArgv;return d?d.some(u=>n.some(p=>u.startsWith(p))||o.some(p=>u===p)):!1}function i(d){if(d.stdin===null||d.stdout===null||d.stderr===null)throw new Error("Process created without stdio streams")}let s=this._serverOptions;if(Ft.func(s))return s().then(d=>{if(Hw.MessageTransports.is(d))return this._isDetached=!!d.detached,d;if(al.is(d))return this._isDetached=!!d.detached,{reader:new jt.StreamMessageReader(d.reader),writer:new jt.StreamMessageWriter(d.writer)};{let u;return cl.is(d)?(u=d.process,this._isDetached=d.detached):(u=d,this._isDetached=!1),u.stderr.on("data",p=>this.outputChannel.append(Ft.string(p)?p:p.toString(t))),{reader:new jt.StreamMessageReader(u.stdout),writer:new jt.StreamMessageWriter(u.stdin)}}});let c,l=s;return l.run||l.debug?this._forceDebug||a()?c=l.debug:c=l.run:c=s,this._getServerWorkingDir(c.options).then(d=>{if(sl.is(c)&&c.module){let u=c,p=u.transport||Jt.stdio;if(u.runtime){let f=[],g=u.options||Object.create(null);g.execArgv&&g.execArgv.forEach(T=>f.push(T)),f.push(u.module),u.args&&u.args.forEach(T=>f.push(T));let m=Object.create(null);m.cwd=d,m.env=r(g.env,!1);let _=this._getRuntimePath(u.runtime,d),E;if(p===Jt.ipc?(m.stdio=[null,null,null,"ipc"],f.push("--node-ipc")):p===Jt.stdio?f.push("--stdio"):p===Jt.pipe?(E=jt.generateRandomPipeName(),f.push(`--pipe=${E}`)):hi.isSocket(p)&&f.push(`--socket=${p.port}`),f.push(`--clientProcessId=${process.pid.toString()}`),p===Jt.ipc||p===Jt.stdio){let T=Gn.spawn(_,f,m);return!T||!T.pid?Promise.reject(`Launching server using runtime ${_} failed.`):(this._serverProcess=T,T.stderr.on("data",w=>this.outputChannel.append(Ft.string(w)?w:w.toString(t))),p===Jt.ipc?(T.stdout.on("data",w=>this.outputChannel.append(Ft.string(w)?w:w.toString(t))),Promise.resolve({reader:new jt.IPCMessageReader(T),writer:new jt.IPCMessageWriter(T)})):Promise.resolve({reader:new jt.StreamMessageReader(T.stdout),writer:new jt.StreamMessageWriter(T.stdin)}))}else{if(p===Jt.pipe)return jt.createClientPipeTransport(E).then(T=>{let w=Gn.spawn(_,f,m);return!w||!w.pid?Promise.reject(`Launching server using runtime ${_} failed.`):(this._serverProcess=w,w.stderr.on("data",R=>this.outputChannel.append(Ft.string(R)?R:R.toString(t))),w.stdout.on("data",R=>this.outputChannel.append(Ft.string(R)?R:R.toString(t))),T.onConnected().then(R=>({reader:R[0],writer:R[1]})))});if(hi.isSocket(p))return jt.createClientSocketTransport(p.port).then(T=>{let w=Gn.spawn(_,f,m);return!w||!w.pid?Promise.reject(`Launching server using runtime ${_} failed.`):(this._serverProcess=w,w.stderr.on("data",R=>this.outputChannel.append(Ft.string(R)?R:R.toString(t))),w.stdout.on("data",R=>this.outputChannel.append(Ft.string(R)?R:R.toString(t))),T.onConnected().then(R=>({reader:R[0],writer:R[1]})))})}}else{let f;return new Promise((g,m)=>{let _=u.args&&u.args.slice()||[];p===Jt.ipc?_.push("--node-ipc"):p===Jt.stdio?_.push("--stdio"):p===Jt.pipe?(f=jt.generateRandomPipeName(),_.push(`--pipe=${f}`)):hi.isSocket(p)&&_.push(`--socket=${p.port}`),_.push(`--clientProcessId=${process.pid.toString()}`);let E=u.options||Object.create(null);if(E.env=r(E.env,!0),E.execArgv=E.execArgv||[],E.cwd=d,E.silent=!0,p===Jt.ipc||p===Jt.stdio){let T=Gn.fork(u.module,_||[],E);i(T),this._serverProcess=T,T.stderr.on("data",w=>this.outputChannel.append(Ft.string(w)?w:w.toString(t))),p===Jt.ipc?(T.stdout.on("data",w=>this.outputChannel.append(Ft.string(w)?w:w.toString(t))),g({reader:new jt.IPCMessageReader(this._serverProcess),writer:new jt.IPCMessageWriter(this._serverProcess)})):g({reader:new jt.StreamMessageReader(T.stdout),writer:new jt.StreamMessageWriter(T.stdin)})}else p===Jt.pipe?jt.createClientPipeTransport(f).then(T=>{let w=Gn.fork(u.module,_||[],E);i(w),this._serverProcess=w,w.stderr.on("data",R=>this.outputChannel.append(Ft.string(R)?R:R.toString(t))),w.stdout.on("data",R=>this.outputChannel.append(Ft.string(R)?R:R.toString(t))),T.onConnected().then(R=>{g({reader:R[0],writer:R[1]})})}):hi.isSocket(p)&&jt.createClientSocketTransport(p.port).then(T=>{let w=Gn.fork(u.module,_||[],E);i(w),this._serverProcess=w,w.stderr.on("data",R=>this.outputChannel.append(Ft.string(R)?R:R.toString(t))),w.stdout.on("data",R=>this.outputChannel.append(Ft.string(R)?R:R.toString(t))),T.onConnected().then(R=>{g({reader:R[0],writer:R[1]})})})})}}else if(ol.is(c)&&c.command){let u=c,p=u.args||[],f=Object.assign({},u.options);f.cwd=f.cwd||d;let g=Gn.spawn(u.command,p,f);return!g||!g.pid?Promise.reject(`Launching server using command ${u.command} failed.`):(g.stderr.on("data",m=>this.outputChannel.append(Ft.string(m)?m:m.toString(t))),this._serverProcess=g,this._isDetached=!!f.detached,Promise.resolve({reader:new jt.StreamMessageReader(g.stdout),writer:new jt.StreamMessageWriter(g.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(s,null,4)))})}_getRuntimePath(t,r){if(il.isAbsolute(t))return t;let n=this._mainGetRootPath();if(n!==void 0){let o=il.join(n,t);if(nl.existsSync(o))return o}if(r!==void 0){let o=il.join(r,t);if(nl.existsSync(o))return o}return t}_mainGetRootPath(){let t=mn.workspace.workspaceFolders;if(!t||t.length===0)return;let r=t[0];if(r.uri.scheme==="file")return r.uri.fsPath}_getServerWorkingDir(t){let r=t&&t.cwd;return r||(r=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),r?new Promise(n=>{nl.lstat(r,(o,a)=>{n(!o&&a.isDirectory()?r:void 0)})}):Promise.resolve(void 0)}getLocale(){let t=process.env.VSCODE_NLS_CONFIG;if(t===void 0)return"en";let r;try{r=JSON.parse(t)}catch{}return r===void 0||typeof r.locale!="string"?"en":r.locale}};ur.LanguageClient=ul;var ll=class{constructor(t,r){this._client=t,this._setting=r,this._listeners=[]}start(){return mn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new mn.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let t=this._setting.indexOf("."),r=t>=0?this._setting.substr(0,t):this._setting,n=t>=0?this._setting.substr(t+1):void 0,o=n?mn.workspace.getConfiguration(r).get(n,!1):mn.workspace.getConfiguration(r);o&&this._client.needsStart()?this._client.start():!o&&this._client.needsStop()&&this._client.stop()}};ur.SettingMonitor=ll});var Lg=ee((KI,qg)=>{"use strict";qg.exports=ao()});var ys=ee((co,dl)=>{(function(e,t){if(typeof co=="object"&&typeof dl=="object")dl.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var r=t();for(var n in r)(typeof co=="object"?co:e)[n]=r[n]}})(co,function(){return(()=>{"use strict";var e={470:r=>{function n(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function o(i,s){for(var c,l="",d=0,u=-1,p=0,f=0;f<=i.length;++f){if(f<i.length)c=i.charCodeAt(f);else{if(c===47)break;c=47}if(c===47){if(!(u===f-1||p===1))if(u!==f-1&&p===2){if(l.length<2||d!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){var g=l.lastIndexOf("/");if(g!==l.length-1){g===-1?(l="",d=0):d=(l=l.slice(0,g)).length-1-l.lastIndexOf("/"),u=f,p=0;continue}}else if(l.length===2||l.length===1){l="",d=0,u=f,p=0;continue}}s&&(l.length>0?l+="/..":l="..",d=2)}else l.length>0?l+="/"+i.slice(u+1,f):l=i.slice(u+1,f),d=f-u-1;u=f,p=0}else c===46&&p!==-1?++p:p=-1}return l}var a={resolve:function(){for(var i,s="",c=!1,l=arguments.length-1;l>=-1&&!c;l--){var d;l>=0?d=arguments[l]:(i===void 0&&(i=process.cwd()),d=i),n(d),d.length!==0&&(s=d+"/"+s,c=d.charCodeAt(0)===47)}return s=o(s,!c),c?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(i){if(n(i),i.length===0)return".";var s=i.charCodeAt(0)===47,c=i.charCodeAt(i.length-1)===47;return(i=o(i,!s)).length!==0||s||(i="."),i.length>0&&c&&(i+="/"),s?"/"+i:i},isAbsolute:function(i){return n(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,s=0;s<arguments.length;++s){var c=arguments[s];n(c),c.length>0&&(i===void 0?i=c:i+="/"+c)}return i===void 0?".":a.normalize(i)},relative:function(i,s){if(n(i),n(s),i===s||(i=a.resolve(i))===(s=a.resolve(s)))return"";for(var c=1;c<i.length&&i.charCodeAt(c)===47;++c);for(var l=i.length,d=l-c,u=1;u<s.length&&s.charCodeAt(u)===47;++u);for(var p=s.length-u,f=d<p?d:p,g=-1,m=0;m<=f;++m){if(m===f){if(p>f){if(s.charCodeAt(u+m)===47)return s.slice(u+m+1);if(m===0)return s.slice(u+m)}else d>f&&(i.charCodeAt(c+m)===47?g=m:m===0&&(g=0));break}var _=i.charCodeAt(c+m);if(_!==s.charCodeAt(u+m))break;_===47&&(g=m)}var E="";for(m=c+g+1;m<=l;++m)m!==l&&i.charCodeAt(m)!==47||(E.length===0?E+="..":E+="/..");return E.length>0?E+s.slice(u+g):(u+=g,s.charCodeAt(u)===47&&++u,s.slice(u))},_makeLong:function(i){return i},dirname:function(i){if(n(i),i.length===0)return".";for(var s=i.charCodeAt(0),c=s===47,l=-1,d=!0,u=i.length-1;u>=1;--u)if((s=i.charCodeAt(u))===47){if(!d){l=u;break}}else d=!1;return l===-1?c?"/":".":c&&l===1?"//":i.slice(0,l)},basename:function(i,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');n(i);var c,l=0,d=-1,u=!0;if(s!==void 0&&s.length>0&&s.length<=i.length){if(s.length===i.length&&s===i)return"";var p=s.length-1,f=-1;for(c=i.length-1;c>=0;--c){var g=i.charCodeAt(c);if(g===47){if(!u){l=c+1;break}}else f===-1&&(u=!1,f=c+1),p>=0&&(g===s.charCodeAt(p)?--p==-1&&(d=c):(p=-1,d=f))}return l===d?d=f:d===-1&&(d=i.length),i.slice(l,d)}for(c=i.length-1;c>=0;--c)if(i.charCodeAt(c)===47){if(!u){l=c+1;break}}else d===-1&&(u=!1,d=c+1);return d===-1?"":i.slice(l,d)},extname:function(i){n(i);for(var s=-1,c=0,l=-1,d=!0,u=0,p=i.length-1;p>=0;--p){var f=i.charCodeAt(p);if(f!==47)l===-1&&(d=!1,l=p+1),f===46?s===-1?s=p:u!==1&&(u=1):s!==-1&&(u=-1);else if(!d){c=p+1;break}}return s===-1||l===-1||u===0||u===1&&s===l-1&&s===c+1?"":i.slice(s,l)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return function(s,c){var l=c.dir||c.root,d=c.base||(c.name||"")+(c.ext||"");return l?l===c.root?l+d:l+"/"+d:d}(0,i)},parse:function(i){n(i);var s={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return s;var c,l=i.charCodeAt(0),d=l===47;d?(s.root="/",c=1):c=0;for(var u=-1,p=0,f=-1,g=!0,m=i.length-1,_=0;m>=c;--m)if((l=i.charCodeAt(m))!==47)f===-1&&(g=!1,f=m+1),l===46?u===-1?u=m:_!==1&&(_=1):u!==-1&&(_=-1);else if(!g){p=m+1;break}return u===-1||f===-1||_===0||_===1&&u===f-1&&u===p+1?f!==-1&&(s.base=s.name=p===0&&d?i.slice(1,f):i.slice(p,f)):(p===0&&d?(s.name=i.slice(1,u),s.base=i.slice(1,f)):(s.name=i.slice(p,u),s.base=i.slice(p,f)),s.ext=i.slice(u,f)),p>0?s.dir=i.slice(0,p-1):d&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,r.exports=a},465:(r,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=n.URI=void 0;var a=o(796);Object.defineProperty(n,"URI",{enumerable:!0,get:function(){return a.URI}});var i=o(679);Object.defineProperty(n,"Utils",{enumerable:!0,get:function(){return i.Utils}})},674:(r,n)=>{if(Object.defineProperty(n,"__esModule",{value:!0}),n.isWindows=void 0,typeof process=="object")n.isWindows=process.platform==="win32";else if(typeof navigator=="object"){var o=navigator.userAgent;n.isWindows=o.indexOf("Windows")>=0}},796:function(r,n,o){var a,i,s=this&&this.__extends||(a=function(U,V){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,ne){Q.__proto__=ne}||function(Q,ne){for(var ve in ne)Object.prototype.hasOwnProperty.call(ne,ve)&&(Q[ve]=ne[ve])})(U,V)},function(U,V){if(typeof V!="function"&&V!==null)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");function Q(){this.constructor=U}a(U,V),U.prototype=V===null?Object.create(V):(Q.prototype=V.prototype,new Q)});Object.defineProperty(n,"__esModule",{value:!0}),n.uriToFsPath=n.URI=void 0;var c=o(674),l=/^\w[\w\d+.-]*$/,d=/^\//,u=/^\/\//;function p(U,V){if(!U.scheme&&V)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(U.authority,'", path: "').concat(U.path,'", query: "').concat(U.query,'", fragment: "').concat(U.fragment,'"}'));if(U.scheme&&!l.test(U.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(U.path){if(U.authority){if(!d.test(U.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(u.test(U.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var f="",g="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,_=function(){function U(V,Q,ne,ve,de,X){X===void 0&&(X=!1),typeof V=="object"?(this.scheme=V.scheme||f,this.authority=V.authority||f,this.path=V.path||f,this.query=V.query||f,this.fragment=V.fragment||f):(this.scheme=function(ce,ie){return ce||ie?ce:"file"}(V,X),this.authority=Q||f,this.path=function(ce,ie){switch(ce){case"https":case"http":case"file":ie?ie[0]!==g&&(ie=g+ie):ie=g}return ie}(this.scheme,ne||f),this.query=ve||f,this.fragment=de||f,p(this,X))}return U.isUri=function(V){return V instanceof U||!!V&&typeof V.authority=="string"&&typeof V.fragment=="string"&&typeof V.path=="string"&&typeof V.query=="string"&&typeof V.scheme=="string"&&typeof V.fsPath=="string"&&typeof V.with=="function"&&typeof V.toString=="function"},Object.defineProperty(U.prototype,"fsPath",{get:function(){return H(this,!1)},enumerable:!1,configurable:!0}),U.prototype.with=function(V){if(!V)return this;var Q=V.scheme,ne=V.authority,ve=V.path,de=V.query,X=V.fragment;return Q===void 0?Q=this.scheme:Q===null&&(Q=f),ne===void 0?ne=this.authority:ne===null&&(ne=f),ve===void 0?ve=this.path:ve===null&&(ve=f),de===void 0?de=this.query:de===null&&(de=f),X===void 0?X=this.fragment:X===null&&(X=f),Q===this.scheme&&ne===this.authority&&ve===this.path&&de===this.query&&X===this.fragment?this:new T(Q,ne,ve,de,X)},U.parse=function(V,Q){Q===void 0&&(Q=!1);var ne=m.exec(V);return ne?new T(ne[2]||f,te(ne[4]||f),te(ne[5]||f),te(ne[7]||f),te(ne[9]||f),Q):new T(f,f,f,f,f)},U.file=function(V){var Q=f;if(c.isWindows&&(V=V.replace(/\\/g,g)),V[0]===g&&V[1]===g){var ne=V.indexOf(g,2);ne===-1?(Q=V.substring(2),V=g):(Q=V.substring(2,ne),V=V.substring(ne)||g)}return new T("file",Q,V,f,f)},U.from=function(V){var Q=new T(V.scheme,V.authority,V.path,V.query,V.fragment);return p(Q,!0),Q},U.prototype.toString=function(V){return V===void 0&&(V=!1),z(this,V)},U.prototype.toJSON=function(){return this},U.revive=function(V){if(V){if(V instanceof U)return V;var Q=new T(V);return Q._formatted=V.external,Q._fsPath=V._sep===E?V.fsPath:null,Q}return V},U}();n.URI=_;var E=c.isWindows?1:void 0,T=function(U){function V(){var Q=U!==null&&U.apply(this,arguments)||this;return Q._formatted=null,Q._fsPath=null,Q}return s(V,U),Object.defineProperty(V.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=H(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),V.prototype.toString=function(Q){return Q===void 0&&(Q=!1),Q?z(this,!0):(this._formatted||(this._formatted=z(this,!1)),this._formatted)},V.prototype.toJSON=function(){var Q={$mid:1};return this._fsPath&&(Q.fsPath=this._fsPath,Q._sep=E),this._formatted&&(Q.external=this._formatted),this.path&&(Q.path=this.path),this.scheme&&(Q.scheme=this.scheme),this.authority&&(Q.authority=this.authority),this.query&&(Q.query=this.query),this.fragment&&(Q.fragment=this.fragment),Q},V}(_),w=((i={})[58]="%3A",i[47]="%2F",i[63]="%3F",i[35]="%23",i[91]="%5B",i[93]="%5D",i[64]="%40",i[33]="%21",i[36]="%24",i[38]="%26",i[39]="%27",i[40]="%28",i[41]="%29",i[42]="%2A",i[43]="%2B",i[44]="%2C",i[59]="%3B",i[61]="%3D",i[32]="%20",i);function R(U,V){for(var Q=void 0,ne=-1,ve=0;ve<U.length;ve++){var de=U.charCodeAt(ve);if(de>=97&&de<=122||de>=65&&de<=90||de>=48&&de<=57||de===45||de===46||de===95||de===126||V&&de===47)ne!==-1&&(Q+=encodeURIComponent(U.substring(ne,ve)),ne=-1),Q!==void 0&&(Q+=U.charAt(ve));else{Q===void 0&&(Q=U.substr(0,ve));var X=w[de];X!==void 0?(ne!==-1&&(Q+=encodeURIComponent(U.substring(ne,ve)),ne=-1),Q+=X):ne===-1&&(ne=ve)}}return ne!==-1&&(Q+=encodeURIComponent(U.substring(ne))),Q!==void 0?Q:U}function I(U){for(var V=void 0,Q=0;Q<U.length;Q++){var ne=U.charCodeAt(Q);ne===35||ne===63?(V===void 0&&(V=U.substr(0,Q)),V+=w[ne]):V!==void 0&&(V+=U[Q])}return V!==void 0?V:U}function H(U,V){var Q;return Q=U.authority&&U.path.length>1&&U.scheme==="file"?"//".concat(U.authority).concat(U.path):U.path.charCodeAt(0)===47&&(U.path.charCodeAt(1)>=65&&U.path.charCodeAt(1)<=90||U.path.charCodeAt(1)>=97&&U.path.charCodeAt(1)<=122)&&U.path.charCodeAt(2)===58?V?U.path.substr(1):U.path[1].toLowerCase()+U.path.substr(2):U.path,c.isWindows&&(Q=Q.replace(/\//g,"\\")),Q}function z(U,V){var Q=V?I:R,ne="",ve=U.scheme,de=U.authority,X=U.path,ce=U.query,ie=U.fragment;if(ve&&(ne+=ve,ne+=":"),(de||ve==="file")&&(ne+=g,ne+=g),de){var pe=de.indexOf("@");if(pe!==-1){var he=de.substr(0,pe);de=de.substr(pe+1),(pe=he.indexOf(":"))===-1?ne+=Q(he,!1):(ne+=Q(he.substr(0,pe),!1),ne+=":",ne+=Q(he.substr(pe+1),!1)),ne+="@"}(pe=(de=de.toLowerCase()).indexOf(":"))===-1?ne+=Q(de,!1):(ne+=Q(de.substr(0,pe),!1),ne+=de.substr(pe))}if(X){if(X.length>=3&&X.charCodeAt(0)===47&&X.charCodeAt(2)===58)(be=X.charCodeAt(1))>=65&&be<=90&&(X="/".concat(String.fromCharCode(be+32),":").concat(X.substr(3)));else if(X.length>=2&&X.charCodeAt(1)===58){var be;(be=X.charCodeAt(0))>=65&&be<=90&&(X="".concat(String.fromCharCode(be+32),":").concat(X.substr(2)))}ne+=Q(X,!0)}return ce&&(ne+="?",ne+=Q(ce,!1)),ie&&(ne+="#",ne+=V?ie:R(ie,!1)),ne}function K(U){try{return decodeURIComponent(U)}catch{return U.length>3?U.substr(0,3)+K(U.substr(3)):U}}n.uriToFsPath=H;var J=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function te(U){return U.match(J)?U.replace(J,function(V){return K(V)}):U}},679:function(r,n,o){var a=this&&this.__spreadArray||function(l,d,u){if(u||arguments.length===2)for(var p,f=0,g=d.length;f<g;f++)!p&&f in d||(p||(p=Array.prototype.slice.call(d,0,f)),p[f]=d[f]);return l.concat(p||Array.prototype.slice.call(d))};Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=void 0;var i,s=o(470),c=s.posix||s;(i=n.Utils||(n.Utils={})).joinPath=function(l){for(var d=[],u=1;u<arguments.length;u++)d[u-1]=arguments[u];return l.with({path:c.join.apply(c,a([l.path],d,!1))})},i.resolvePath=function(l){for(var d=[],u=1;u<arguments.length;u++)d[u-1]=arguments[u];var p=l.path||"/";return l.with({path:c.resolve.apply(c,a([p],d,!1))})},i.dirname=function(l){var d=c.dirname(l.path);return d.length===1&&d.charCodeAt(0)===46?l:l.with({path:d})},i.basename=function(l){return c.basename(l.path)},i.extname=function(l){return c.extname(l.path)}}},t={};return function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(465)})()})});var Xg=ee((sD,zg)=>{zg.exports=Kg;Kg.sync=Vw;var Gg=require("fs");function Bw(e,t){var r=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}function Wg(e,t,r){return!e.isSymbolicLink()&&!e.isFile()?!1:Bw(t,r)}function Kg(e,t,r){Gg.stat(e,function(n,o){r(n,n?!1:Wg(o,e,t))})}function Vw(e,t){return Wg(Gg.statSync(e),e,t)}});var em=ee((aD,Zg)=>{Zg.exports=Qg;Qg.sync=Gw;var Yg=require("fs");function Qg(e,t,r){Yg.stat(e,function(n,o){r(n,n?!1:Jg(o,t))})}function Gw(e,t){return Jg(Yg.statSync(e),t)}function Jg(e,t){return e.isFile()&&Ww(e,t)}function Ww(e,t){var r=e.mode,n=e.uid,o=e.gid,a=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),i=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),s=parseInt("100",8),c=parseInt("010",8),l=parseInt("001",8),d=s|c,u=r&l||r&c&&o===i||r&s&&n===a||r&d&&a===0;return u}});var rm=ee((uD,tm)=>{var cD=require("fs"),Ts;process.platform==="win32"||global.TESTING_WINDOWS?Ts=Xg():Ts=em();tm.exports=gl;gl.sync=Kw;function gl(e,t,r){if(typeof t=="function"&&(r=t,t={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,o){gl(e,t||{},function(a,i){a?o(a):n(i)})})}Ts(e,t||{},function(n,o){n&&(n.code==="EACCES"||t&&t.ignoreErrors)&&(n=null,o=!1),r(n,o)})}function Kw(e,t){try{return Ts.sync(e,t||{})}catch(r){if(t&&t.ignoreErrors||r.code==="EACCES")return!1;throw r}}});var um=ee((lD,cm)=>{var vi=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",nm=require("path"),zw=vi?";":":",im=rm(),om=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),sm=(e,t)=>{let r=t.colon||zw,n=e.match(/\//)||vi&&e.match(/\\/)?[""]:[...vi?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=vi?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",a=vi?o.split(r):[""];return vi&&e.indexOf(".")!==-1&&a[0]!==""&&a.unshift(""),{pathEnv:n,pathExt:a,pathExtExe:o}},am=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),t||(t={});let{pathEnv:n,pathExt:o,pathExtExe:a}=sm(e,t),i=[],s=l=>new Promise((d,u)=>{if(l===n.length)return t.all&&i.length?d(i):u(om(e));let p=n[l],f=/^".*"$/.test(p)?p.slice(1,-1):p,g=nm.join(f,e),m=!f&&/^\.[\\\/]/.test(e)?e.slice(0,2)+g:g;d(c(m,l,0))}),c=(l,d,u)=>new Promise((p,f)=>{if(u===o.length)return p(s(d+1));let g=o[u];im(l+g,{pathExt:a},(m,_)=>{if(!m&&_)if(t.all)i.push(l+g);else return p(l+g);return p(c(l,d,u+1))})});return r?s(0).then(l=>r(null,l),r):s(0)},Xw=(e,t)=>{t=t||{};let{pathEnv:r,pathExt:n,pathExtExe:o}=sm(e,t),a=[];for(let i=0;i<r.length;i++){let s=r[i],c=/^".*"$/.test(s)?s.slice(1,-1):s,l=nm.join(c,e),d=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;for(let u=0;u<n.length;u++){let p=d+n[u];try{if(im.sync(p,{pathExt:o}))if(t.all)a.push(p);else return p}catch{}}}if(t.all&&a.length)return a;if(t.nothrow)return null;throw om(e)};cm.exports=am;am.sync=Xw});var cP={};ev(cP,{activate:()=>tP,deactivate:()=>rP,moduleCallers:()=>vl,terraformStatus:()=>Ur,updateTerraformStatusBar:()=>Em});module.exports=tv(cP);var Ne=Ht(require("vscode")),ym=Ht(bd()),Br=Ht(Lg()),As=Ht(ys());var qr=Ht(require("vscode"));function At(e,t){return qr.workspace.getConfiguration(e,t)}function pl(e,t){let r=qr.ConfigurationTarget.Global,n=qr.workspace.getConfiguration(e).inspect(t);return n===void 0||(n.globalValue&&(r=qr.ConfigurationTarget.Global),n.workspaceFolderValue&&(r=qr.ConfigurationTarget.WorkspaceFolder),n.workspaceValue&&(r=qr.ConfigurationTarget.Workspace)),r}function vn(){return qr.window.visibleTextEditors.find(e=>!!e.viewColumn)}function _n(e){return e===void 0||e.isUntitled?!1:!!e.fileName.endsWith("tf")}async function jg(e){let t=await e.resolvedPathToBinary(),r=At("terraform").get("languageServer.args",[]);return{command:t,args:r,options:{}}}function Fg(){let e=At("terraform-ls").get("rootModules",[]),t=At("terraform-ls").get("terraformExecPath",""),r=At("terraform-ls").get("terraformExecTimeout",""),n=At("terraform-ls").get("terraformLogFilePath",""),o=At("terraform-ls").get("excludeRootModules",[]),a=At("terraform-ls").get("ignoreDirectoryNames",[]),i=At("terraform").get("languageServer.ignoreSingleFileWarning",!1);if(e.length>0&&o.length>0)throw new Error("Only one of rootModules and excludeRootModules can be set at the same time, please remove the conflicting config and reload");return{experimentalFeatures:At("terraform-ls").get("experimentalFeatures"),ignoreSingleFileWarning:i,...t.length>0&&{terraformExecPath:t},...r.length>0&&{terraformExecTimeout:r},...n.length>0&&{terraformLogFilePath:n},...e.length>0&&{rootModulePaths:e},...o.length>0&&{excludeModulePaths:o},...a.length>0&&{ignoreDirectoryNames:a}}}function gi(e,t){return e?e.capabilities.executeCommandProvider?.commands.includes(t)??!1:!1}var mi=Ht(require("os")),Lr=Ht(require("vscode")),Uw=require("child_process"),Es=class{constructor(t){this.ctx=t;this.ctx.subscriptions.push(Lr.commands.registerCommand("terraform.generateBugReport",async()=>{let r=await Lr.window.showInputBox({title:"Generate a Bug Report",prompt:"Enter a short description of the problem or hit enter to submit now",placeHolder:"For example: I'm having trouble getting autocomplete to work when I..."}),n=this.getExtensions(),o=await this.generateBody(n,r),i=`https://github.com/hashicorp/vscode-terraform/issues/new?body=${encodeURIComponent(o)}`;Lr.commands.executeCommand("vscode.open",Lr.Uri.parse(i))}))}dispose(){}async generateBody(t,r){return r||(r=`Steps To Reproduce
=====

Steps to reproduce the behavior:

1. Go to '...'
2. Type '...'
3. See error

Include any relevant Terraform configuration or project structure:

\`\`\`terraform
resource "github_repository" "test" {
  name = "vscode-terraform"
}
\`\`\`


You can use 'tree' to output ASCII-based hierarchy of your project.

If applicable, add screenshots to help explain your problem.

Expected Behavior
-----

<!-- What should have happened? -->

Actual Behavior
-----

<!-- What actually happened? -->

Additional context
-----

<!--
Add any other context about the problem here.
Note whether you use any tools for managing Terraform version/execution (e.g. 'tfenv')
any credentials helpers, or whether you have any other Terraform extensions installed.
-->
`),`Issue Description
=====

${r}

Environment Information
=====

Terraform Information
-----

${this.generateRuntimeMarkdown(await this.getRuntimeInfo())}

Visual Studio Code
-----

| Name | Version |
| --- | --- |
| Operating System | ${mi.type()} ${mi.arch()} ${mi.release()} |
| VSCode | ${Lr.version}|

Visual Studio Code Extensions
-----

<details><summary>Visual Studio Code Extensions(Click to Expand)</summary>

${this.generateExtesnionMarkdown(t)}
</details>

Extension Logs
-----

> Find this from the first few lines of the relevant Output pane:
View -> Output -> 'HashiCorp Terraform'

`}generateExtesnionMarkdown(t){if(!t.length)return"none";let r=`|Extension|Author|Version|
|---|---|---|`,n=t.map(a=>`|${a.name}|${a.publisher}|${a.version}|`).join(`
`);return`${r}
${n}`}generateRuntimeMarkdown(t){return`
Version:	${t.version}
Platform:	${t.platform}
Outdated:	${t.outdated}
    `}getExtensions(){return Lr.extensions.all.filter(r=>r.packageJSON.isBuiltin===!1).sort((r,n)=>r.packageJSON.name.toLowerCase()<n.packageJSON.name.toLowerCase()?-1:r.packageJSON.name.toLowerCase()>n.packageJSON.name.toLowerCase()?1:0).map(r=>({name:r.packageJSON.name,publisher:r.packageJSON.publisher,version:r.packageJSON.version}))}async getRuntimeInfo(){let t="terraform",r=Uw.spawnSync,n=r(t,["version","-json"]);if(n.error===void 0)try{let a=n.stdout.toString(),i=JSON.parse(a);return{version:i.terraform_version,platform:i.platform,outdated:i.terraform_outdated}}catch{}let o=r(t,["version"]);if(o.error===void 0)try{let a=o.stdout.toString()||o.stderr.toString(),s=new RegExp("v?(?<version>[0-9]+(?:.[0-9]+)*(?:-[A-Za-z0-9.]+)?)").exec(a),c=s&&s.length>1?s[1]:"Not found",l=a.split(`
`)[1].replace("on ","");return{version:c,platform:l,outdated:!0}}catch{}return{version:"Not found",platform:"Not found",outdated:!1}}};var Hg=Ht(require("path")),xt=Ht(require("vscode")),$g=Ht(ao()),Ug=Ht(ys());var fl=class extends xt.TreeItem{constructor(r,n,o,a,i,s,c){super(r,c.length>=1?xt.TreeItemCollapsibleState.Collapsed:xt.TreeItemCollapsibleState.None);this.label=r;this.sourceAddr=n;this.version=o;this.sourceType=a;this.docsLink=i;this.terraformIcon=s;this.children=c;this.iconPath=this.getIcon(this.sourceType);this.description=this.version?`${this.version}`:"",this.version===void 0?this.tooltip=`${this.sourceAddr}`:this.tooltip=`${this.sourceAddr}@${this.version}`}getIcon(r){switch(r){case"tfregistry":return{light:this.terraformIcon,dark:this.terraformIcon};case"local":return new xt.ThemeIcon("symbol-folder");case"github":return new xt.ThemeIcon("github");case"git":return new xt.ThemeIcon("git-branch");default:return new xt.ThemeIcon("extensions-view-icon")}}},bs=class{constructor(t,r){this.client=r;this._onDidChangeTreeData=new xt.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.svg="";this.svg=t.asAbsolutePath(Hg.join("assets","icons","terraform.svg")),t.subscriptions.push(xt.commands.registerCommand("terraform.modules.refreshList",()=>this.refresh()),xt.commands.registerCommand("terraform.modules.openDocumentation",n=>{n.docsLink&&xt.env.openExternal(xt.Uri.parse(n.docsLink))}),xt.window.onDidChangeActiveTextEditor(async n=>{let o=vn();!_n(o?.document)||n&&o&&this.refresh()}))}refresh(){this._onDidChangeTreeData.fire()}getTreeItem(t){return t}getChildren(t){if(t)return Promise.resolve(t.children);{let r=this.getModules();return Promise.resolve(r)}}async getModules(){let t=vn();if(t?.document===void 0)return[];if(!_n(t.document))return[];let r=t.document.uri,n=Ug.Utils.dirname(r);if(this.client===void 0)return[];if(await this.client.onReady(),!gi(this.client.initializeResult,"terraform-ls.module.calls"))return Promise.resolve([]);let a={command:"terraform-ls.module.calls",arguments:[`uri=${n}`]},i=await this.client.sendRequest($g.ExecuteCommandRequest.type,a);return i===null?Promise.resolve([]):i.module_calls.map(c=>this.toModuleCall(c.name,c.source_addr,c.version,c.source_type,c.docs_link,this.svg,c.dependent_modules))}toModuleCall(t,r,n,o,a,i,s){let c=[];return s.length!==0&&(c=s.map(l=>this.toModuleCall(l.name,l.source_addr,l.version,l.source_type,l.docs_link,i,l.dependent_modules))),new fl(t,r,n,o,a,i,c)}};var Zt=Ht(require("vscode")),Bg=Ht(ys()),Vg=Ht(ao());var hl=class extends Zt.TreeItem{constructor(r,n,o,a,i){super(n,Zt.TreeItemCollapsibleState.None);this.fullName=r;this.displayName=n;this.requiredVersion=o;this.installedVersion=a;this.docsLink=i;this.description=a??"",this.iconPath=new Zt.ThemeIcon("package"),this.tooltip=`${r} ${o??""}`,i&&(this.contextValue="moduleProviderHasDocs")}},Cs=class{constructor(t,r){this.client=r;this.didChangeTreeData=new Zt.EventEmitter;this.onDidChangeTreeData=this.didChangeTreeData.event;t.subscriptions.push(Zt.commands.registerCommand("terraform.providers.refreshList",()=>this.refresh()),Zt.window.onDidChangeActiveTextEditor(async n=>{let o=vn();!_n(o?.document)||n&&o&&this.refresh()}),Zt.commands.registerCommand("terraform.providers.openDocumentation",n=>{n.docsLink&&Zt.env.openExternal(Zt.Uri.parse(n.docsLink))}))}refresh(){this.didChangeTreeData.fire()}getTreeItem(t){return t}getChildren(t){return t?[]:this.getProvider()}async getProvider(){let t=vn();if(t?.document===void 0)return[];if(!_n(t.document))return[];let r=t.document.uri,n=Bg.Utils.dirname(r);if(this.client===void 0)return[];if(await this.client.onReady(),!gi(this.client.initializeResult,"terraform-ls.module.providers"))return[];let a={command:"terraform-ls.module.providers",arguments:[`uri=${n}`]},i=await this.client.sendRequest(Vg.ExecuteCommandRequest.type,a);return i===null?[]:Object.entries(i.provider_requirements).map(([s,c])=>new hl(s,c.display_name,c.version_constraint,i.installed_providers[s],c.docs_link))}};var yn=Ht(require("path")),uo=Ht(require("vscode")),dm=Ht(um()),Yw="bin",lm="languageServer.pathToBinary",Ss=class{constructor(t){this.context=t;this.customBinPath=uo.workspace.getConfiguration("terraform").get(lm)}installPath(){return yn.join(this.context.extensionPath,Yw)}hasCustomBinPath(){return!!this.customBinPath}binPath(){return this.customBinPath?this.customBinPath:yn.resolve(this.installPath(),this.binName())}binName(){return this.customBinPath?yn.basename(this.customBinPath):process.platform==="win32"?"terraform-ls.exe":"terraform-ls"}async resolvedPathToBinary(){let t=this.binPath(),r;try{yn.isAbsolute(t)?(await uo.workspace.fs.stat(uo.Uri.file(t)),r=t):r=dm.sync(t),console.log(`Found server at ${r}`)}catch(n){let o="";throw this.customBinPath&&(o=`. Check "${lm}" in your settings.`),new Error(`Unable to launch language server: ${n instanceof Error?n.message:n}${o}`)}return r}};var pm=1,Rs=class{constructor(t,r){this.client=t;this.client.onTelemetry(n=>{if(n.v!==pm){console.log(`unsupported telemetry event: ${n}`);return}r.sendRawTelemetryEvent(n.name,n.properties)})}fillClientCapabilities(t){t.experimental||(t.experimental={}),t.experimental.telemetryVersion=pm}initialize(){}dispose(){}};var rn=Ht(require("vscode")),hm=Ht(ao()),fm="client.showReferences",Qw="editor.action.showReferences",ws=class{constructor(t){this._client=t;this.registeredCommands=[]}fillClientCapabilities(t){t.experimental||(t.experimental={}),t.experimental.showReferencesCommandId=fm}initialize(t){if(!t.experimental?.referenceCountCodeLens)return;let r=rn.commands.registerCommand(fm,async(n,o)=>{let a=this._client,i=rn.window?.activeTextEditor?.document;if(!i)return;let s=new rn.Position(n.line,n.character),c={includeDeclaration:o.includeDeclaration},l=a.getFeature(hm.ReferencesRequest.method).getProvider(i);if(!l)return;let d=new rn.CancellationTokenSource,u=await l.provideReferences(i,s,c,d.token);await rn.commands.executeCommand(Qw,i.uri,s,u)});this.registeredCommands.push(r)}dispose(){this.registeredCommands.forEach(function(t,r,n){t.dispose(),n.splice(r,1)})}};var Ps=class{constructor(t,r){this._client=t;this.manifest=r}fillClientCapabilities(t){if(!t.textDocument||!t.textDocument.semanticTokens)return;let r=this.tokenTypesFromExtManifest(this.manifest),n=this.tokenModifiersFromExtManifest(this.manifest),o=t.textDocument.semanticTokens.tokenTypes;t.textDocument.semanticTokens.tokenTypes=o.concat(r);let a=t.textDocument.semanticTokens.tokenModifiers;t.textDocument.semanticTokens.tokenModifiers=a.concat(n)}initialize(t){}dispose(){}tokenTypesFromExtManifest(t){return t.contributes.semanticTokenTypes?t.contributes.semanticTokenTypes.map(r=>r.id):[]}tokenModifiersFromExtManifest(t){return t.contributes.semanticTokenModifiers?t.contributes.semanticTokenModifiers.map(r=>r.id):[]}};var gm="client.refreshModuleProviders",Os=class{constructor(t,r){this.client=t;this.view=r;this.disposables=[]}fillClientCapabilities(t){t.experimental||(t.experimental={}),t.experimental.refreshModuleProvidersCommandId=gm}async initialize(t){if(!t.experimental?.refreshModuleProviders){console.log("Server doesn't support client.refreshModuleProviders");return}await this.client.onReady();let r=this.client.onRequest(gm,()=>{this.view?.refresh()});this.disposables.push(r)}dispose(){this.disposables.forEach(t=>t.dispose())}};var mm="client.refreshModuleCalls",Is=class{constructor(t,r){this.client=t;this.view=r;this.disposables=[]}fillClientCapabilities(t){t.experimental||(t.experimental={}),t.experimental.refreshModuleCallsCommandId=mm}async initialize(t){if(!t.experimental?.refreshModuleCalls){console.log("Server does not support client.refreshModuleCalls");return}await this.client.onReady();let r=this.client.onRequest(mm,()=>{this.view?.refresh()});this.disposables.push(r)}dispose(){this.disposables.forEach(t=>t.dispose())}};var Jw="terraform",Zw="HashiCorp Terraform",eP=[{scheme:"file",language:"terraform"},{scheme:"file",language:"terraform-vars"}],vm=Ne.window.createOutputChannel(Zw),Ur,jr,Tt;async function tP(e){let t=e.extension.packageJSON;if(Ur=Ne.window.createStatusBarItem(Ne.StatusBarAlignment.Left,0),jr=new ym.default(e.extension.id,t.version,t.appInsightsKey),e.subscriptions.push(jr),aP(e.extension.id)){jr.sendTelemetryEvent("previewExtensionPresentWithStable");return}if(await sP(),e.subscriptions.push(new Es(e),Ne.commands.registerCommand("terraform.enableLanguageServer",async()=>{if(At("terraform").get("languageServer.external")===!0)return _m(e);let u=At("terraform").get("languageServer",{external:!0,pathToBinary:"",args:["serve"],ignoreSingleFileWarning:!1}),p=Object.assign(u,{external:!0}),f=pl("terraform","languageServer");await At("terraform").update("languageServer",p,f)}),Ne.commands.registerCommand("terraform.disableLanguageServer",async()=>{if(At("terraform").get("languageServer.external")===!1)return nP();let u=At("teraform").get("languageServer",{external:!0,pathToBinary:"",args:["serve"],ignoreSingleFileWarning:!1}),p=Object.assign(u,{external:!1}),f=pl("terraform","languageServer");await At("terraform").update("languageServer",p,f)}),Ne.workspace.onDidChangeConfiguration(async u=>{if(u.affectsConfiguration("terraform")||u.affectsConfiguration("terraform-ls")){let p="Reload VSCode window to apply language server changes";await Ne.window.showInformationMessage(p,"Reload")==="Reload"&&Ne.commands.executeCommand("workbench.action.reloadWindow")}}),Ne.commands.registerCommand("terraform.apply",async()=>{await Ds("apply")}),Ne.commands.registerCommand("terraform.initCurrent",async()=>{await Ds("init",!0)}),Ne.commands.registerCommand("terraform.plan",async()=>{await Ds("plan",!1)}),Ne.commands.registerCommand("terraform.validate",async()=>{await Ds("validate",!0)})),!oP()){jr.sendTelemetryEvent("disabledTerraformLS");return}let r=new Ss(e);r.hasCustomBinPath()&&jr.sendTelemetryEvent("usePathToBinary");let n=await jg(r),o={run:n,debug:n};vm.appendLine(`Launching language server: ${n.command} ${n.args?.join(" ")}`);let a=Fg(),i={documentSelector:eP,synchronize:{fileEvents:[Ne.workspace.createFileSystemWatcher("**/*.tf"),Ne.workspace.createFileSystemWatcher("**/*.tfvars")]},initializationOptions:a,initializationFailedHandler:u=>(jr.sendTelemetryException(u),!1),outputChannel:vm,revealOutputChannelOn:Br.RevealOutputChannelOn.Never};Tt=new Br.LanguageClient(Jw,o,i),Tt.onDidChangeState(u=>{console.log(`Client: ${Br.State[u.oldState]} --> ${Br.State[u.newState]}`),u.newState===Br.State.Stopped&&jr.sendTelemetryEvent("stopClient")});let s=new Cs(e,Tt),c=new bs(e,Tt),l=[new Ps(Tt,t),new Os(Tt,s),new Is(Tt,c)];Ne.env.isTelemetryEnabled&&l.push(new Rs(Tt,jr)),At("terraform").get("codelens.referenceCount")&&l.push(new ws(Tt)),Tt.registerFeatures(l),await _m(e),e.subscriptions.push(Ne.commands.registerCommand("terraform.init",async()=>{let u=Ne.workspace.workspaceFolders,p=await Ne.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,defaultUri:u?u[0]?.uri:void 0,openLabel:"Initialize"});if(p&&Tt){let f=p[0],g={command:"terraform-ls.terraform.init",arguments:[`uri=${f}`]};await ml(Tt,g)}}),Ne.window.registerTreeDataProvider("terraform.modules",c),Ne.window.registerTreeDataProvider("terraform.providers",s),Ne.window.onDidChangeVisibleTextEditors(async u=>{let p=u.find(f=>!!f.viewColumn);p?.document!==void 0&&(!_n(p.document)||await Em(p.document.uri))}))}async function rP(){if(Tt!==void 0)return Tt.stop()}async function Em(e){if(!(Tt===void 0||!gi(Tt.initializeResult,"terraform-ls.terraform.init")))try{let r=As.Utils.dirname(e);if((await vl(r.toString())).moduleCallers.length===0){let o=As.Utils.basename(r);Ur.text=`$(refresh) ${o}`,Ur.color=new Ne.ThemeColor("statusBar.foreground"),Ur.tooltip="Click to run terraform init",Ur.command="terraform.initCurrent",Ur.show()}else Ur.hide(),Ur.text=""}catch(r){r instanceof Error&&(Ne.window.showErrorMessage(r.message),jr.sendTelemetryException(r)),Ur.hide()}}async function _m(e){try{console.log("Starting client"),e.subscriptions.push(Tt.start()),await Tt.onReady(),jr.sendTelemetryEvent("startClient");let t=Tt.initializeResult;if(t!==void 0){let r=t.capabilities.workspace?.workspaceFolders?.supported;console.log(`Multi-folder support: ${r}`)}Ne.commands.executeCommand("setContext","terraform.showTreeViews",!0)}catch(t){console.log(t),t instanceof Error?Ne.window.showErrorMessage(t instanceof Error?t.message:t):typeof t=="string"&&Ne.window.showErrorMessage(t)}}async function nP(){try{await Tt?.stop(),Ne.commands.executeCommand("setContext","terraform.showTreeViews",!1)}catch(e){console.log(e),e instanceof Error?Ne.window.showErrorMessage(e instanceof Error?e.message:e):typeof e=="string"&&Ne.window.showErrorMessage(e)}}function ml(e,t){return jr.sendTelemetryEvent("execWorkspaceCommand",{command:t.command}),e.sendRequest(Br.ExecuteCommandRequest.type,t)}async function iP(e,t){let r={command:"terraform-ls.module.callers",arguments:[`uri=${t}`]};return ml(e,r)}async function vl(e){if(Tt===void 0)return{version:0,moduleCallers:[]};let t=await iP(Tt,e),r=t.callers;return{version:t.v,moduleCallers:r}}async function Ds(e,t=!0){let r=vn();if(r){let n=As.Utils.dirname(r.document.uri),o=await vl(n.toString()),a;if(o.moduleCallers.length>1){let i=await Ne.window.showQuickPick(o.moduleCallers.map(s=>s.uri),{canPickMany:!1});if(!i)return;a=i}else o.moduleCallers.length===1?a=o.moduleCallers[0].uri:a=n.toString();if(t&&Tt){let i={command:`terraform-ls.terraform.${e}`,arguments:[`uri=${a}`]};return ml(Tt,i)}else{let i=`Terraform ${a}`,s=Ne.Uri.parse(a),c=await Ne.window.showInputBox({value:`terraform ${e}`,prompt:`Run in ${a}`});if(c){let l=Ne.window.terminals.find(d=>d.name===i)||Ne.window.createTerminal({name:`Terraform ${a}`,cwd:s});l.sendText(c),l.show()}return}}else{Ne.window.showWarningMessage(`Open a module then run terraform ${e} again`);return}}function oP(){return At("terraform").get("languageServer.external",!1)}async function sP(){if(At("terraform").has("languageServer.enabled"))try{await At("terraform").update("languageServer",{enabled:void 0,external:!0},Ne.ConfigurationTarget.Global)}catch(e){let t=e instanceof Error?e.message:e;console.error(`Error trying to erase pre-2.0.0 settings: ${t}`)}}function aP(e){let t=Ne.extensions.getExtension("hashicorp.terraform"),r=Ne.extensions.getExtension("hashicorp.terraform-preview"),n="Please ensure only one is enabled or installed and reload this window";if(e==="hashicorp.terraform-preview"){if(t!==void 0)return Ne.window.showErrorMessage("Terraform Preview cannot be used while Terraform Stable is also enabled."+n),!0}else if(e==="hashicorp.terraform"&&r!==void 0)return Ne.window.showErrorMessage("Terraform Stable cannot be used while Terraform Preview is also enabled."+n),!0;return!1}0&&(module.exports={activate,deactivate,moduleCallers,terraformStatus,updateTerraformStatusBar});
